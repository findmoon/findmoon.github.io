<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>findmoon白色蜗牛</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta property="og:type" content="website">
<meta property="og:title" content="findmoon白色蜗牛">
<meta property="og:url" content="//findmoon.github.io/index.html/page/11/index.html">
<meta property="og:site_name" content="findmoon白色蜗牛">
<meta property="og:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="findmoon白色蜗牛">
<meta name="twitter:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
  
    <link rel="alternative" href="/atom.xml" title="findmoon白色蜗牛" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">findmoon</a></h1>
        </hgroup>

        
        <p class="header-subtitle">一个试图专注于自身的成长者</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/Home">个人简历</a></li>
                        
                            <li><a href="/works">作品展示</a></li>
                        
                            <li><a href="/archives">所有文章</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=hre0vrCwtbG3v77G9-eo5enr" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/findmoon/mywork" title="github">github</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/u/2637672265?is_all=1" title="weibo">weibo</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Array/" style="font-size: 11.43px;">Array</a> <a href="/tags/Arry-string-math/" style="font-size: 10px;">Arry/string/math</a> <a href="/tags/BFC/" style="font-size: 11.43px;">BFC</a> <a href="/tags/Backbone/" style="font-size: 10px;">Backbone</a> <a href="/tags/CSS3动画/" style="font-size: 10px;">CSS3动画</a> <a href="/tags/DNS解析域名/" style="font-size: 10px;">DNS解析域名</a> <a href="/tags/DOCTYPE/" style="font-size: 10px;">DOCTYPE</a> <a href="/tags/DOM事件/" style="font-size: 10px;">DOM事件</a> <a href="/tags/Data/" style="font-size: 10px;">Data</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/MV模式/" style="font-size: 12.86px;">MV模式</a> <a href="/tags/Mocha/" style="font-size: 10px;">Mocha</a> <a href="/tags/OO/" style="font-size: 10px;">OO</a> <a href="/tags/TCP-UDP/" style="font-size: 11.43px;">TCP/UDP</a> <a href="/tags/TCP三次握手/" style="font-size: 10px;">TCP三次握手</a> <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/UNICODE-ASCII/" style="font-size: 10px;">UNICODE/ASCII</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/animate/" style="font-size: 10px;">animate()</a> <a href="/tags/animate动画队列/" style="font-size: 10px;">animate动画队列</a> <a href="/tags/background-image/" style="font-size: 10px;">background-image</a> <a href="/tags/border/" style="font-size: 12.86px;">border</a> <a href="/tags/border图形/" style="font-size: 10px;">border图形</a> <a href="/tags/box-shadow/" style="font-size: 10px;">box-shadow</a> <a href="/tags/console-log/" style="font-size: 10px;">console.log()</a> <a href="/tags/css/" style="font-size: 12.86px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/css属性/" style="font-size: 11.43px;">css属性</a> <a href="/tags/css样式/" style="font-size: 10px;">css样式</a> <a href="/tags/deferred/" style="font-size: 11.43px;">deferred</a> <a href="/tags/delete/" style="font-size: 11.43px;">delete</a> <a href="/tags/first-child/" style="font-size: 10px;">first-child</a> <a href="/tags/first-of-type/" style="font-size: 10px;">first-of-type</a> <a href="/tags/float/" style="font-size: 11.43px;">float</a> <a href="/tags/font-face/" style="font-size: 10px;">font-face</a> <a href="/tags/form表单/" style="font-size: 10px;">form表单</a> <a href="/tags/get/" style="font-size: 10px;">get</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitbash/" style="font-size: 10px;">gitbash</a> <a href="/tags/git错误/" style="font-size: 10px;">git错误</a> <a href="/tags/hack/" style="font-size: 10px;">hack</a> <a href="/tags/haslayout/" style="font-size: 10px;">haslayout</a> <a href="/tags/html/" style="font-size: 17.14px;">html</a> <a href="/tags/html-css/" style="font-size: 11.43px;">html/css</a> <a href="/tags/http/" style="font-size: 12.86px;">http</a> <a href="/tags/http状态码/" style="font-size: 10px;">http状态码</a> <a href="/tags/inline-block/" style="font-size: 10px;">inline-block</a> <a href="/tags/input/" style="font-size: 10px;">input</a> <a href="/tags/instanceof/" style="font-size: 10px;">instanceof</a> <a href="/tags/instanceof-typeof/" style="font-size: 11.43px;">instanceof/typeof</a> <a href="/tags/jQuery/" style="font-size: 11.43px;">jQuery</a> <a href="/tags/js/" style="font-size: 18.57px;">js</a> <a href="/tags/json/" style="font-size: 12.86px;">json</a> <a href="/tags/js严格模式/" style="font-size: 10px;">js严格模式</a> <a href="/tags/js加载/" style="font-size: 10px;">js加载</a> <a href="/tags/js模板引擎/" style="font-size: 10px;">js模板引擎</a> <a href="/tags/js鼠标位置/" style="font-size: 10px;">js鼠标位置</a> <a href="/tags/list-style/" style="font-size: 10px;">list-style</a> <a href="/tags/meta/" style="font-size: 10px;">meta</a> <a href="/tags/mock/" style="font-size: 10px;">mock</a> <a href="/tags/offset/" style="font-size: 10px;">offset()</a> <a href="/tags/overflow/" style="font-size: 10px;">overflow</a> <a href="/tags/php/" style="font-size: 20px;">php</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/position/" style="font-size: 10px;">position</a> <a href="/tags/position文档流/" style="font-size: 10px;">position文档流</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/requirejs/" style="font-size: 10px;">requirejs</a> <a href="/tags/scopechain/" style="font-size: 10px;">scopechain</a> <a href="/tags/stopImmediatePropagation/" style="font-size: 10px;">stopImmediatePropagation</a> <a href="/tags/stringify/" style="font-size: 10px;">stringify</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/this/" style="font-size: 12.86px;">this</a> <a href="/tags/typeof/" style="font-size: 11.43px;">typeof</a> <a href="/tags/undefined/" style="font-size: 10px;">undefined</a> <a href="/tags/url加载/" style="font-size: 10px;">url加载</a> <a href="/tags/warterfall/" style="font-size: 10px;">warterfall</a> <a href="/tags/zoom/" style="font-size: 10px;">zoom</a> <a href="/tags/代码书写/" style="font-size: 10px;">代码书写</a> <a href="/tags/函数/" style="font-size: 14.29px;">函数</a> <a href="/tags/列表/" style="font-size: 10px;">列表</a> <a href="/tags/前端/" style="font-size: 14.29px;">前端</a> <a href="/tags/前端css/" style="font-size: 12.86px;">前端css</a> <a href="/tags/前端html/" style="font-size: 10px;">前端html</a> <a href="/tags/动画animation/" style="font-size: 10px;">动画animation</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/变量/" style="font-size: 11.43px;">变量</a> <a href="/tags/同源策略/" style="font-size: 10px;">同源策略</a> <a href="/tags/同源跨域/" style="font-size: 15.71px;">同源跨域</a> <a href="/tags/后端/" style="font-size: 10px;">后端</a> <a href="/tags/字符串/" style="font-size: 10px;">字符串</a> <a href="/tags/字面量/" style="font-size: 10px;">字面量</a> <a href="/tags/库与架构/" style="font-size: 10px;">库与架构</a> <a href="/tags/懒加载/" style="font-size: 10px;">懒加载</a> <a href="/tags/数学函数/" style="font-size: 10px;">数学函数</a> <a href="/tags/数据包组装/" style="font-size: 10px;">数据包组装</a> <a href="/tags/数组/" style="font-size: 11.43px;">数组</a> <a href="/tags/方法/" style="font-size: 10px;">方法</a> <a href="/tags/标记语言/" style="font-size: 10px;">标记语言</a> <a href="/tags/模块化/" style="font-size: 10px;">模块化</a> <a href="/tags/模块化编程/" style="font-size: 12.86px;">模块化编程</a> <a href="/tags/正则/" style="font-size: 10px;">正则</a> <a href="/tags/盒模型/" style="font-size: 10px;">盒模型</a> <a href="/tags/立即执行函数/" style="font-size: 10px;">立即执行函数</a> <a href="/tags/简历/" style="font-size: 10px;">简历</a> <a href="/tags/继承/" style="font-size: 10px;">继承</a> <a href="/tags/网站访问/" style="font-size: 10px;">网站访问</a> <a href="/tags/获取路径/" style="font-size: 14.29px;">获取路径</a> <a href="/tags/行内元素/" style="font-size: 10px;">行内元素</a> <a href="/tags/语法/" style="font-size: 10px;">语法</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/跨域请求/" style="font-size: 11.43px;">跨域请求</a> <a href="/tags/跨域请求处理方法/" style="font-size: 10px;">跨域请求处理方法</a> <a href="/tags/选择器/" style="font-size: 10px;">选择器</a> <a href="/tags/闭包/" style="font-size: 10px;">闭包</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">人生是一场不断的转换，我们总是不断地试着所向披靡</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">findmoon</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">findmoon</a></h1>
            </hgroup>
            
            <p class="header-subtitle">一个试图专注于自身的成长者</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/Home">个人简历</a></li>
                
                    <li><a href="/works">作品展示</a></li>
                
                    <li><a href="/archives">所有文章</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=hre0vrCwtbG3v77G9-eo5enr" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/findmoon/mywork" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/u/2637672265?is_all=1" title="weibo">weibo</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-CSS3打造带阴影的旋转3D图像" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/CSS3打造带阴影的旋转3D图像/" class="article-date">
      <time datetime="2016-05-19T04:49:32.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/CSS3打造带阴影的旋转3D图像/">CSS3打造带阴影的旋转3D图像</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.shejidaren.com/css-3d-images-flip-gallery.html" target="_blank" rel="external">CSS3打造带阴影的旋转3D图像</a></p>
<p>CSS3可以实现很多创新好玩的交互效果，正如今天将和大家介绍的3D旋转图像，效果很漂亮，这个旋转图像的特别之处就是支持阴影旋转和兼容响应式网页设计，使得整体场景非常有感觉。</p>
<p>代码的实现也很简洁，下面来看看这个介绍和CSS代码教程，完全不需要JavaScript！纯CSS3打造。</p>
<p><a href="http://www.shejidaren.com/examples/css-3d-image-flip-gallery/" target="_blank" rel="external">为了查看最佳效果</a>，请使用Firefox浏览器浏览。</p>
<p>代码教程</p>
<p>HTML代码准备<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;photo-container&quot;&gt;</span><br><span class="line">&lt;div class=&quot;rotate-box&quot;&gt;</span><br><span class="line">&lt;img src=&quot;winwall.jpg&quot;/&gt;</span><br><span class="line">&lt;div class=&quot;text&quot;&gt;</span><br><span class="line">&lt;h2&gt;这是一个标题&lt;/h2&gt;</span><br><span class="line">&lt;p&gt;这是一段图片相关的简介内容。。&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">``` </span><br><span class="line">CSS代码</span><br><span class="line"></span><br><span class="line">用Perspective属性给图像设置透视视图，使用浮动是为了制作成一个相册列表。设置宽度使用了百分比，为了兼容响应式设计而制作，大家在浏览DEMO的时候可以缩小浏览器看看效果。</span><br></pre></td></tr></table></figure></p>
<p>.photo-container {<br>perspective: 1200px; /<em> 透视视图 </em>/<br>width:45%;<br>float:left;<br>}<br>.rotate-box {<br>position:relative;<br>transform-style: preserve-3d; /<em> 3D 转换 </em>/<br>transition:1s ease; /<em> 转换效果持续 1秒 </em>/<br>margin:10%;<br>}<br>.rotate-box img {width:100%;height:auto;}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">背面文本样式，透明背景，并设置默认为反转180度，其次要将图像置于图像的背面，所以这里我们利用z轴来控制，CSS代码如下：</span><br></pre></td></tr></table></figure></p>
<p>.text {<br>position:absolute;top:0;<br>width:100%;height:100%;<br>transform: rotateY(180deg) translateZ(1px); /<em> 反转180度 并设置z轴让其置于图片背面 </em>/<br>color:#666;<br>text-align:center;<br>opacity:.06;<br>background:rgba(255,255,255,.9);<br>transition: 1s opacity;<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用Hover来触发动画</span><br></pre></td></tr></table></figure></p>
<p>.photo-container:hover .rotate-box{<br>transform: rotateY(180deg);<br>}<br>.photo-container:hover .text{opacity:1}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过伪元素（:after）给图像添加一个透视阴影，使整体更有3D立体感觉。</span><br></pre></td></tr></table></figure>
<p>.rotate-box:after {<br>content:’ ‘;<br>display:block;<br>width:100%;<br>height:7vw; /<em> vw是移动设计备窗体单位</em>/<br>transform:rotateX(90deg);<br>background-image: radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.05) 0%, rgba(0, 0, 0, 0) 100%); /<em> radial-gradient 是径向渐变 </em>/<br>}<br>```<br>代码就这么多，如果有不理解或是有更好的建议欢迎在下方评论处留言。也希望借助这个例子能触发你们的创意灵感，CSS3日后必会成为主流，我们应该多点学习和使用这些新技术。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/CSS3/">CSS3</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS3动画/">CSS3动画</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-CSS动画和javascript动画" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/19/CSS动画和javascript动画/" class="article-date">
      <time datetime="2016-05-19T03:49:32.000Z" itemprop="datePublished">2016-05-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/19/CSS动画和javascript动画/">CSS动画和javascript动画</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>根据Google Developer，Chromium项目里，渲染线程分为main thread和compositor thread。</p>
<p>如果CSS动画只是改变transforms和opacity，这时整个CSS动画得以在compositor thread完成（而JS动画则会在main thread执行，然后触发compositor进行下一步操作）<br>在JS执行一些昂贵的任务时，main thread繁忙，CSS动画由于使用了compositor thread可以保持流畅，可参考]adobe的博客](<a href="http://blogs.adobe.com/webplatform/2014/03/18/css-animations-and-transitions-performance/)。" target="_blank" rel="external">http://blogs.adobe.com/webplatform/2014/03/18/css-animations-and-transitions-performance/)。</a></p>
<blockquote>
<p>在主线程中，维护了一棵Layer树（LayerTreeHost），管理了TiledLayer，在compositor thread，维护了同样一颗LayerTreeHostImpl，管理了LayerImpl，这两棵树的内容是拷贝关系。因此可以彼此不干扰，当Javascript在main thread操作LayerTreeHost的同时，compositor thread可以用LayerTreeHostImpl做渲染。当Javascript繁忙导致主线程卡住时，合成到屏幕的过程也是流畅的。</p>
</blockquote>
<p>为了实现防假死，鼠标键盘消息会被首先分发到compositor thread，然后再到main thread。这样，当main thread繁忙时，compositor thread还是能够响应一部分消息，例如，鼠标滚动时，加入main thread繁忙，compositor thread也会处理滚动消息，滚动已经被提交的页面部分（未被提交的部分将被刷白）。</p>
<p>CSS动画比JS流畅的前提：</p>
<blockquote>
<p>在Chromium基础上的浏览器中<br>JS在执行一些昂贵的任务<br>同时CSS动画不触发layout或paint<br>在CSS动画或JS动画触发了paint或layout时，需要main thread进行Layer树的重计算，这时CSS动画或JS动画都会阻塞后续操作。<br>参考CSS Triggers，只有如下属性的修改才符合“仅触发Composite，不触发layout或paint”：</p>
</blockquote>
<p>backface-visibility<br>opacity<br>perspective<br>perspective-origin<br>transfrom<br>所以只有用上了3D加速或修改opacity时，才有机会用得上CSS动画的这一优势。</p>
<p>因此，在大部分应用场景下，效率角度更值得关注的还是下列问题。</p>
<ul>
<li>是否导致layout<br>repaint的面积<br>是否是有高消耗的属性（css shadow等）<br>是否启用硬件加速<br>那么Chromium以外的其他浏览器呢？CSSTrick里比较了一次效率。</li>
</ul>
<p>CSS3的动画的优点：</p>
<ul>
<li><p>在性能上会稍微好一些，浏览器会对CSS3的动画做一些优化（比如专门新建一个图层用来跑动画）<br>代码相对简单<br>但其缺点也很明显：</p>
</li>
<li><p>在动画控制上不够灵活<br>兼容性不好<br>部分动画功能无法实现（如滚动动画，视差滚动等）<br>JavaScript的动画正好弥补了这两个缺点，控制能力很强，可以单帧的控制、变换，同时写得好完全可以兼容IE6，并且功能强大。但想想CSS动画的transform矩阵是C++级的计算，必然要比javascript级的计算要快。另外对库的依赖也是一个很让人头疼的问题。</p>
</li>
</ul>
<p>所以，对于一些复杂控制的动画，使用javascript会比较靠谱。而在实现一些小的交互动效的时候，就多考虑考虑CSS吧</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/动画animation/">动画animation</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-UNICODE与ASCII的区别t" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/UNICODE与ASCII的区别t/" class="article-date">
      <time datetime="2016-05-18T13:49:32.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/UNICODE与ASCII的区别t/">UNICODE与ASCII的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>UNICODE与ASCII的区别:<a href="http://blog.csdn.net/lx697/article/details/5914417" target="_blank" rel="external">http://blog.csdn.net/lx697/article/details/5914417</a></p>
<h3 id="1-ASCII的特点"><a href="#1-ASCII的特点" class="headerlink" title="1.ASCII的特点"></a>1.ASCII的特点</h3><blockquote>
<p>ASCII 是用来表示英文字符的一种编码规范。每个ASCII字符占用1 个字节，因此，ASCII 编码可以表示的最大字符数是255（00H—FFH）。这对于英文而言，是没有问题的，一般只什么用到前128个(00H–7FH,最高位为0)。而最高位为1 的另128 个字符（80H—FFH）被称为“扩展ASCII”，一般用来存放英文的制表符、部分音标字符等等的一些其它符号。</p>
</blockquote>
<ul>
<li><p>但是对于中文等比较复杂的语言，255个字符显然不够用。于是，各个国家纷纷制定了自己的文字编码规范，其中中文的文字编码规范叫做“GB2312—80”， 它是和ASCII 兼容的一种编码规范， 其实就是利用扩展ASCII没有真正标准化这一点，把一个中文字符用两个扩展ASCII 字符来表示，以区分ASCII 码部分。</p>
</li>
<li><p>但是这个方法有问题，最大的问题就是中文的文字编码和扩展ASCII 码有重叠。而很多软件利用扩展ASCII 码的英文制表符来画表格，这样的软件用到中文系统中，这些表格就会被误认作中文字符，出现乱码。另外，由于各国和各地区都有自己的文字编码规则，它们互相冲突，这给各国和各地区交换信息带来了很大的麻烦。</p>
</li>
</ul>
<h3 id="2-UNICODE的产生"><a href="#2-UNICODE的产生" class="headerlink" title="2.UNICODE的产生"></a>2.UNICODE的产生</h3><ul>
<li>要真正解决这个问题，不能从扩展ASCII 的角度入手，UNICODE作为一个全新的编码系统应运而生，它可以将中文、法文、德文……等等所有的文字统一起来考虑，为每一个文字都分配一个单独的编码。</li>
</ul>
<h3 id="3-什么是UNICODE"><a href="#3-什么是UNICODE" class="headerlink" title="3.什么是UNICODE"></a>3.什么是UNICODE</h3><blockquote>
<p>Unicode与ASCII一样也是一种字符编码方法，它占用两个字节（0000H—FFFFH）,容纳65536 个字符，这完全可以容纳全世界所有语言文字的编码。在Unicode 里，所有的字符都按一个字符来处理， 它们都有一个唯一的Unicode 码。</p>
</blockquote>
<h3 id="4-使用UNICODE的好处"><a href="#4-使用UNICODE的好处" class="headerlink" title="4.使用UNICODE的好处"></a>4.使用UNICODE的好处</h3><blockquote>
<p>使用Unicode 编码可以使您的工程同时支持多种语言， 使您的工程国际化。即在不同语言的系统下不至于产生乱码。</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/html/">html</a><a class="article-category-link" href="/categories/html/编码/">编码</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UNICODE-ASCII/">UNICODE/ASCII</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JSON.stringify 语法实例" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/JSON.stringify 语法实例/" class="article-date">
      <time datetime="2016-05-18T07:59:32.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/JSON.stringify 语法实例/">JSON.stringify 语法实例</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JSON.stringify 语法实例讲解</p>
<blockquote>
<p>可能有些人对系列化这个词过敏，我的理解很简单。就是说把原来是对象的类型转换成字符串类型（或者更确切的说是json类型的）。就这么简单。打个比方说，你有一个类，那么你可以通过这个方法转换成相应的json类型的</p>
</blockquote>
<p><em>*作用：这个函数的作用主要是为了系列化对象的。</em></p>
<p>系列化就是说把原来是对象的类型转换成字符串类型（或者更确切的说是json类型的）。打个比方说，你有一个类，那么你可以通过这个方法转换成相应的json类型的。</p>
<ul>
<li>语法：<br>JSON.stringify(value [, replacer] [, space]) </li>
</ul>
<blockquote>
<p>value：是必须要的字段。就是你输入的对象，比如数组啊，类啊等等。<br>replacer：这个是可选的。它又分为2种方式，一种是方法，第二种是数组。</p>
</blockquote>
<ul>
<li>情况一：我们先说数据，通过我们后面的实验可以知道，它是和第一个有关系的。一般来说，我们系列化后的结果是通过键值对来进行表示的。 </li>
</ul>
<p>比如说：<br>name:”lan”,age:25<br>这种形式。</p>
<p>所以，如果这种形式的话，如果第二个的值在第一个存在，那么的话就以第二个的值做key，第一个值为value进行表示，如果不存在，sorry，忽略。【是不是有点抽象，我也这么觉得，不过你等一下看实验 就OK了。。呼呼。】</p>
<ul>
<li>情况二：如果是方法，那很简单，就是说把系列化后的每一个对象（记住 是每一个）传进方法里面进行处理。 </li>
</ul>
<p>space：很好理解，用什么来做分隔符的。 </p>
<blockquote>
<p>1.如果省略的话，那么显示出来的值 就没有分隔符。直接输出来<br>2.如果是一个数字的话，那么它就定义缩进几个字符，当然 如果大于10 ，则最大值为10.<br>3.如果是一些转义字符，比如“\t”，表示回车，那么它每行一个回车。<br>4.如果仅仅是字符串，OK，就在每行输出值的时候把这些字符串附加上去就OK。当然，最大长度也是10个字符。 </p>
</blockquote>
<p>开始用实例说明； </p>
<h3 id="1-只有一个参数的情况下："><a href="#1-只有一个参数的情况下：" class="headerlink" title="1.只有一个参数的情况下："></a>1.只有一个参数的情况下：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var student = new Object(); </span><br><span class="line">student.name = &quot;Lanny&quot;; </span><br><span class="line">student.age = &quot;25&quot;; </span><br><span class="line">student.location = &quot;China&quot;; </span><br><span class="line">var json = JSON.stringify(student); </span><br><span class="line">alert(student);</span><br></pre></td></tr></table></figure>
<p>结果：<br><img src="/img/json/20120314150604999.png" alt=""></p>
<p>有些人可能会怀疑JSON.stringify的作用，OK。那假如，我们不要这个函数。代码下面的样子： </p>
<p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var student = new Object(); </span><br><span class="line">student.name = &quot;Lanny&quot;; </span><br><span class="line">student.age = &quot;25&quot;; </span><br><span class="line">student.location = &quot;China&quot;; </span><br><span class="line"></span><br><span class="line">// var json = JSON.stringify(student); </span><br><span class="line">alert(student);</span><br></pre></td></tr></table></figure>
<p>　恭喜你 得到的结果是：<br><img src="/img/json/20120314150604479.png" alt=""></p>
<p>###.第二个参数存在，并且第二个参数还是function的时候 </p>
<p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var students = new Array() ; </span><br><span class="line">students[0] = &quot;Lanny&quot;; </span><br><span class="line">students[1] = &quot;dong&quot;; </span><br><span class="line">students[2] = &quot;I love you&quot;; </span><br><span class="line">var json = JSON.stringify(students,switchUpper); </span><br><span class="line">function switchUpper(key, value) &#123; </span><br><span class="line">return value.toString().toUpperCase(); </span><br><span class="line">&#125; </span><br><span class="line">alert(json); </span><br><span class="line"></span><br><span class="line">　　　　　　　　//var json = JSON.stringify(students, function (key,value) &#123; </span><br><span class="line"></span><br><span class="line">　　　　　　　　//return value.toString().toUpperCase(); </span><br><span class="line"></span><br><span class="line">　　　　　　　//&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>上面的方法也可以换成下面的，2个都是一样，只是写法有那么一点点的不一样而已。<br>　得到结果如下：<br><img src="/img/json/20120314150604337.png" alt=""> </li>
</ul>
<h3 id="第二个参数存在，并且第二个参数不是function，而是数组的时候。"><a href="#第二个参数存在，并且第二个参数不是function，而是数组的时候。" class="headerlink" title=".第二个参数存在，并且第二个参数不是function，而是数组的时候。"></a>.第二个参数存在，并且第二个参数不是function，而是数组的时候。</h3><p>####.1 【误区】如果第一个参数是数组，第二个参数也是数组的话，只显示第一个参数的值。<br>比如： </p>
<p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var students = new Array() ; </span><br><span class="line">students[0] = &quot;Lanny&quot;; </span><br><span class="line">students[1] = &quot;dong&quot;; </span><br><span class="line">students[2] = &quot;I love you&quot;; </span><br><span class="line">var stu = new Array(); </span><br><span class="line">stu[0] = &quot;1&quot;; </span><br><span class="line">stu[1] = &quot;2&quot;; </span><br><span class="line">var json = JSON.stringify(students,stu); </span><br><span class="line">alert(json);</span><br></pre></td></tr></table></figure>
<p>　sorry 得到的结果就是：<br><img src="/img/json/20120314150605876.png" alt=""></p>
<p>第二个被忽略了，只是第一个被系列化了。 </p>
<h4 id="2-如果第一个是对象（这里说的对象就像在C-里面可以进行new的），第二个是数组的。"><a href="#2-如果第一个是对象（这里说的对象就像在C-里面可以进行new的），第二个是数组的。" class="headerlink" title="2 如果第一个是对象（这里说的对象就像在C#里面可以进行new的），第二个是数组的。"></a>2 如果第一个是对象（这里说的对象就像在C#里面可以进行new的），第二个是数组的。</h4><p>那么如果第二个的value在第一个存在，那么的话就以第二个的值做key，第一个值为value进行表示 </p>
<p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var student = new Object(); </span><br><span class="line">student.qq = &quot;5485891512&quot;; </span><br><span class="line">student.name = &quot;Lanny&quot;; </span><br><span class="line">student.age = 25; </span><br><span class="line"></span><br><span class="line">var stu = new Array(); </span><br><span class="line">stu[0] = &quot;qq&quot;; </span><br><span class="line">stu[1] = &quot;age&quot;; </span><br><span class="line">stu[2] = &quot;Hi&quot;;//这个student对象里不存在。 </span><br><span class="line"></span><br><span class="line">var json = JSON.stringify(student,stu); </span><br><span class="line">alert(json);</span><br></pre></td></tr></table></figure>
<p>　得到的结果如下：<br><img src="/img/json/20120314150606776.png" alt=""></p>
<p>因为stu[2] = “Hi”;这个Hi 在第一个找不到，所以就不进行显示了。 </p>
<h3 id="第三个参数"><a href="#第三个参数" class="headerlink" title=".第三个参数"></a>.第三个参数</h3><h4 id="1-如果省略的话，那么显示出来的值-就没有分隔符。直接输出来"><a href="#1-如果省略的话，那么显示出来的值-就没有分隔符。直接输出来" class="headerlink" title=".1.如果省略的话，那么显示出来的值 就没有分隔符。直接输出来"></a>.1.如果省略的话，那么显示出来的值 就没有分隔符。直接输出来</h4><p>比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var student = new Object(); </span><br><span class="line">student.qq = &quot;5485891512&quot;; </span><br><span class="line">student.name = &quot;Lanny&quot;; </span><br><span class="line">student.age = 25; </span><br><span class="line"></span><br><span class="line">var stu = new Array(); </span><br><span class="line">stu[0] = &quot;qq&quot;; </span><br><span class="line">stu[1] = &quot;age&quot;; </span><br><span class="line">stu[2] = &quot;Hi&quot;; </span><br><span class="line"></span><br><span class="line">var json = JSON.stringify(student,stu); </span><br><span class="line">alert(json);</span><br></pre></td></tr></table></figure></p>
<p>输出的就是：<br><img src="/img/json/20120314150606776.png" alt=""></p>
<h4 id="2-如果是一个数字的话，那么它就定义缩进几个字符，当然-如果大于10-，则最大值为10"><a href="#2-如果是一个数字的话，那么它就定义缩进几个字符，当然-如果大于10-，则最大值为10" class="headerlink" title="2.如果是一个数字的话，那么它就定义缩进几个字符，当然 如果大于10 ，则最大值为10."></a>2.如果是一个数字的话，那么它就定义缩进几个字符，当然 如果大于10 ，则最大值为10.</h4><p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var student = new Object(); </span><br><span class="line">student.qq = &quot;5485891512&quot;; </span><br><span class="line">student.name = &quot;Lanny&quot;; </span><br><span class="line">student.age = 25; </span><br><span class="line"></span><br><span class="line">var stu = new Array(); </span><br><span class="line">stu[0] = &quot;qq&quot;; </span><br><span class="line">stu[1] = &quot;age&quot;; </span><br><span class="line">stu[2] = &quot;Hi&quot;; </span><br><span class="line"></span><br><span class="line">var json = JSON.stringify(student,stu,100);//注意这里的100 </span><br><span class="line">alert(json);</span><br></pre></td></tr></table></figure>
<p>结果<br><img src="/img/json/20120314150606953.png" alt=""></p>
<p>空开来了10个字符。 </p>
<h4 id="3-如果是一些转义字符，比如“-t”，表示回车，那么它每行一个回车。"><a href="#3-如果是一些转义字符，比如“-t”，表示回车，那么它每行一个回车。" class="headerlink" title="3.如果是一些转义字符，比如“\t”，表示回车，那么它每行一个回车。"></a>3.如果是一些转义字符，比如“\t”，表示回车，那么它每行一个回车。</h4><p>也是一样。 </p>
<h4 id="4-如果仅仅是字符串，OK，就在每行输出值的时候把这些字符串附加上去就OK。当然，最大长度也是10个字符。"><a href="#4-如果仅仅是字符串，OK，就在每行输出值的时候把这些字符串附加上去就OK。当然，最大长度也是10个字符。" class="headerlink" title="4.如果仅仅是字符串，OK，就在每行输出值的时候把这些字符串附加上去就OK。当然，最大长度也是10个字符。"></a>4.如果仅仅是字符串，OK，就在每行输出值的时候把这些字符串附加上去就OK。当然，最大长度也是10个字符。</h4><p>如果是var json = JSON.stringify(student,stu,“HaiKou”);//</p>
<p><img src="/img/json/20120314150606568.png" alt=""></p>
<p><a href="http://www.jb51.net/article/29893.htm" target="_blank" rel="external">文章出处</a></p>
<p>另一处 –&gt; <a href="http://www.cnblogs.com/damonlan/" target="_blank" rel="external">http://www.cnblogs.com/damonlan/</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stringify/">stringify</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-S区分中英文字符的两种方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/S区分中英文字符的两种方法/" class="article-date">
      <time datetime="2016-05-18T07:49:32.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/S区分中英文字符的两种方法/">JS区分中英文字符 正则和charCodeAt</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://blog.csdn.net/lingxyd_0/article/details/6801844" target="_blank" rel="external">转载-JS区分中英文字符的两种方法</a>: 正则和charCodeAt()方法。</p>
<p>正则无疑是最强大的判断各种条件的方法, 最近也在研习它, 虽然枯燥, 但仍有乐趣. 用它来判断一个双字节的中文字符也是轻而易举地. 而判断中文字符,  简单且执行效率高.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[javascript] view plain copy</span><br><span class="line">regExpForm.onblur=function()&#123;  </span><br><span class="line">        entryVal=this.value;  </span><br><span class="line">        entryLen=entryVal.length;  </span><br><span class="line">        cnChar=entryVal.match(/[^\x00-\x80]/g);//利用match方法检索出中文字符并返回一个存放中文的数组  </span><br><span class="line">        entryLen =cnChar.length;//算出实际的字符长度  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>第二种方法是通过charCodeAt()方法判断Unicode码值, 若大于255即为中文字符, 它的执行效率没有正则高, 也没有正则简单.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[javascript] view plain copy</span><br><span class="line">entryVal=this.value;  </span><br><span class="line">        entryLen=entryVal.length;  </span><br><span class="line">        for(var i=0;i&lt;entryVal.length;i  )&#123;  </span><br><span class="line">            if(entryVal.charCodeAt(i)&gt;255)&#123;//遍历判断字符串中每个字符的Unicode码,大于255则为中文  </span><br><span class="line">                cnArr.push(entryVal[i]);//讲符合条件的值插入到中文字符数组中  </span><br><span class="line">                //注意一个小bug,push是向数组的末尾添加一个或多个元素并返回新的长度,所以未刷新的情况下反复blur会累加字符值  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        entryLen =cnArr.length;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/方法-实例/">方法/实例</a><a class="article-category-link" href="/categories/方法-实例/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/方法/">方法</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-将json字符串转化为数组" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/将json字符串转化为数组/" class="article-date">
      <time datetime="2016-05-18T07:49:32.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/将json字符串转化为数组/">将json字符串转化为数组</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JS解析json数据（如何将json字符串转化为数组）</p>
<p>装载自<a href="http://hi.baidu.com/jiangzhong8715/item/b60dad33937e35109cc65e01" target="_blank" rel="external">http://hi.baidu.com/jiangzhong8715/item/b60dad33937e35109cc65e01</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;HTML&gt;</span><br><span class="line">&lt;HEAD&gt;</span><br><span class="line">&lt;TITLE&gt; New Document &lt;/TITLE&gt;</span><br><span class="line"></span><br><span class="line">&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var t=&quot;&#123;&apos;firstName&apos;: &apos;cyra&apos;, &apos;lastName&apos;: &apos;richardson&apos;, &apos;address&apos;: &#123; &apos;streetAddress&apos;: &apos;1 Microsoft way&apos;, &apos;city&apos;: &apos;Redmond&apos;, &apos;state&apos;: &apos;WA&apos;, &apos;postalCode&apos;: 98052 &#125;,&apos;phoneNumbers&apos;: [ &apos;425-777-7777&apos;,&apos;206-777-7777&apos; ] &#125;&quot;;</span><br><span class="line">var jsonobj=eval(&apos;(&apos;+t+&apos;)&apos;);</span><br><span class="line">alert(jsonobj.firstName); </span><br><span class="line">alert(jsonobj.lastName);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var t2=&quot;[&#123;name:&apos;zhangsan&apos;,age:&apos;24&apos;&#125;,&#123;name:&apos;lisi&apos;,age:&apos;30&apos;&#125;,&#123;name:&apos;wangwu&apos;,age:&apos;16&apos;&#125;,&#123;name:&apos;tianqi&apos;,age:&apos;7&apos;&#125;] &quot;;</span><br><span class="line">var myobj=eval(t2);</span><br><span class="line">for(var i=0;i&lt;myobj.length;i++)&#123;</span><br><span class="line">alert(myobj[i].name);</span><br><span class="line">alert(myobj[i].age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var t3=&quot;[[&apos;&lt;a href=# onclick=openLink(14113295100,社旗县国税局桥头税务所,14113295100,d6d223892dc94f5bb501d4408a68333d,swjg_dm);&gt;14113295100&lt;/a&gt;&apos;,&apos;社旗县国税局桥头税务所&apos;,&apos;社旗县城郊乡长江路西段&apos;]]&quot;;</span><br><span class="line">//通过eval() 函数可以将JSON字符串转化为对象</span><br><span class="line">var obj = eval(t3);</span><br><span class="line">for(var i=0;i&lt;obj.length;i++)&#123;</span><br><span class="line">for(var j=0;j&lt;obj[i].length;j++)&#123;</span><br><span class="line">alert(obj[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">//stringifier 函数的作用跟 parse 相反， 用来将一个js对象转换为 JSON 文本。</span><br><span class="line">var jsonText = JSON.stringify(obj); </span><br><span class="line">alert(jsonText);</span><br><span class="line"></span><br><span class="line">//如果基于安全的考虑的话，最好是使用一个 JSON 解析器。 一个 JSON 解析器将只接受 JSON 文本。所以是更安全的。</span><br><span class="line">var myObject = JSON.parse(myJSONtext, filter); </span><br><span class="line">//可选的 filter 参数将遍历每一个value key 值对， 并进行相关的处理。如：</span><br><span class="line">//如</span><br><span class="line">myData = JSON.parse(text, function (key, value) &#123;</span><br><span class="line"></span><br><span class="line">return key.indexOf(&apos;date&apos;) &gt;= 0 ? new Date(value) : value; &#125;);</span><br><span class="line"></span><br><span class="line">//stringifier 函数的作用跟 parse 相反， 用来将一个js对象转换为 JSON 文本。</span><br><span class="line">var myJSONText = JSON.stringifier(myObject); </span><br><span class="line">*/</span><br><span class="line">&lt;/SCRIPT&gt;</span><br><span class="line">&lt;/HEAD&gt;</span><br><span class="line"></span><br><span class="line">&lt;BODY&gt;</span><br><span class="line"></span><br><span class="line">&lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/json/">json</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-setInterval函数" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/18/setInterval函数/" class="article-date">
      <time datetime="2016-05-18T03:59:53.717Z" itemprop="datePublished">2016-05-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>setInterval函数</p>
<p>js最小时间粒度,做小时间间隔</p>
<p>setInterval：作用：间隔指定的毫秒数不停地执行指定的代码。</p>
<p>如果指定的代码执行时间超过间隔数，则会将执行的代码加入任务序列里面，必须等代码执行完后立即执行下一次。</p>
<p>延时为0是把代码放到当前环境的最后立刻去执行</p>
<p>例如在一个输入框中：有一个input id=ipt，type=text</p>
<p>js<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var ipt=document.getElementById(&apos;ipt&apos;);</span><br><span class="line">ipt.addEventListener(&apos;keydonw&apos;,function()&#123;</span><br><span class="line">	var thi=this</span><br><span class="line">	steTimeOut(function()&#123;</span><br><span class="line">		thi.value = thi.value.UpperCase();</span><br><span class="line">	&#125;,0)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>当文字输入在文本框内后立马执行变成大写字母，而如果不加stetimeout 0，怎字母咋文本框中会等到下一次down按键才会执行转换成大写字母</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JavaScript初学者应注意的七个细节" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/17/JavaScript初学者应注意的七个细节/" class="article-date">
      <time datetime="2016-05-17T12:49:32.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/JavaScript初学者应注意的七个细节/">JavaScript初学者应注意的七个细节</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JavaScript初学者应注意的七个细节<br>、<a href="http://www.cnblogs.com/lhb25/archive/2011/01/10/1932284.html" target="_blank" rel="external">转自梦想天空的博客</a></p>
<p>　　每种语言都有它特别的地方，对于JavaScript来说，使用var就可以声明任意类型的变量，这门脚本语言看起来很简单，然而想要写出优雅的代码却是需要不断积累经验的。本文利列举了JavaScript初学者应该注意的七个细节，与大家分享。</p>
<p>（1）简化代码</p>
<p>JavaScript定义对象和数组非常简单，我们想要创建一个对象，一般是这样写的：  </p>
<p>&gt;<br>var car = new Object();<br>car.colour = ‘red’;<br>car.wheels = 4;<br>car.hubcaps = ‘spinning’;<br>car.age = 4;<br>下面的写法可以达到同样的效果：</p>
<p>&gt;<br>var car = {<br>    colour:’red’,<br>    wheels:4,<br>　　hubcaps:’spinning’,<br>　　age:4<br>}</p>
<p>后面的写法要短得多，而且你不需要重复写对象名称。</p>
<p>另外对于数组同样有简洁的写法，过去我们声明数组是这样写的：</p>
<p>&gt;<br>var moviesThatNeedBetterWriters = new Array(<br>  ‘Transformers’,’Transformers2’,’Avatar’,’Indiana Jones 4’<br>);</p>
<p>更简洁的写法是： </p>
<p>&gt;<br>var moviesThatNeedBetterWriters = [<br>  ‘Transformers’,’Transformers2’,’Avatar’,’Indiana Jones 4’<br>];</p>
<p>对于数组，还有关联数组这样一个特别的东西。 你会发现很多代码是这样定义对象的：</p>
<p>&gt;<br>var car = new Array();<br>car[‘colour’] = ‘red’;<br>car[‘wheels’] = 4;<br>car[‘hubcaps’] = ‘spinning’;<br>car[‘age’] = 4;</p>
<p>这太疯狂了，不要觉得困惑，“关联数组”只是对象的一个别名而已。</p>
<p>另外一个简化代码的方法是使用三元运算符，举个例子：</p>
<p>&gt;<br>var direction;<br>if(x &lt; 200){<br>  direction = 1;<br>} else {<br>  direction = -1;<br>}</p>
<p>我们可以使用如下的代码替换这种写法：</p>
<p>&gt;<br>var direction = x &lt; 200 ? 1 : -1;</p>
<p>（2）使用JSON作为数据格式   </p>
<p>伟大的Douglas Crockford发明了JSON数据格式来存储数据，你可以使用原生的javascript方法来存储复杂的数据而不需要进行任何额外的转换，例如：</p>
<p>&gt;<br>var band = {<br>  “name”:”The Red Hot Chili Peppers”,<br>  “members”:[<br>    {<br>      “name”:”Anthony Kiedis”,<br>      “role”:”lead vocals”<br>    },<br>    {<br>      “name”:”Michael ‘Flea’ Balzary”,<br>      “role”:”bass guitar, trumpet, backing vocals”<br>    },<br>    {<br>      “name”:”Chad Smith”,<br>      “role”:”drums,percussion”<br>    },<br>    {<br>      “name”:”John Frusciante”,<br>      “role”:”Lead Guitar”<br>    }<br>  ],<br>  “year”:”2009”<br>}<br>你可以使用在JavaScript中直接使用JSON，甚至作为API返回的一种格式，在许多的API中被应用，例如：</p>
<p>&gt;</p>
<p><div id="delicious"></div><script><br>function delicious(o){<br>  var out = ‘<ul>‘;<br>  for(var i=0;i<o.length;i++){
    out += '<li><a href="' + o[i].u + '">' +
           o[i].d + '</a></li>';
  }
  out += '</ul>';
  document.getElementById('delicious').innerHTML = out;
}
</script></p>
<script src="http://feeds.delicious.com/v2/json/codepo8/javascript?count=15&callback=delicious">
</script>

<p>这里调用delicious 的Web服务获取最新书签，以JSON格式返回，然后将它们显示成无序列表的形式。</p>
<p>从本质上讲，JSON是用于描述复杂的数据最轻量级的方式，而且直接它运行在浏览器中。 你甚至可以在PHP中调用 json_decode（）函数来使用它。</p>
<p>（3）尽量使用JavaScript原生函数 </p>
<p>要找一组数字中的最大数，我们可能会写一个循环，例如：</p>
<p>&gt;<br>var numbers = [3,342,23,22,124];<br>var max = 0;<br>for(var i=0;i<numbers.length;i++){ if(numbers[i]=""> max){<br>    max = numbers[i];<br>  }<br>}<br>alert(max);<br>其实，不用循环可以实现同样的功能：</numbers.length;i++){></p>
<p>&gt;<br>var numbers = [3,342,23,22,124];<br>numbers.sort(function(a,b){return b - a});<br>alert(numbers[0]);</p>
<p>而最简洁的写法是：</p>
<p>&gt;<br>Math.max(12,123,3,2,433,4); // returns 433<br>你甚至可以使用Math.max来检测浏览器支持哪个属性：</p>
<p>&gt;<br>var scrollTop= Math.max(<br> doc.documentElement.scrollTop,<br> doc.body.scrollTop<br>);</p>
<p>如果你想给一个元素增加class样式，可能原始的写法是这样的：</p>
<p>&gt;<br>function addclass(elm,newclass){<br>  var c = elm.className;<br>  elm.className = (c === ‘’) ? newclass : c+’ ‘+newclass;</p>
<p>而更优雅的写法是：</p>
<p>&gt;<br>function addclass(elm,newclass){<br>  var classes = elm.className.split(‘ ‘);<br>  classes.push(newclass);<br>  elm.className = classes.join(‘ ‘);<br>}</p>
<p>（4）事件委托</p>
<p>事件是JavaScript非常重要的一部分。我们想给一个列表中的链接绑定点击事件，一般的做法是写一个循环，给每个链接对象绑定事件，HTML代码如下：</p>
<p>&gt;</p>
<p></p><h2>Great Web resources</h2><p></p>
<ul id="resources"><br>  <li><a href="http://opera.com/wsc" target="_blank" rel="external">Opera Web Standards Curriculum</a></li><br>  <li><a href="http://sitepoint.com" target="_blank" rel="external">Sitepoint</a></li><br>  <li><a href="http://alistapart.com" target="_blank" rel="external">A List Apart</a></li><br>  <li><a href="http://yuiblog.com" target="_blank" rel="external">YUI Blog</a></li><br>  <li><a href="http://blameitonthevoices.com" target="_blank" rel="external">Blame it on the voices</a></li><br>  <li><a href="http://oddlyspecific.com" target="_blank" rel="external">Oddly specific</a></li><br></ul>

<p>脚本如下：</p>
<p>&gt;<br>// Classic event handling example<br>(function(){<br>  var resources = document.getElementById(‘resources’);<br>  var links = resources.getElementsByTagName(‘a’);<br>  var all = links.length;<br>  for(var i=0;i&lt;all;i++){<br>    // Attach a listener to each link<br>    links[i].addEventListener(‘click’,handler,false);<br>  };<br>  function handler(e){<br>    var x = e.target; // Get the link that was clicked<br>    alert(x);<br>    e.preventDefault();<br>  };<br>})();</p>
<p>更合理的写法是只给列表的父对象绑定事件，代码如下：<br>&gt;<br>(function(){<br>  var resources = document.getElementById(‘resources’);<br>  resources.addEventListener(‘click’,handler,false);<br>  function handler(e){<br>    var x = e.target; // get the link tha<br>    if(x.nodeName.toLowerCase() === ‘a’){<br>      alert(‘Event delegation:’ + x);<br>      e.preventDefault();<br>    }<br>  };<br>})();</p>
<p>（5）匿名函数</p>
<p>关于JavaScript的最头疼的事情之一是，它的变量没有特定的作用范围。 一般情况下，任何变量，函数，数组或对象都是全局性，这意味着在同一页上的其他脚本可以访问并覆盖它们。解决方法是把变量封装在一个匿名函数中。 例如，下面的定义将产生三个全局变量和和两个全局函数：</p>
<p>&gt;<br>var name = ‘Chris’;<br>var age = ‘34’;<br>var status = ‘single’;<br>function createMember(){<br>  // […]<br>}<br>function getMemberDetails(){<br>  // […]<br>}</p>
<p>封装后如下：</p>
<p>&gt;<br>var myApplication = function(){<br>  var name = ‘Chris’;<br>  var age = ‘34’;<br>  var status = ‘single’;<br>  return{<br>    createMember:function(){<br>      // […]<br>    },<br>    getMemberDetails:function(){<br>      // […]<br>    }<br>  }<br>}();<br>// myApplication.createMember() and<br>// myApplication.getMemberDetails() now works.</p>
<p>这被称为单体模式，是JavaScript设计模式的一种，这种模式在YUI中用得非常多，改进的写法是：  </p>
<p>&gt;<br>var myApplication = function(){<br>  var name = ‘Chris’;<br>  var age = ‘34’;<br>  var status = ‘single’;<br>  function createMember(){<br>    // […]<br>  }<br>  function getMemberDetails(){<br>    // […]<br>  }<br>  return{<br>    create:createMember,<br>    get:getMemberDetails<br>  }<br>}();<br>//myApplication.get() and myApplication.create() now work.</p>
<p>（6）代码可配置</p>
<p>你写的代码如果想让别人更容易进行使用或者修改，则需要可配置，解决方案是在你写的脚本中增加一个配置对象。要点如下： </p>
<p>1、在你的脚本中新增一个叫configuration的对象。</p>
<p>2、在配置对象中存放所有其它人可能想要去改变的东西，例如CSS的ID、class名称、语言等等。</p>
<p>3、返回这个对象，作为公共属性以便其它人可以进行重写。 </p>
<p>（7）代码兼容性</p>
<p>　　兼容性是初学者容易忽略的部分，通常学习Javascript的时候都是在某个固定的浏览器中进行测试，而这个浏览器很有可能就是IE，这是非常致命的，因为目前几大主流浏览器中偏偏IE对标准的支持是最差的。最终用户看到的结果也许就是，你写的代码在某个浏览器无法正确运行。你应该把你的代码在主流的浏览器中都测试一下，这也许很费时间，但是应该这样做。  </p>
<p>（编译来源：梦想天空  原文来自：Seven JavaScript Things I Wish I Knew Much Earlier In My Career）</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码书写/">代码书写</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-理解 JavaScript 作用域和作用域链" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/17/理解 JavaScript 作用域和作用域链/" class="article-date">
      <time datetime="2016-05-17T12:45:32.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/理解 JavaScript 作用域和作用域链/">理解 JavaScript 作用域和作用域链</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JavaScript 开发进阶：理解 JavaScript 作用域和作用域链<br><img src="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" alt="原网址"><br>　　作用域是JavaScript最重要的概念之一，想要学好JavaScript就需要理解JavaScript作用域和作用域链的工作原理。今天这篇文章对JavaScript作用域和作用域链作简单的介绍，希望能帮助大家更好的学习JavaScript。</p>
<p>JavaScript作用域</p>
<p>　　任何程序设计语言都有作用域的概念，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。在JavaScript中，变量的作用域有全局作用域和局部作用域两种。</p>
<p>　　1.  全局作用域（Global Scope）<br>　　在代码中任何地方都能访问到的对象拥有全局作用域，一般来说以下几种情形拥有全局作用域：</p>
<p>　　（1）最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如：</p>
<p>var authorName=”山边小溪”;<br>function doSomething(){<br>    var blogName=”梦想天空”;<br>    function innerSay(){<br>        alert(blogName);<br>    }<br>    innerSay();<br>}<br>alert(authorName); //山边小溪<br>alert(blogName); //脚本错误<br>doSomething(); //梦想天空<br>innerSay() //脚本错误<br>　　（2）所有末定义直接赋值的变量自动声明为拥有全局作用域，例如：</p>
<p>function doSomething(){<br>    var authorName=”山边小溪”;<br>    blogName=”梦想天空”;<br>    alert(authorName);<br>}<br>doSomething(); //山边小溪<br>alert(blogName); //梦想天空<br>alert(authorName); //脚本错误<br>　　变量blogName拥有全局作用域，而authorName在函数外部无法访问到。</p>
<p>　　（3）所有window对象的属性拥有全局作用域</p>
<p>　　一般情况下，window对象的内置属性都拥有全局作用域，例如window.name、window.location、window.top等等。</p>
<p>　　1.  局部作用域（Local Scope）　　<br>　　和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部，所有在一些地方也会看到有人把这种作用域称为函数作用域，例如下列代码中的blogName和函数innerSay都只拥有局部作用域。</p>
<p>function doSomething(){<br>    var blogName=”梦想天空”;<br>    function innerSay(){<br>        alert(blogName);<br>    }<br>    innerSay();<br>}<br>alert(blogName); //脚本错误<br>innerSay(); //脚本错误<br>作用域链（Scope Chain）</p>
<p>　　在JavaScript中，函数也是对象，实际上，JavaScript里一切都是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。其中一个内部属性是[[Scope]]，由ECMA-262标准第三版定义，该内部属性包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。</p>
<p>　　当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象填充。例如定义下面这样一个函数：</p>
<p>function add(num1,num2) {<br>    var sum = num1 + num2;<br>    return sum;<br>}<br>　　在函数add创建时，它的作用域链中会填入一个全局对象，该全局对象包含了所有全局变量，如下图所示（注意：图片只例举了全部变量中的一部分）：</p>
<p><img src="/img/作用域链/scopechain.jpg" alt=""></p>
<p>　函数add的作用域将会在执行时用到。例如执行如下代码：</p>
<p>1<br>var total = add(5,10);<br>　　执行此函数时会创建一个称为“运行期上下文(execution context)”的内部对象，运行期上下文定义了函数执行时的环境。每个运行期上下文都有自己的作用域链，用于标识符解析，当运行期上下文被创建时，而它的作用域链初始化为当前运行函数的[[Scope]]所包含的对象。</p>
<p>　　这些值按照它们出现在函数中的顺序被复制到运行期上下文的作用域链中。它们共同组成了一个新的对象，叫“活动对象(activation object)”，该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端，当运行期上下文被销毁，活动对象也随之销毁。新的作用域链如下图所示：</p>
<p><img src="/img/作用域链/scopechain1.jpg" alt=""></p>
<p>在函数执行过程中，没遇到一个变量，都会经历一次标识符解析过程以决定从哪里获取和存储数据。该过程从作用域链头部，也就是从活动对象开始搜索，查找同名的标识符，如果找到了就使用这个标识符对应的变量，如果没找到继续搜索作用域链中的下一个对象，如果搜索完所有对象都未找到，则认为该标识符未定义。函数执行过程中，每个标识符都要经历这样的搜索过程。</p>
<p>作用域链和代码优化</p>
<p>　　从作用域链的结构可以看出，在运行期上下文的作用域链中，标识符所在的位置越深，读写速度就会越慢。如上图所示，因为全局变量总是存在于运行期上下文作用域链的最末端，因此在标识符解析的时候，查找全局变量是最慢的。所以，在编写代码的时候应尽量少使用全局变量，尽可能使用局部变量。一个好的经验法则是：如果一个跨作用域的对象被引用了一次以上，则先把它存储到局部变量里再使用。例如下面的代码：</p>
<p>function changeColor(){<br>    document.getElementById(“btnChange”).onclick=function(){<br>        document.getElementById(“targetCanvas”).style.backgroundColor=”red”;<br>    };<br>}<br>　　这个函数引用了两次全局变量document，查找该变量必须遍历整个作用域链，直到最后在全局对象中才能找到。这段代码可以重写如下：</p>
<p>function changeColor(){<br>    var doc=document;<br>    doc.getElementById(“btnChange”).onclick=function(){<br>        doc.getElementById(“targetCanvas”).style.backgroundColor=”red”;<br>    };<br>}<br>　　这段代码比较简单，重写后不会显示出巨大的性能提升，但是如果程序中有大量的全局变量被从反复访问，那么重写后的代码性能会有显著改善。</p>
<p>改变作用域链</p>
<p>　　函数每次执行时对应的运行期上下文都是独一无二的，所以多次调用同一个函数就会导致创建多个运行期上下文，当函数执行完毕，执行上下文会被销毁。每一个运行期上下文都和一个作用域链关联。一般情况下，在运行期上下文运行的过程中，其作用域链只会被 with 语句和 catch 语句影响。</p>
<p>　　with语句是对象的快捷应用方式，用来避免书写重复代码。例如：</p>
<p>function initUI(){<br>    with(document){<br>        var bd=body,<br>            links=getElementsByTagName(“a”),<br>            i=0,<br>            len=links.length;<br>        while(i &lt; len){<br>            update(links[i++]);<br>        }<br>        getElementById(“btnInit”).onclick=function(){<br>            doSomething();<br>        };<br>    }<br>}<br>　　这里使用width语句来避免多次书写document，看上去更高效，实际上产生了性能问题。</p>
<p>　　当代码运行到with语句时，运行期上下文的作用域链临时被改变了。一个新的可变对象被创建，它包含了参数指定的对象的所有属性。这个对象将被推入作用域链的头部，这意味着函数的所有局部变量现在处于第二个作用域链对象中，因此访问代价更高了。如下图所示：</p>
<p><img src="/img/作用域链/scopechain2.jpg" alt=""></p>
<p>因此在程序中应避免使用with语句，在这个例子中，只要简单的把document存储在一个局部变量中就可以提升性能。</p>
<p>　　另外一个会改变作用域链的是try-catch语句中的catch语句。当try代码块中发生错误时，执行过程会跳转到catch语句，然后把异常对象推入一个可变对象并置于作用域的头部。在catch代码块内部，函数的所有局部变量将会被放在第二个作用域链对象中。示例代码：</p>
<p>try{<br>    doSomething();<br>}catch(ex){<br>    alert(ex.message); //作用域链在此处改变<br>}<br>　　请注意，一旦catch语句执行完毕，作用域链机会返回到之前的状态。try-catch语句在代码调试和异常处理中非常有用，因此不建议完全避免。你可以通过优化代码来减少catch语句对性能的影响。一个很好的模式是将错误委托给一个函数处理，例如：</p>
<p>try{<br>    doSomething();<br>}catch(ex){<br>    handleError(ex); //委托给处理器方法<br>}<br>　　优化后的代码，handleError方法是catch子句中唯一执行的代码。该函数接收异常对象作为参数，这样你可以更加灵活和统一的处理错误。由于只执行一条语句，且没有局部变量的访问，作用域链的临时改变就不会影响代码性能了。</p>
<hr>
<p>参考资料</p>
<ol>
<li><p>High.Performance.JavaScript, Nicholas.C.Zakas</p>
</li>
<li><p>Explaining JavaScript Scope And Closures, Robert Nyman</p>
</li>
<li><p>ECMAScript Language Specification, bclary.com</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scopechain/">scopechain</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-instanceof运算符深入剖析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/17/instanceof运算符深入剖析/" class="article-date">
      <time datetime="2016-05-17T12:42:32.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/instanceof运算符深入剖析/">instanceof 运算符深入剖析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.ibm.com/developerworks/cn/web/1306_jiangjj_jsinstanceof/" target="_blank" rel="external">JavaScript instanceof 运算符深入剖析-转载</a></p>
<p>随着 web 的发展，越来越多的产品功能都放在前端进行实现，增强用户体验。而前端开发的主要语言则是 JavaScript。学好 JavaScript 对开发前端应用已经越来越重要。在开发复杂产品中，需要使用面向对象的机制时，往往会用到复杂的 JavaScript 继承，而 instanceof 运算符是 JavaScript 语言中原生的用来判断实例继承关系的操作符。深入理解 instanceof 运算符的用法，对写好复杂的 JavaScript 程序，会有很大帮助。<br>2 评论<br>姜 俊杰, 软件工程师, IBM<br>2013 年 6 月 06 日<br>expand<br>内容</p>
<p>在 IBM Bluemix 云平台上开发并部署您的下一个应用。<br>开始您的试用<br>instanceof 运算符简介<br>在 JavaScript 中，判断一个变量的类型尝尝会用 typeof 运算符，在使用 typeof 运算符时采用引用类型存储值会出现一个问题，无论引用的是什么类型的对象，它都返回 “object”。ECMAScript 引入了另一个 Java 运算符 instanceof 来解决这个问题。instanceof 运算符与 typeof 运算符相似，用于识别正在处理的对象的类型。与 typeof 方法不同的是，instanceof 方法要求开发者明确地确认对象为某特定类型。例如：<br>清单 1. instanceof 示例<br> var oStringObject = new String(“hello world”);<br> console.log(oStringObject instanceof String);      // 输出 “true”<br>这段代码问的是“变量 oStringObject 是否为 String 对象的实例？”oStringObject 的确是 String 对象的实例，因此结果是”true”。尽管不像 typeof 方法那样灵活，但是在 typeof 方法返回 “object” 的情况下，instanceof 方法还是很有用的。<br>instanceof 运算符的常规用法<br>通常来讲，使用 instanceof 就是判断一个实例是否属于某种类型。例如：<br>清单 2. instanceof 常规用法<br> // 判断 foo 是否是 Foo 类的实例<br> function Foo(){}<br> var foo = new Foo();<br> console.log(foo instanceof Foo)//true<br>另外，更重的一点是 instanceof 可以在继承关系中用来判断一个实例是否属于它的父类型。例如：<br>清单 3. instanceof 在继承中关系中的用法<br> // 判断 foo 是否是 Foo 类的实例 , 并且是否是其父类型的实例<br> function Aoo(){}<br> function Foo(){}<br> Foo.prototype = new Aoo();//JavaScript 原型继承</p>
<p> var foo = new Foo();<br> console.log(foo instanceof Foo)//true<br> console.log(foo instanceof Aoo)//true<br>上面的代码中是判断了一层继承关系中的父类，在多层继承关系中，instanceof 运算符同样适用。<br>你真的了解 instanceof 操作符吗？<br>看了上面的代码示例，是不是觉得 instanceof 操作符很简单，下面来看点复杂的用法。<br>清单 4. instanceof 复杂用法<br> console.log(Object instanceof Object);//true<br> console.log(Function instanceof Function);//true<br> console.log(Number instanceof Number);//false<br> console.log(String instanceof String);//false </p>
<p> console.log(Function instanceof Object);//true </p>
<p> console.log(Foo instanceof Function);//true<br> console.log(Foo instanceof Foo);//false<br>看了上面的代码是不是又晕头转向了？为什么 Object 和 Function instanceof 自己等于 true，而其他类 instanceof 自己却又不等于 true 呢？如何解释？要想从根本上了解 instanceof 的奥秘，需要从两个方面着手：1，语言规范中是如何定义这个运算符的。2，JavaScript 原型继承机制。<br>回页首<br>详细剖析 ECMAScript-262 edition 3 中 instanceof 运算符的定义<br>语言规范对中 instanceof 运算符的定义如下：<br>清单 5. 规范中 instanceof 运算符定义<br> 11.8.6 The instanceof operator<br> The production RelationalExpression:<br>     RelationalExpression instanceof ShiftExpression is evaluated as follows: </p>
<ol>
<li>Evaluate RelationalExpression. </li>
<li>Call GetValue(Result(1)).// 调用 GetValue 方法得到 Result(1) 的值，设为 Result(2) </li>
<li>Evaluate ShiftExpression. </li>
<li>Call GetValue(Result(3)).// 同理，这里设为 Result(4) </li>
<li>If Result(4) is not an object, throw a TypeError exception.// 如果 Result(4) 不是 object，<pre><code>//抛出异常
</code></pre>/<em> 如果 Result(4) 没有 [[HasInstance]] 方法，抛出异常。规范中的所有 [[…]] 方法或者属性都是内部的，<br>在 JavaScript 中不能直接使用。并且规范中说明，只有 Function 对象实现了 [[HasInstance]] 方法。<br>所以这里可以简单的理解为：如果 Result(4) 不是 Function 对象，抛出异常 </em>/ </li>
<li>If Result(4) does not have a [[HasInstance]] method,<br>throw a TypeError exception.<br>// 相当于这样调用：Result(4).<a href="Result(2">[HasInstance]</a>) </li>
<li>Call the [[HasInstance]] method of Result(4) with parameter Result(2). </li>
<li><p>Return Result(7). </p>
<p>// 相关的 HasInstance 方法定义<br>15.3.5.3 [[HasInstance]] (V)<br>Assume F is a Function object.// 这里 F 就是上面的 Result(4)，V 是 Result(2)<br>When the [[HasInstance]] method of F is called with value V,<br> the following steps are taken: </p>
</li>
<li>If V is not an object, return false.// 如果 V 不是 object，直接返回 false </li>
<li>Call the [[Get]] method of F with property name “prototype”.// 用 [[Get]] 方法取 <pre><code>// F 的 prototype 属性
</code></pre></li>
<li>Let O be Result(2).//O = F.<a href="&quot;prototype&quot;">[Get]</a> </li>
<li>If O is not an object, throw a TypeError exception. </li>
<li>Let V be the value of the [[Prototype]] property of V.//V = V.[[Prototype]] </li>
<li>If V is null, return false.<br>// 这里是关键，如果 O 和 V 引用的是同一个对象，则返回 true；否则，到 Step 8 返回 Step 5 继续循环</li>
<li>If O and V refer to the same object or if they refer to objects<br>joined to each other (section 13.1.2), return true. </li>
<li><p>Go to step 5.<br>上面的规范定义很晦涩，而且看起来比较复杂，涉及到很多概念，但把这段规范翻译成 JavaScript 代码却很简单，如下：<br>清单 6. JavaScript instanceof 运算符代码<br>function instance_of(L, R) {//L 表示左表达式，R 表示右表达式<br>var O = R.prototype;// 取 R 的显示原型<br>L = L.<strong>proto</strong>;// 取 L 的隐式原型<br>while (true) {<br>if (L === null)<br>  return false;<br>if (O === L)// 这里重点：当 O 严格等于 L 时，返回 true<br>  return true;<br>L = L.<strong>proto</strong>;<br>}<br>}<br>回页首<br>JavaScript 原型继承机制<br>由于本文主要集中在剖析 JavaScript instanceof 运算符，所以对于 JavaScript 的原型继承机制不再做详细的讲解，下面参考来自 <a href="http://www.mollypages.org/misc/js.mp" target="_blank" rel="external">http://www.mollypages.org/misc/js.mp</a> 的一张图片，此图片详细的描述了 JavaScript 各种对象的显示和隐式原型链结构。<br>由其本文涉及显示原型和隐式原型，所以下面对这两个概念作一下简单说明。在 JavaScript 原型继承结构里面，规范中用 [[Prototype]] 表示对象隐式的原型，在 JavaScript 中用 <strong>proto</strong> 表示，并且在 Firefox 和 Chrome 浏览器中是可以访问得到这个属性的，但是 IE 下不行。所有 JavaScript 对象都有 <strong>proto</strong> 属性，但只有 Object.prototype.<strong>proto</strong> 为 null，前提是没有在 Firefox 或者 Chrome 下修改过这个属性。这个属性指向它的原型对象。 至于显示的原型，在 JavaScript 里用 prototype 属性表示，这个是 JavaScript 原型继承的基础知识，在这里就不在叙述了。<br><img src="/img/原型连/figure1.jpg" alt=""><br>图 1. JavaScript 原型链<br>JavaScript 原型链<br>回页首<br>讲解 instanceof 复杂用法<br>有了上面 instanceof 运算符的 JavaScript 代码和原型继承图，再来理解 instanceof 运算符将易如反掌。下面将详细讲解 Object instanceof Object，Function instanceof Function 和 Foo instanceof Foo 三个示例，其它示例读者可自行推演。<br>清单 7. Object instanceof Object<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>ObjectL = Object, ObjectR = Object;<br>// 下面根据规范逐步推演<br>O = ObjectR.prototype = Object.prototype<br>L = ObjectL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O != L<br>// 循环查找 L 是否还有 <strong>proto</strong><br>L = Function.prototype.<strong>proto</strong> = Object.prototype<br>// 第二次判断<br>O == L<br>// 返回 true<br>清单 8. Function instanceof Function<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>FunctionL = Function, FunctionR = Function;<br>// 下面根据规范逐步推演<br>O = FunctionR.prototype = Function.prototype<br>L = FunctionL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O == L<br>// 返回 true<br>清单 9. Foo instanceof Foo<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>FooL = Foo, FooR = Foo;<br>// 下面根据规范逐步推演<br>O = FooR.prototype = Foo.prototype<br>L = FooL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O != L<br>// 循环再次查找 L 是否还有 <strong>proto</strong><br>L = Function.prototype.<strong>proto</strong> = Object.prototype<br>// 第二次判断<br>O != L<br>// 再次循环查找 L 是否还有 <strong>proto</strong><br>L = Object.prototype.<strong>proto</strong> = null<br>// 第三次判断<br>L == null<br>// 返回 false<br>回页首<br>简析 instanceof 在 Dojo 继承机制中的应用<br>在 JavaScript 中，是没有多重继承这个概念的，就像 Java 一样。但在 Dojo 中使用 declare 声明类时，是允许继承自多个类的。下面以 Dojo 1.6.1 为例。<br>清单 10. Dojo 中多重继承<br>dojo.declare(“Aoo”,null,{});<br>dojo.declare(“Boo”,null,{});<br>dojo.declare(“Foo”,[Aoo,Boo],{}); </p>
<p>var foo = new Foo();<br>console.log(foo instanceof Aoo);//true<br>console.log(foo instanceof Boo);//false </p>
<p>console.log(foo.isInstanceOf(Aoo));//true<br>console.log(foo.isInstanceOf(Boo));//true<br>上面的示例中，Foo 同时继承自 Aoo 和 Boo，但当使用 instanceof 运算符来检查 foo 是否是 Boo 的实例时，返回的是 false。实际上，在 Dojo 的内部，Foo 仍然只继承自 Aoo，而通过 mixin 机制把 Boo 类中的方法和属性拷贝到 Foo 中，所以当用 instanceof 运算符来检查是否是 Boo 的实例时，会返回 false。所以 Dojo 为每个类的实例添加了一个新的方法叫 isInstanceOf，用这个方法来检查多重继承。<br>结束语<br>本文详细介绍了 JavaScript 语言中 instanceof 运算符，并且结合语言规范深入剖析了此操作符的算法。对读者使用 JavaScript 编写复杂的面向对象程序会有很大的帮助。本文所有代码在 Firefox 15 下通过测试。<br>参考资料<br>学习<br>关于 Dojo，请参考 Dojo 官方网站<br>developerWorks Web development 专区：通过专门关于 Web 技术的文章和教程，扩展您在网站开发方面的技能。<br>developerWorks Ajax 资源中心：这是有关 Ajax 编程模型信息的一站式中心，包括很多文档、教程、论坛、blog、wiki 和新闻。任何 Ajax 的新信息都能在这里找到。<br>developerWorks Web 2.0 资源中心，这是有关 Web 2.0 相关信息的一站式中心，包括大量 Web 2.0 技术文章、教程、下载和相关技术资源。</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/instanceof/">instanceof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/10/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/12/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 findmoon
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >外地到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>