<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>findmoon白色蜗牛</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta property="og:type" content="website">
<meta property="og:title" content="findmoon白色蜗牛">
<meta property="og:url" content="//findmoon.github.io/index.html/page/12/index.html">
<meta property="og:site_name" content="findmoon白色蜗牛">
<meta property="og:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="findmoon白色蜗牛">
<meta name="twitter:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
  
    <link rel="alternative" href="/atom.xml" title="findmoon白色蜗牛" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">findmoon</a></h1>
        </hgroup>

        
        <p class="header-subtitle">一个试图专注于自身的成长者</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">博客首页</a></li>
                        
                            <li><a href="/Home">个人简历</a></li>
                        
                            <li><a href="/works">作品展示</a></li>
                        
                            <li><a href="/archives">所有文章</a></li>
                        
                            <li><a href="/about">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=hre0vrCwtbG3v77G9-eo5enr" title="mail">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/findmoon/mywork" title="github">github</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/u/2637672265?is_all=1" title="weibo">weibo</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Array/" style="font-size: 11.43px;">Array</a> <a href="/tags/Arry-string-math/" style="font-size: 10px;">Arry/string/math</a> <a href="/tags/BFC/" style="font-size: 11.43px;">BFC</a> <a href="/tags/Backbone/" style="font-size: 10px;">Backbone</a> <a href="/tags/CSS3动画/" style="font-size: 10px;">CSS3动画</a> <a href="/tags/DNS解析域名/" style="font-size: 10px;">DNS解析域名</a> <a href="/tags/DOCTYPE/" style="font-size: 10px;">DOCTYPE</a> <a href="/tags/DOM事件/" style="font-size: 10px;">DOM事件</a> <a href="/tags/Data/" style="font-size: 10px;">Data</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/MV模式/" style="font-size: 12.86px;">MV模式</a> <a href="/tags/Mocha/" style="font-size: 10px;">Mocha</a> <a href="/tags/OO/" style="font-size: 10px;">OO</a> <a href="/tags/TCP-UDP/" style="font-size: 11.43px;">TCP/UDP</a> <a href="/tags/TCP三次握手/" style="font-size: 10px;">TCP三次握手</a> <a href="/tags/TDD/" style="font-size: 10px;">TDD</a> <a href="/tags/UNICODE-ASCII/" style="font-size: 10px;">UNICODE/ASCII</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/animate/" style="font-size: 10px;">animate()</a> <a href="/tags/animate动画队列/" style="font-size: 10px;">animate动画队列</a> <a href="/tags/background-image/" style="font-size: 10px;">background-image</a> <a href="/tags/border/" style="font-size: 12.86px;">border</a> <a href="/tags/border图形/" style="font-size: 10px;">border图形</a> <a href="/tags/box-shadow/" style="font-size: 10px;">box-shadow</a> <a href="/tags/console-log/" style="font-size: 10px;">console.log()</a> <a href="/tags/css/" style="font-size: 12.86px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/css属性/" style="font-size: 11.43px;">css属性</a> <a href="/tags/css样式/" style="font-size: 10px;">css样式</a> <a href="/tags/deferred/" style="font-size: 11.43px;">deferred</a> <a href="/tags/delete/" style="font-size: 11.43px;">delete</a> <a href="/tags/first-child/" style="font-size: 10px;">first-child</a> <a href="/tags/first-of-type/" style="font-size: 10px;">first-of-type</a> <a href="/tags/float/" style="font-size: 11.43px;">float</a> <a href="/tags/font-face/" style="font-size: 10px;">font-face</a> <a href="/tags/form表单/" style="font-size: 10px;">form表单</a> <a href="/tags/get/" style="font-size: 10px;">get</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitbash/" style="font-size: 10px;">gitbash</a> <a href="/tags/git错误/" style="font-size: 10px;">git错误</a> <a href="/tags/hack/" style="font-size: 10px;">hack</a> <a href="/tags/haslayout/" style="font-size: 10px;">haslayout</a> <a href="/tags/html/" style="font-size: 17.14px;">html</a> <a href="/tags/html-css/" style="font-size: 11.43px;">html/css</a> <a href="/tags/http/" style="font-size: 12.86px;">http</a> <a href="/tags/http状态码/" style="font-size: 10px;">http状态码</a> <a href="/tags/inline-block/" style="font-size: 10px;">inline-block</a> <a href="/tags/input/" style="font-size: 10px;">input</a> <a href="/tags/instanceof/" style="font-size: 10px;">instanceof</a> <a href="/tags/instanceof-typeof/" style="font-size: 11.43px;">instanceof/typeof</a> <a href="/tags/jQuery/" style="font-size: 11.43px;">jQuery</a> <a href="/tags/js/" style="font-size: 18.57px;">js</a> <a href="/tags/json/" style="font-size: 12.86px;">json</a> <a href="/tags/js严格模式/" style="font-size: 10px;">js严格模式</a> <a href="/tags/js加载/" style="font-size: 10px;">js加载</a> <a href="/tags/js模板引擎/" style="font-size: 10px;">js模板引擎</a> <a href="/tags/js鼠标位置/" style="font-size: 10px;">js鼠标位置</a> <a href="/tags/list-style/" style="font-size: 10px;">list-style</a> <a href="/tags/meta/" style="font-size: 10px;">meta</a> <a href="/tags/mock/" style="font-size: 10px;">mock</a> <a href="/tags/offset/" style="font-size: 10px;">offset()</a> <a href="/tags/overflow/" style="font-size: 10px;">overflow</a> <a href="/tags/php/" style="font-size: 20px;">php</a> <a href="/tags/placeholder/" style="font-size: 10px;">placeholder</a> <a href="/tags/position/" style="font-size: 10px;">position</a> <a href="/tags/position文档流/" style="font-size: 10px;">position文档流</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/requirejs/" style="font-size: 10px;">requirejs</a> <a href="/tags/scopechain/" style="font-size: 10px;">scopechain</a> <a href="/tags/stopImmediatePropagation/" style="font-size: 10px;">stopImmediatePropagation</a> <a href="/tags/stringify/" style="font-size: 10px;">stringify</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/this/" style="font-size: 12.86px;">this</a> <a href="/tags/typeof/" style="font-size: 11.43px;">typeof</a> <a href="/tags/undefined/" style="font-size: 10px;">undefined</a> <a href="/tags/url加载/" style="font-size: 10px;">url加载</a> <a href="/tags/warterfall/" style="font-size: 10px;">warterfall</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/zoom/" style="font-size: 10px;">zoom</a> <a href="/tags/代码书写/" style="font-size: 10px;">代码书写</a> <a href="/tags/函数/" style="font-size: 14.29px;">函数</a> <a href="/tags/列表/" style="font-size: 10px;">列表</a> <a href="/tags/前端/" style="font-size: 14.29px;">前端</a> <a href="/tags/前端css/" style="font-size: 12.86px;">前端css</a> <a href="/tags/前端html/" style="font-size: 10px;">前端html</a> <a href="/tags/动画animation/" style="font-size: 10px;">动画animation</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/变量/" style="font-size: 11.43px;">变量</a> <a href="/tags/同源策略/" style="font-size: 10px;">同源策略</a> <a href="/tags/同源跨域/" style="font-size: 15.71px;">同源跨域</a> <a href="/tags/后端/" style="font-size: 10px;">后端</a> <a href="/tags/字符串/" style="font-size: 10px;">字符串</a> <a href="/tags/字面量/" style="font-size: 10px;">字面量</a> <a href="/tags/库与架构/" style="font-size: 10px;">库与架构</a> <a href="/tags/懒加载/" style="font-size: 10px;">懒加载</a> <a href="/tags/数学函数/" style="font-size: 10px;">数学函数</a> <a href="/tags/数据包组装/" style="font-size: 10px;">数据包组装</a> <a href="/tags/数组/" style="font-size: 11.43px;">数组</a> <a href="/tags/方法/" style="font-size: 10px;">方法</a> <a href="/tags/标记语言/" style="font-size: 10px;">标记语言</a> <a href="/tags/模块化/" style="font-size: 10px;">模块化</a> <a href="/tags/模块化编程/" style="font-size: 12.86px;">模块化编程</a> <a href="/tags/正则/" style="font-size: 10px;">正则</a> <a href="/tags/盒模型/" style="font-size: 10px;">盒模型</a> <a href="/tags/立即执行函数/" style="font-size: 10px;">立即执行函数</a> <a href="/tags/简历/" style="font-size: 10px;">简历</a> <a href="/tags/继承/" style="font-size: 10px;">继承</a> <a href="/tags/网站访问/" style="font-size: 10px;">网站访问</a> <a href="/tags/获取路径/" style="font-size: 14.29px;">获取路径</a> <a href="/tags/行内元素/" style="font-size: 10px;">行内元素</a> <a href="/tags/语法/" style="font-size: 10px;">语法</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/跨域请求/" style="font-size: 11.43px;">跨域请求</a> <a href="/tags/跨域请求处理方法/" style="font-size: 10px;">跨域请求处理方法</a> <a href="/tags/选择器/" style="font-size: 10px;">选择器</a> <a href="/tags/闭包/" style="font-size: 10px;">闭包</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">人生是一场不断的转换，我们总是不断地试着所向披靡</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">findmoon</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">findmoon</a></h1>
            </hgroup>
            
            <p class="header-subtitle">一个试图专注于自身的成长者</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">博客首页</a></li>
                
                    <li><a href="/Home">个人简历</a></li>
                
                    <li><a href="/works">作品展示</a></li>
                
                    <li><a href="/archives">所有文章</a></li>
                
                    <li><a href="/about">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=hre0vrCwtbG3v77G9-eo5enr" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/findmoon/mywork" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/u/2637672265?is_all=1" title="weibo">weibo</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-理解 JavaScript 作用域和作用域链" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/17/理解 JavaScript 作用域和作用域链/" class="article-date">
      <time datetime="2016-05-17T12:45:32.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/理解 JavaScript 作用域和作用域链/">理解 JavaScript 作用域和作用域链</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JavaScript 开发进阶：理解 JavaScript 作用域和作用域链<br><img src="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" alt="原网址"><br>　　作用域是JavaScript最重要的概念之一，想要学好JavaScript就需要理解JavaScript作用域和作用域链的工作原理。今天这篇文章对JavaScript作用域和作用域链作简单的介绍，希望能帮助大家更好的学习JavaScript。</p>
<p>JavaScript作用域</p>
<p>　　任何程序设计语言都有作用域的概念，简单的说，作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。在JavaScript中，变量的作用域有全局作用域和局部作用域两种。</p>
<p>　　1.  全局作用域（Global Scope）<br>　　在代码中任何地方都能访问到的对象拥有全局作用域，一般来说以下几种情形拥有全局作用域：</p>
<p>　　（1）最外层函数和在最外层函数外面定义的变量拥有全局作用域，例如：</p>
<p>var authorName=”山边小溪”;<br>function doSomething(){<br>    var blogName=”梦想天空”;<br>    function innerSay(){<br>        alert(blogName);<br>    }<br>    innerSay();<br>}<br>alert(authorName); //山边小溪<br>alert(blogName); //脚本错误<br>doSomething(); //梦想天空<br>innerSay() //脚本错误<br>　　（2）所有末定义直接赋值的变量自动声明为拥有全局作用域，例如：</p>
<p>function doSomething(){<br>    var authorName=”山边小溪”;<br>    blogName=”梦想天空”;<br>    alert(authorName);<br>}<br>doSomething(); //山边小溪<br>alert(blogName); //梦想天空<br>alert(authorName); //脚本错误<br>　　变量blogName拥有全局作用域，而authorName在函数外部无法访问到。</p>
<p>　　（3）所有window对象的属性拥有全局作用域</p>
<p>　　一般情况下，window对象的内置属性都拥有全局作用域，例如window.name、window.location、window.top等等。</p>
<p>　　1.  局部作用域（Local Scope）　　<br>　　和全局作用域相反，局部作用域一般只在固定的代码片段内可访问到，最常见的例如函数内部，所有在一些地方也会看到有人把这种作用域称为函数作用域，例如下列代码中的blogName和函数innerSay都只拥有局部作用域。</p>
<p>function doSomething(){<br>    var blogName=”梦想天空”;<br>    function innerSay(){<br>        alert(blogName);<br>    }<br>    innerSay();<br>}<br>alert(blogName); //脚本错误<br>innerSay(); //脚本错误<br>作用域链（Scope Chain）</p>
<p>　　在JavaScript中，函数也是对象，实际上，JavaScript里一切都是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。其中一个内部属性是[[Scope]]，由ECMA-262标准第三版定义，该内部属性包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。</p>
<p>　　当一个函数创建后，它的作用域链会被创建此函数的作用域中可访问的数据对象填充。例如定义下面这样一个函数：</p>
<p>function add(num1,num2) {<br>    var sum = num1 + num2;<br>    return sum;<br>}<br>　　在函数add创建时，它的作用域链中会填入一个全局对象，该全局对象包含了所有全局变量，如下图所示（注意：图片只例举了全部变量中的一部分）：</p>
<p><img src="/img/作用域链/scopechain.jpg" alt=""></p>
<p>　函数add的作用域将会在执行时用到。例如执行如下代码：</p>
<p>1<br>var total = add(5,10);<br>　　执行此函数时会创建一个称为“运行期上下文(execution context)”的内部对象，运行期上下文定义了函数执行时的环境。每个运行期上下文都有自己的作用域链，用于标识符解析，当运行期上下文被创建时，而它的作用域链初始化为当前运行函数的[[Scope]]所包含的对象。</p>
<p>　　这些值按照它们出现在函数中的顺序被复制到运行期上下文的作用域链中。它们共同组成了一个新的对象，叫“活动对象(activation object)”，该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端，当运行期上下文被销毁，活动对象也随之销毁。新的作用域链如下图所示：</p>
<p><img src="/img/作用域链/scopechain1.jpg" alt=""></p>
<p>在函数执行过程中，没遇到一个变量，都会经历一次标识符解析过程以决定从哪里获取和存储数据。该过程从作用域链头部，也就是从活动对象开始搜索，查找同名的标识符，如果找到了就使用这个标识符对应的变量，如果没找到继续搜索作用域链中的下一个对象，如果搜索完所有对象都未找到，则认为该标识符未定义。函数执行过程中，每个标识符都要经历这样的搜索过程。</p>
<p>作用域链和代码优化</p>
<p>　　从作用域链的结构可以看出，在运行期上下文的作用域链中，标识符所在的位置越深，读写速度就会越慢。如上图所示，因为全局变量总是存在于运行期上下文作用域链的最末端，因此在标识符解析的时候，查找全局变量是最慢的。所以，在编写代码的时候应尽量少使用全局变量，尽可能使用局部变量。一个好的经验法则是：如果一个跨作用域的对象被引用了一次以上，则先把它存储到局部变量里再使用。例如下面的代码：</p>
<p>function changeColor(){<br>    document.getElementById(“btnChange”).onclick=function(){<br>        document.getElementById(“targetCanvas”).style.backgroundColor=”red”;<br>    };<br>}<br>　　这个函数引用了两次全局变量document，查找该变量必须遍历整个作用域链，直到最后在全局对象中才能找到。这段代码可以重写如下：</p>
<p>function changeColor(){<br>    var doc=document;<br>    doc.getElementById(“btnChange”).onclick=function(){<br>        doc.getElementById(“targetCanvas”).style.backgroundColor=”red”;<br>    };<br>}<br>　　这段代码比较简单，重写后不会显示出巨大的性能提升，但是如果程序中有大量的全局变量被从反复访问，那么重写后的代码性能会有显著改善。</p>
<p>改变作用域链</p>
<p>　　函数每次执行时对应的运行期上下文都是独一无二的，所以多次调用同一个函数就会导致创建多个运行期上下文，当函数执行完毕，执行上下文会被销毁。每一个运行期上下文都和一个作用域链关联。一般情况下，在运行期上下文运行的过程中，其作用域链只会被 with 语句和 catch 语句影响。</p>
<p>　　with语句是对象的快捷应用方式，用来避免书写重复代码。例如：</p>
<p>function initUI(){<br>    with(document){<br>        var bd=body,<br>            links=getElementsByTagName(“a”),<br>            i=0,<br>            len=links.length;<br>        while(i &lt; len){<br>            update(links[i++]);<br>        }<br>        getElementById(“btnInit”).onclick=function(){<br>            doSomething();<br>        };<br>    }<br>}<br>　　这里使用width语句来避免多次书写document，看上去更高效，实际上产生了性能问题。</p>
<p>　　当代码运行到with语句时，运行期上下文的作用域链临时被改变了。一个新的可变对象被创建，它包含了参数指定的对象的所有属性。这个对象将被推入作用域链的头部，这意味着函数的所有局部变量现在处于第二个作用域链对象中，因此访问代价更高了。如下图所示：</p>
<p><img src="/img/作用域链/scopechain2.jpg" alt=""></p>
<p>因此在程序中应避免使用with语句，在这个例子中，只要简单的把document存储在一个局部变量中就可以提升性能。</p>
<p>　　另外一个会改变作用域链的是try-catch语句中的catch语句。当try代码块中发生错误时，执行过程会跳转到catch语句，然后把异常对象推入一个可变对象并置于作用域的头部。在catch代码块内部，函数的所有局部变量将会被放在第二个作用域链对象中。示例代码：</p>
<p>try{<br>    doSomething();<br>}catch(ex){<br>    alert(ex.message); //作用域链在此处改变<br>}<br>　　请注意，一旦catch语句执行完毕，作用域链机会返回到之前的状态。try-catch语句在代码调试和异常处理中非常有用，因此不建议完全避免。你可以通过优化代码来减少catch语句对性能的影响。一个很好的模式是将错误委托给一个函数处理，例如：</p>
<p>try{<br>    doSomething();<br>}catch(ex){<br>    handleError(ex); //委托给处理器方法<br>}<br>　　优化后的代码，handleError方法是catch子句中唯一执行的代码。该函数接收异常对象作为参数，这样你可以更加灵活和统一的处理错误。由于只执行一条语句，且没有局部变量的访问，作用域链的临时改变就不会影响代码性能了。</p>
<hr>
<p>参考资料</p>
<ol>
<li><p>High.Performance.JavaScript, Nicholas.C.Zakas</p>
</li>
<li><p>Explaining JavaScript Scope And Closures, Robert Nyman</p>
</li>
<li><p>ECMAScript Language Specification, bclary.com</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scopechain/">scopechain</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-instanceof运算符深入剖析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/17/instanceof运算符深入剖析/" class="article-date">
      <time datetime="2016-05-17T12:42:32.000Z" itemprop="datePublished">2016-05-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/17/instanceof运算符深入剖析/">instanceof 运算符深入剖析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.ibm.com/developerworks/cn/web/1306_jiangjj_jsinstanceof/" target="_blank" rel="external">JavaScript instanceof 运算符深入剖析-转载</a></p>
<p>随着 web 的发展，越来越多的产品功能都放在前端进行实现，增强用户体验。而前端开发的主要语言则是 JavaScript。学好 JavaScript 对开发前端应用已经越来越重要。在开发复杂产品中，需要使用面向对象的机制时，往往会用到复杂的 JavaScript 继承，而 instanceof 运算符是 JavaScript 语言中原生的用来判断实例继承关系的操作符。深入理解 instanceof 运算符的用法，对写好复杂的 JavaScript 程序，会有很大帮助。<br>2 评论<br>姜 俊杰, 软件工程师, IBM<br>2013 年 6 月 06 日<br>expand<br>内容</p>
<p>在 IBM Bluemix 云平台上开发并部署您的下一个应用。<br>开始您的试用<br>instanceof 运算符简介<br>在 JavaScript 中，判断一个变量的类型尝尝会用 typeof 运算符，在使用 typeof 运算符时采用引用类型存储值会出现一个问题，无论引用的是什么类型的对象，它都返回 “object”。ECMAScript 引入了另一个 Java 运算符 instanceof 来解决这个问题。instanceof 运算符与 typeof 运算符相似，用于识别正在处理的对象的类型。与 typeof 方法不同的是，instanceof 方法要求开发者明确地确认对象为某特定类型。例如：<br>清单 1. instanceof 示例<br> var oStringObject = new String(“hello world”);<br> console.log(oStringObject instanceof String);      // 输出 “true”<br>这段代码问的是“变量 oStringObject 是否为 String 对象的实例？”oStringObject 的确是 String 对象的实例，因此结果是”true”。尽管不像 typeof 方法那样灵活，但是在 typeof 方法返回 “object” 的情况下，instanceof 方法还是很有用的。<br>instanceof 运算符的常规用法<br>通常来讲，使用 instanceof 就是判断一个实例是否属于某种类型。例如：<br>清单 2. instanceof 常规用法<br> // 判断 foo 是否是 Foo 类的实例<br> function Foo(){}<br> var foo = new Foo();<br> console.log(foo instanceof Foo)//true<br>另外，更重的一点是 instanceof 可以在继承关系中用来判断一个实例是否属于它的父类型。例如：<br>清单 3. instanceof 在继承中关系中的用法<br> // 判断 foo 是否是 Foo 类的实例 , 并且是否是其父类型的实例<br> function Aoo(){}<br> function Foo(){}<br> Foo.prototype = new Aoo();//JavaScript 原型继承</p>
<p> var foo = new Foo();<br> console.log(foo instanceof Foo)//true<br> console.log(foo instanceof Aoo)//true<br>上面的代码中是判断了一层继承关系中的父类，在多层继承关系中，instanceof 运算符同样适用。<br>你真的了解 instanceof 操作符吗？<br>看了上面的代码示例，是不是觉得 instanceof 操作符很简单，下面来看点复杂的用法。<br>清单 4. instanceof 复杂用法<br> console.log(Object instanceof Object);//true<br> console.log(Function instanceof Function);//true<br> console.log(Number instanceof Number);//false<br> console.log(String instanceof String);//false </p>
<p> console.log(Function instanceof Object);//true </p>
<p> console.log(Foo instanceof Function);//true<br> console.log(Foo instanceof Foo);//false<br>看了上面的代码是不是又晕头转向了？为什么 Object 和 Function instanceof 自己等于 true，而其他类 instanceof 自己却又不等于 true 呢？如何解释？要想从根本上了解 instanceof 的奥秘，需要从两个方面着手：1，语言规范中是如何定义这个运算符的。2，JavaScript 原型继承机制。<br>回页首<br>详细剖析 ECMAScript-262 edition 3 中 instanceof 运算符的定义<br>语言规范对中 instanceof 运算符的定义如下：<br>清单 5. 规范中 instanceof 运算符定义<br> 11.8.6 The instanceof operator<br> The production RelationalExpression:<br>     RelationalExpression instanceof ShiftExpression is evaluated as follows: </p>
<ol>
<li>Evaluate RelationalExpression. </li>
<li>Call GetValue(Result(1)).// 调用 GetValue 方法得到 Result(1) 的值，设为 Result(2) </li>
<li>Evaluate ShiftExpression. </li>
<li>Call GetValue(Result(3)).// 同理，这里设为 Result(4) </li>
<li>If Result(4) is not an object, throw a TypeError exception.// 如果 Result(4) 不是 object，<pre><code>//抛出异常
</code></pre>/<em> 如果 Result(4) 没有 [[HasInstance]] 方法，抛出异常。规范中的所有 [[…]] 方法或者属性都是内部的，<br>在 JavaScript 中不能直接使用。并且规范中说明，只有 Function 对象实现了 [[HasInstance]] 方法。<br>所以这里可以简单的理解为：如果 Result(4) 不是 Function 对象，抛出异常 </em>/ </li>
<li>If Result(4) does not have a [[HasInstance]] method,<br>throw a TypeError exception.<br>// 相当于这样调用：Result(4).<a href="Result(2">[HasInstance]</a>) </li>
<li>Call the [[HasInstance]] method of Result(4) with parameter Result(2). </li>
<li><p>Return Result(7). </p>
<p>// 相关的 HasInstance 方法定义<br>15.3.5.3 [[HasInstance]] (V)<br>Assume F is a Function object.// 这里 F 就是上面的 Result(4)，V 是 Result(2)<br>When the [[HasInstance]] method of F is called with value V,<br> the following steps are taken: </p>
</li>
<li>If V is not an object, return false.// 如果 V 不是 object，直接返回 false </li>
<li>Call the [[Get]] method of F with property name “prototype”.// 用 [[Get]] 方法取 <pre><code>// F 的 prototype 属性
</code></pre></li>
<li>Let O be Result(2).//O = F.<a href="&quot;prototype&quot;">[Get]</a> </li>
<li>If O is not an object, throw a TypeError exception. </li>
<li>Let V be the value of the [[Prototype]] property of V.//V = V.[[Prototype]] </li>
<li>If V is null, return false.<br>// 这里是关键，如果 O 和 V 引用的是同一个对象，则返回 true；否则，到 Step 8 返回 Step 5 继续循环</li>
<li>If O and V refer to the same object or if they refer to objects<br>joined to each other (section 13.1.2), return true. </li>
<li><p>Go to step 5.<br>上面的规范定义很晦涩，而且看起来比较复杂，涉及到很多概念，但把这段规范翻译成 JavaScript 代码却很简单，如下：<br>清单 6. JavaScript instanceof 运算符代码<br>function instance_of(L, R) {//L 表示左表达式，R 表示右表达式<br>var O = R.prototype;// 取 R 的显示原型<br>L = L.<strong>proto</strong>;// 取 L 的隐式原型<br>while (true) {<br>if (L === null)<br>  return false;<br>if (O === L)// 这里重点：当 O 严格等于 L 时，返回 true<br>  return true;<br>L = L.<strong>proto</strong>;<br>}<br>}<br>回页首<br>JavaScript 原型继承机制<br>由于本文主要集中在剖析 JavaScript instanceof 运算符，所以对于 JavaScript 的原型继承机制不再做详细的讲解，下面参考来自 <a href="http://www.mollypages.org/misc/js.mp" target="_blank" rel="external">http://www.mollypages.org/misc/js.mp</a> 的一张图片，此图片详细的描述了 JavaScript 各种对象的显示和隐式原型链结构。<br>由其本文涉及显示原型和隐式原型，所以下面对这两个概念作一下简单说明。在 JavaScript 原型继承结构里面，规范中用 [[Prototype]] 表示对象隐式的原型，在 JavaScript 中用 <strong>proto</strong> 表示，并且在 Firefox 和 Chrome 浏览器中是可以访问得到这个属性的，但是 IE 下不行。所有 JavaScript 对象都有 <strong>proto</strong> 属性，但只有 Object.prototype.<strong>proto</strong> 为 null，前提是没有在 Firefox 或者 Chrome 下修改过这个属性。这个属性指向它的原型对象。 至于显示的原型，在 JavaScript 里用 prototype 属性表示，这个是 JavaScript 原型继承的基础知识，在这里就不在叙述了。<br><img src="/img/原型连/figure1.jpg" alt=""><br>图 1. JavaScript 原型链<br>JavaScript 原型链<br>回页首<br>讲解 instanceof 复杂用法<br>有了上面 instanceof 运算符的 JavaScript 代码和原型继承图，再来理解 instanceof 运算符将易如反掌。下面将详细讲解 Object instanceof Object，Function instanceof Function 和 Foo instanceof Foo 三个示例，其它示例读者可自行推演。<br>清单 7. Object instanceof Object<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>ObjectL = Object, ObjectR = Object;<br>// 下面根据规范逐步推演<br>O = ObjectR.prototype = Object.prototype<br>L = ObjectL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O != L<br>// 循环查找 L 是否还有 <strong>proto</strong><br>L = Function.prototype.<strong>proto</strong> = Object.prototype<br>// 第二次判断<br>O == L<br>// 返回 true<br>清单 8. Function instanceof Function<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>FunctionL = Function, FunctionR = Function;<br>// 下面根据规范逐步推演<br>O = FunctionR.prototype = Function.prototype<br>L = FunctionL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O == L<br>// 返回 true<br>清单 9. Foo instanceof Foo<br>// 为了方便表述，首先区分左侧表达式和右侧表达式<br>FooL = Foo, FooR = Foo;<br>// 下面根据规范逐步推演<br>O = FooR.prototype = Foo.prototype<br>L = FooL.<strong>proto</strong> = Function.prototype<br>// 第一次判断<br>O != L<br>// 循环再次查找 L 是否还有 <strong>proto</strong><br>L = Function.prototype.<strong>proto</strong> = Object.prototype<br>// 第二次判断<br>O != L<br>// 再次循环查找 L 是否还有 <strong>proto</strong><br>L = Object.prototype.<strong>proto</strong> = null<br>// 第三次判断<br>L == null<br>// 返回 false<br>回页首<br>简析 instanceof 在 Dojo 继承机制中的应用<br>在 JavaScript 中，是没有多重继承这个概念的，就像 Java 一样。但在 Dojo 中使用 declare 声明类时，是允许继承自多个类的。下面以 Dojo 1.6.1 为例。<br>清单 10. Dojo 中多重继承<br>dojo.declare(“Aoo”,null,{});<br>dojo.declare(“Boo”,null,{});<br>dojo.declare(“Foo”,[Aoo,Boo],{}); </p>
<p>var foo = new Foo();<br>console.log(foo instanceof Aoo);//true<br>console.log(foo instanceof Boo);//false </p>
<p>console.log(foo.isInstanceOf(Aoo));//true<br>console.log(foo.isInstanceOf(Boo));//true<br>上面的示例中，Foo 同时继承自 Aoo 和 Boo，但当使用 instanceof 运算符来检查 foo 是否是 Boo 的实例时，返回的是 false。实际上，在 Dojo 的内部，Foo 仍然只继承自 Aoo，而通过 mixin 机制把 Boo 类中的方法和属性拷贝到 Foo 中，所以当用 instanceof 运算符来检查是否是 Boo 的实例时，会返回 false。所以 Dojo 为每个类的实例添加了一个新的方法叫 isInstanceOf，用这个方法来检查多重继承。<br>结束语<br>本文详细介绍了 JavaScript 语言中 instanceof 运算符，并且结合语言规范深入剖析了此操作符的算法。对读者使用 JavaScript 编写复杂的面向对象程序会有很大的帮助。本文所有代码在 Firefox 15 下通过测试。<br>参考资料<br>学习<br>关于 Dojo，请参考 Dojo 官方网站<br>developerWorks Web development 专区：通过专门关于 Web 技术的文章和教程，扩展您在网站开发方面的技能。<br>developerWorks Ajax 资源中心：这是有关 Ajax 编程模型信息的一站式中心，包括很多文档、教程、论坛、blog、wiki 和新闻。任何 Ajax 的新信息都能在这里找到。<br>developerWorks Web 2.0 资源中心，这是有关 Web 2.0 相关信息的一站式中心，包括大量 Web 2.0 技术文章、教程、下载和相关技术资源。</p>
</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/instanceof/">instanceof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-判断js函数是不是存在typeof" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/判断js函数是不是存在typeof/" class="article-date">
      <time datetime="2016-05-16T12:52:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/判断js函数是不是存在typeof/">判断js函数是不是存在typeof</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>判断js函数是不是存在typeof 【转载】</p>
<p>判断js函数是否存在typeof<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">//*==============================================================================*/</span><br><span class="line">//*   Ajax加载                                                                                                                                                             */</span><br><span class="line">//* 语法：var objLoad=new AjaxLoad()                                                                                                                */</span><br><span class="line">//*       objLoad.Loading(doAction,dataNode[,dataType[,callback[,fullShow]]]);                                               */</span><br><span class="line">//*                                                                                                                                                                              */</span><br><span class="line">//* 参 数：                                                                                                                                                                 */</span><br><span class="line">//*      -doAction[必需的]  执行 URL                                                                                                                        */</span><br><span class="line">//*      -dataNode[必需的]  显示获取内容的容器 ID                                                                                              */</span><br><span class="line">//*      -dataType[可选的]  数据类别[text|xml|body]，缺省值 text                                                                         */ </span><br><span class="line">//*      -callback[可选的]  输出函数[函数对 像]                                                                                                       */</span><br><span class="line">//*      -fullShow[可选的]  显示模式: 缺省值false-单块模式,true-全屏模式                                                         */</span><br><span class="line">//*                                                                                                                                                                              */</span><br><span class="line">//*                                                                                                                                                                              */</span><br><span class="line">//* 输出函数 [callback]：                                                                                                                                         */</span><br><span class="line">//*      可自定义输出函数来格式化所获取的数据，其格式请参加页尾objPrint()函数                                    */</span><br><span class="line">//*                                                                                                                                                                              */</span><br><span class="line">//*==============================================================================*/   </span><br><span class="line">/*此处调用Charset.vbs来解决当dataType=&apos;body&apos;时,xmlHttp.responseBody产生的乱码问题                        */</span><br><span class="line">/*请保证Charset.vbs文件与本文件存放在同一路径当中                                                                                    */</span><br><span class="line">var charsetPath=document.getElementsByTagName(&quot;script&quot;)[document.getElementsByTagName(&quot;script&quot;).length-1].src.split(&quot;?&quot;)[0];</span><br><span class="line">charsetPath=charsetPath.replace(&quot;Ajax_Load.js&quot;,&quot;Charset.vbs&quot;);</span><br><span class="line">document.write(&quot;&lt;script type=\&quot;text/vbscript\&quot; src=\&quot;&quot;+charsetPath+&quot;\&quot;&gt;&lt;/scr&quot;+&quot;ipt&gt;&quot;);</span><br><span class="line">//*==============================================================================*/  </span><br><span class="line">//*                           AjaxLoad begin                                                                                                                         */</span><br><span class="line">//*==============================================================================*/   </span><br><span class="line">function AjaxLoad()&#123;</span><br><span class="line">    /*初始化Ajax                                             */</span><br><span class="line"> function InitAjax()&#123;</span><br><span class="line">  var Ajax=false;</span><br><span class="line">  /*Microsoft*/</span><br><span class="line">  try &#123;</span><br><span class="line">     Ajax = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">     try &#123;</span><br><span class="line">     Ajax = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</span><br><span class="line">     &#125; catch (E) &#123;</span><br><span class="line">     Ajax = false;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;/*Mozilla*/</span><br><span class="line">  if (!Ajax &amp;&amp; typeof Ajax!=&apos;undefined&apos;) &#123;</span><br><span class="line">     Ajax = new XMLHttpRequest();</span><br><span class="line">  &#125;</span><br><span class="line">   return Ajax;</span><br><span class="line"> &#125;</span><br><span class="line"> /*---------------------------------------*/    </span><br><span class="line"> /*   判断函数或对像是否存在  一定要添加try catch块，否则不起作用             */</span><br><span class="line"> /*---------------------------------------*/    </span><br><span class="line"> function objExists(objName)&#123; </span><br><span class="line">  try&#123;  </span><br><span class="line">   if(typeof eval(objName)==&quot;undefined&quot;)&#123;return false;&#125;</span><br><span class="line">   if(typeof eval(objName)==&quot;object&quot;)&#123;return true;&#125;</span><br><span class="line">  &#125;catch(e)&#123;</span><br><span class="line">   return false;</span><br><span class="line">  &#125; </span><br><span class="line"> &#125;</span><br><span class="line"> function funExists(funName)&#123; </span><br><span class="line">  try&#123;  </span><br><span class="line">   if(typeof eval(funName)==&quot;undefined&quot;)&#123;return false;&#125; </span><br><span class="line">   if(typeof eval(funName)==&quot;function&quot;)&#123;return true;&#125;</span><br><span class="line">  &#125;catch(e)&#123;</span><br><span class="line">   return false;</span><br><span class="line">  &#125; </span><br><span class="line"> &#125; </span><br><span class="line"> /*-----------------------------------*/ </span><br><span class="line"> var fullShow=false;</span><br><span class="line"> var doAction=&quot;&quot;;</span><br><span class="line"> var dataType=&quot;text&quot;;</span><br><span class="line"> var callback=null;</span><br><span class="line"> var dataNode=null;</span><br><span class="line">    var objAjax = new InitAjax();</span><br><span class="line"> this.Loading=function(_doAction,_dataNode,_dataType,_callback,_fullShow)&#123;</span><br><span class="line">  try&#123;</span><br><span class="line">   doAction=_doAction;</span><br><span class="line">   dataType=_dataType;</span><br><span class="line">   callback=_callback;</span><br><span class="line">   dataNode=document.getElementById(_dataNode); </span><br><span class="line">   /**/</span><br><span class="line">   if(!dataNode)&#123;alert(&quot;参数错误，请输入正确的ID&quot;);return false;&#125;</span><br><span class="line">   if(!_fullShow)&#123;fullShow=false;&#125;else&#123;fullShow=true; &#125;</span><br><span class="line">   objAjax.open(&quot;GET&quot;,doAction, true); </span><br><span class="line">   objAjax.onreadystatechange = function()&#123;handleStateChange();&#125;;   </span><br><span class="line">   objAjax.setRequestHeader(&quot;Accept-charset&quot;,&quot;gb2312&quot;); </span><br><span class="line">   objAjax.setRequestHeader(&quot;If-Modified-Since&quot;,&quot;0&quot;);  //禁止缓存</span><br><span class="line">   objAjax.send(null); </span><br><span class="line">  &#125;catch(e)&#123;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125; </span><br><span class="line"> function handleStateChange()&#123;</span><br><span class="line">  if (objAjax.readyState == 4 &amp;&amp; objAjax.status == 200) &#123; </span><br><span class="line">   try&#123;</span><br><span class="line">       var data=getData(dataType,objAjax);</span><br><span class="line">        if(objExists(callback))&#123; </span><br><span class="line">        data=eval(callback+&quot;(&quot;+data+&quot;);&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    dataNode.innerHTML = data; </span><br><span class="line">   &#125;catch(e)&#123;</span><br><span class="line">      alert(e)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">   var outString=&quot;&quot;;</span><br><span class="line">   if(!fullShow)&#123;</span><br><span class="line">    /*Loading, please wait……|在此处设置显示样式*/</span><br><span class="line">    outString+=&quot;&lt;div style=&apos;color: #FF0000;font-size: 10pt;&apos;&gt;正在加载，请稍候……&lt;/div&gt;&quot;;</span><br><span class="line">    dataNode.innerHTML = outString;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">    outString+=&quot;&lt;!-- load start --&gt;&quot;;</span><br><span class="line">    outString+=&quot;&lt;div id=&apos;load&apos; style=&apos;position:absolute;z-index:10;top:expression(body.clientHeight/2-60);left:expression(body.clientWidth/2-110); height:120px;width:220px;margin-right: auto;margin-left: auto;text-align: center;color: #FF0000;font-size: 10pt;padding: 5px;line-height: 20px;background-color: #FFFFFF;border-top-width: 1px;border-right-width: 2px;border-bottom-width: 2px;border-left-width: 1px;border-top-style: inset;border-right-style: outset; border-bottom-style: outset;border-left-style: inset;border-top-color: #ECE9D8; border-right-color: #ECE9D8;border-bottom-color: #ECE9D8;border-left-color: #ECE9D8;&apos;&gt;&quot;;</span><br><span class="line">    outString+=&quot;  &lt;div id=&apos;loadLogo&apos; style=&apos;margin-top: 30px;margin-right: auto;margin-bottom: 20px;margin-left: auto;&apos;&gt;&lt;img src=&apos;Images/Wait.gif&apos; width=&apos;32&apos; height=&apos;32&apos; /&gt;&lt;/div&gt;&quot;;</span><br><span class="line">    outString+=&quot;  &lt;div id=&apos;loadTitle&apos; style=&apos;&apos;&gt;Loading, please wait……&lt;/div&gt; &quot;;</span><br><span class="line">    outString+=&quot;&lt;/div&gt;&quot;;</span><br><span class="line">    outString+=&quot;&lt;div id=&apos;loadMask&apos; style=&apos;position:absolute;z-index:1; top:0;left:0; width:expression(body.clientWidth); height:expression(body.clientHeight);background:#999999;filter:Alpha(opacity=60);&apos;&gt;&lt;/div&gt;&quot;;</span><br><span class="line">    outString+=&quot;&lt;!-- load end  --&gt;&quot;;</span><br><span class="line">    dataNode.innerHTML = outString;    </span><br><span class="line">   &#125; </span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> function getData(dataType,xmlHttp)&#123;</span><br><span class="line">     if(dataType==&quot;xml&quot;)&#123;</span><br><span class="line">    return xmlHttp.responseXML;</span><br><span class="line">  &#125;else if(dataType==&quot;body&quot;)&#123;</span><br><span class="line">    /*Bytes2Bstr在Charset.vbs中*/</span><br><span class="line">    return Bytes2Bstr(xmlHttp.responseBody);   </span><br><span class="line">  &#125;else if(dataType==&quot;stream&quot;)&#123;</span><br><span class="line">    return xmlHttp.responseStream;   </span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    return xmlHttp.responseText;   </span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> /*-----------------------------------*/ </span><br><span class="line">&#125;</span><br><span class="line">/*===========================================================================*/</span><br><span class="line">/*                                AjaxLoad end                               */ </span><br><span class="line">/*===========================================================================*/</span><br><span class="line">/*Charset.vbs文件内容：</span><br><span class="line">&apos;编码处理函数：解决XMLHTTP返回的中文乱码处理</span><br><span class="line">Function Bytes2Bstr(bodyStr) </span><br><span class="line"> strReturn = &quot;&quot; </span><br><span class="line"> For i = 1 To LenB(bodyStr) </span><br><span class="line">  ThisCharCode = AscB(MidB(bodyStr,i,1)) </span><br><span class="line">  If ThisCharCode &lt; &amp;H80 Then </span><br><span class="line">     strReturn = strReturn &amp; Chr(ThisCharCode) </span><br><span class="line">  Else </span><br><span class="line">     NextCharCode = AscB(MidB(bodyStr,i+1,1)) </span><br><span class="line">     strReturn = strReturn &amp; Chr(CLng(ThisCharCode) * &amp;H100 + CInt(NextCharCode)) </span><br><span class="line">     i = i + 1 </span><br><span class="line">  End If </span><br><span class="line"> Next </span><br><span class="line"> Bytes2Bstr = strReturn </span><br><span class="line">End Function</span><br><span class="line">*/</span><br><span class="line">/*---------------------------------------*/ </span><br><span class="line">/*             输出函数格式如下                                                        */</span><br><span class="line">/*---------------------------------------*/ </span><br><span class="line">function objPrint()&#123;</span><br><span class="line">  /*在此处格式化数据后，再返回格式化了的数据*/</span><br><span class="line">  //alert(&quot;执行了格式化哟&quot;)</span><br><span class="line">  return data;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">判断父页面函数是否存在</span><br><span class="line">if(typeof(opener.showLicenceList)==&apos;object&apos;)&#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typeof/">typeof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-instanceof和typeof的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/instanceof和typeof的区别/" class="article-date">
      <time datetime="2016-05-16T12:49:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/instanceof和typeof的区别/">instanceof和typeof的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>javascript instanceof,typeof的<a href="http://www.jb51.net/article/22717.htm" target="_blank" rel="external">区别</a></p>
<blockquote>
<p>区分string 与 String的[区别</p>
</blockquote>
<p>为什么结果会是false呢？<br> 代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt; </span><br><span class="line">var aColors = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]; </span><br><span class="line">alert(typeof aColors[0]); //output &quot;string&quot; </span><br><span class="line">alert(aColors[0] instanceof String); //output &quot;false&quot;; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>你要区分string 与 String的区别<br>aColors[0] 是 string值类型， 当然不是String的实例啦。参考下面代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var aColors = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;]; </span><br><span class="line">aColors[0]= new String(&quot;1&quot;) </span><br><span class="line">alert(typeof aColors[0]); //output &quot;Object&quot; </span><br><span class="line">alert(aColors[0] instanceof String); //output &quot;true&quot;;</span><br></pre></td></tr></table></figure></p>
<p>更多可以参考下面的文章:</p>
<p>instanceof 运算符<br>返回一个 Boolean 值，指出对象是否是特定类的一个实例。 </p>
<blockquote>
<p>result = object instanceof class </p>
</blockquote>
<p>参数<br>result<br>必选项。任意变量。<br>object<br>必选项。任意对象表达式。<br>class<br>必选项。任意已定义的对象类。 </p>
<ul>
<li><p>说明:<br>如果 object 是 class 的一个实例，则 instanceof 运算符返回 true。如果 object 不是指定类的一个实例，或者 object 是 null，则返回 false。<br>示例<br>下面的例子举例说明了 instanceof 运算符的用法。<br>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function objTest(obj)&#123; </span><br><span class="line">var i, t, s = &quot;&quot;; // 创建变量。 </span><br><span class="line">t = new Array(); // 创建一个数组。 </span><br><span class="line">t[&quot;Date&quot;] = Date; // 填充数组。 </span><br><span class="line">t[&quot;Object&quot;] = Object; </span><br><span class="line">t[&quot;Array&quot;] = Array; </span><br><span class="line">for (i in t) </span><br><span class="line">&#123; </span><br><span class="line">if (obj instanceof t[i]) // 检查 obj 的类。 </span><br><span class="line">&#123; </span><br><span class="line">s += &quot;obj is an instance of &quot; + i + &quot;\n&quot;; </span><br><span class="line">&#125; </span><br><span class="line">else </span><br><span class="line">&#123; </span><br><span class="line">s += &quot;obj is not an instance of &quot; + i + &quot;\n&quot;; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">return(s); // 返回字符串。 </span><br><span class="line">&#125; </span><br><span class="line">var obj = new Date(); </span><br><span class="line">document.write(objTest(obj));</span><br></pre></td></tr></table></figure>
</li>
<li><p>instanceof和typeof都能用来判断一个变量是否为空或是什么类型的变量。 </p>
</li>
<li><p>typeof用以获取一个变量的类型，typeof一般只能返回如下几个结果：number,boolean,string,function,object,undefined。我们可以使用typeof来获取一个变量是否存在，如if(typeof a!=”undefined”){}，而不要去使用if(a)因为如果a不存在（未声明）则会出错，对于Array,Null等特殊对象使用typeof 一律返回object，这正是typeof的局限性。 </p>
</li>
<li><p>如果我们希望获取一个对象是否是数组，或判断某个变量是否是某个对象的实例则要选择使用instanceof。instanceof用于判断一个变量是否某个对象的实例，如var a=new Array();alert(a instanceof Array);会返回true，同时alert(a instanceof Object)也会返回true;这是因为Array是object的子类。再如：function test(){};var a=new test();alert(a instanceof test)会返回true。 </p>
</li>
<li><p>谈到instanceof我们要多插入一个问题，就是function的arguments，我们大家也许都认为arguments是一个Array，但如果使用instaceof去测试会发现arguments不是一个Array对象，尽管看起来很像。 </p>
</li>
</ul>
<blockquote>
<p>另外：<br>测试 var a=new Array();if (a instanceof Object) alert(‘Y’);else alert(‘N’);<br>得’Y’<br>但 if (window instanceof Object) alert(‘Y’);else alert(‘N’);<br>得’N’</p>
</blockquote>
<p>所以，这里的instanceof测试的object是指js语法中的object，不是指dom模型对象。<br>使用typeof会有些区别<br>alert(typeof(window) 会得 object </p>
<p>年轻的时候，先少废话，多做事。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/instanceof-typeof/">instanceof/typeof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-instanceof与typeof" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/instanceof与typeof/" class="article-date">
      <time datetime="2016-05-16T12:49:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/instanceof与typeof/">instanceof与typeof</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>JS中typeof与instanceof的区别 <a href="http://blog.sina.com.cn/s/blog_532751d90100iv1r.html" target="_blank" rel="external">查看原网页转载▼</a></p>
<p>JavaScript 中 typeof 和 instanceof 常用来判断一个变量是否为空，或者是什么类型的。但它们之间还是有区别的：<br>typeof<br>typeof 是一个一元运算，放在一个运算数之前，运算数可以是任意类型。<br>它返回值是一个字符串，该字符串说明运算数的类型。typeof 一般只能返回如下几个结果：<br>number,boolean,string,function,object,undefined。我们可以使用 typeof 来获取一个变量是否存在，如 if(typeof a!=”undefined”){alert(“ok”)}，而不要去使用 if(a) 因为如果 a 不存在（未声明）则会出错，对于 Array,Null 等特殊对象使用 typeof 一律返回 object，这正是 typeof 的局限性。<br>网上的一个小例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</span><br><span class="line">&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;</span><br><span class="line">document.write (&quot;typeof(1): &quot;+typeof(1)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(NaN): &quot;+typeof(NaN)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(Number.MIN_VALUE): &quot;+typeof(Number.MIN_VALUE)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(Infinity): &quot;+typeof(Infinity)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(\&quot;123\&quot;): &quot;+typeof(&quot;123&quot;)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(true): &quot;+typeof(true)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(window): &quot;+typeof(window)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(Array()): &quot;+typeof(new Array())+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(function()&#123;&#125;): &quot;+typeof(function()&#123;&#125;)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(document): &quot;+typeof(document)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(null): &quot;+typeof(null)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(eval): &quot;+typeof(eval)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(Date): &quot;+typeof(Date)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(sss): &quot;+typeof(sss)+&quot;&lt;br&gt;&quot;);</span><br><span class="line">document.write (&quot;typeof(undefined): &quot;+typeof(undefined)+&quot;&lt;br&gt;&quot;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;javascript类型测试&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p> 查看效果</p>
<p>instanceof<br>instance：实例,例子<br>a instanceof b?alert(“true”):alert(“false”); //a是b的实例？真:假<br>instanceof 用于判断一个变量是否某个对象的实例，如 var a=new Array();alert(a instanceof Array); 会返回 true，同时 alert(a instanceof Object) 也会返回 true;这是因为 Array 是 object 的子类。再如：function test(){};var a=new test();alert(a instanceof test) 会返回<br>谈到 instanceof 我们要多插入一个问题，就是 function 的 arguments，我们大家也许都认为 arguments 是一个 Array，但如果使用 instaceof 去测试会发现 arguments 不是一个 Array 对象，尽管看起来很像。<br>另外：<br>测试 var a=new Array();if (a instanceof Object) alert(‘Y’);else alert(‘N’);<br>得’Y’<br>但 if (window instanceof Object) alert(‘Y’);else alert(‘N’);<br>得’N’<br>所以，这里的 instanceof 测试的 object 是指 js 语法中的 object，不是指 dom 模型对象。<br>使用 typeof 会有些区别<br>alert(typeof(window)) 会得 object</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/instanceof-typeof/">instanceof/typeof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-回调函数的概念及其使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/回调函数的概念及其使用/" class="article-date">
      <time datetime="2016-05-16T07:52:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/回调函数的概念及其使用/">回调函数的概念及其使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>回调函数的概念及其使用,<a href="http://www.cnblogs.com/swordzj/archive/2007/04/24/2034769.html" target="_blank" rel="external">出处</a><br> 1 什么是回调<br>软件模块之间总是存在着一定的接口，从调用方式上，可以把他们分为三类：同步调用、回调和异步调用。同步调用是一种阻塞式调用，调用方要等待对方执行完毕才返回，它是一种单向调用；回调是一种双向调用模式，也就是说，被调用方在接口被调用时也会调用对方的接口；异步调用是一种类似消息或事件的机制，不过它的调用方向刚好相反，接口的服务在收到某种讯息或发生某种事件时，会主动通知客户方（即调用客户方的接口）。回调和异步调用的关系非常紧密，通常我们使用回调来实现异步消息的注册，通过异步调用来实现消息的通知。同步调用是三者当中最简单的，而回调又常常是异步调用的基础，因此，下面我们着重讨论回调机制在不同软件架构中的实现。</p>
<p>对于不同类型的语言（如结构化语言和对象语言）、平台（Win32、JDK）或构架（CORBA、DCOM、WebService），客户和服务的交互除了同步方式以外，都需要具备一定的异步通知机制，让服务方（或接口提供方）在某些情况下能够主动通知客户，而回调是实现异步的一个最简捷的途径。</p>
<p>对于一般的结构化语言，可以通过回调函数来实现回调。回调函数也是一个函数或过程，不过它是一个由调用方自己实现，供被调用方使用的特殊函数。</p>
<p>在面向对象的语言中，回调则是通过接口或抽象类来实现的，我们把实现这种接口的类成为回调类，回调类的对象成为回调对象。对于象C++或Object Pascal这些兼容了过程特性的对象语言，不仅提供了回调对象、回调方法等特性，也能兼容过程语言的回调函数机制。</p>
<p>Windows平台的消息机制也可以看作是回调的一种应用，我们通过系统提供的接口注册消息处理函数（即回调函数），从而实现接收、处理消息的目的。由于Windows平台的API是用C语言来构建的，我们可以认为它也是回调函数的一个特例。</p>
<p>对于分布式组件代理体系CORBA，异步处理有多种方式，如回调、事件服务、通知服务等。事件服务和通知服务是CORBA用来处理异步消息的标准服务，他们主要负责消息的处理、派发、维护等工作。对一些简单的异步处理过程，我们可以通过回调机制来实现。</p>
<p>下面我们集中比较具有代表性的语言（C、Object Pascal）和架构（CORBA）来分析回调的实现方式、具体作用等。</p>
<p>2 过程语言中的回调（C）</p>
<p>2.1 函数指针</p>
<p>回调在C语言中是通过函数指针来实现的,通过将回调函数的地址传给被调函数从而实现回调。因此，要实现回调，必须首先定义函数指针，请看下面的例子：</p>
<p>void Func(char <em>s)；// 函数原型<br>void (</em>pFunc) (char *);//函数指针</p>
<p>可以看出，函数的定义和函数指针的定义非常类似。</p>
<p>一般的化，为了简化函数指针类型的变量定义，提高程序的可读性，我们需要把函数指针类型自定义一下。</p>
<p>typedef void(<em>pcb)(char </em>);</p>
<p>回调函数可以象普通函数一样被程序调用，但是只有它被当作参数传递给被调函数时才能称作回调函数。</p>
<p>被调函数的例子：</p>
<p>void GetCallBack(pcb callback)<br>{<br>/<em>do something</em>/<br>}<br>用户在调用上面的函数时，需要自己实现一个pcb类型的回调函数：<br>void fCallback(char <em>s)<br>{<br>/</em> do something */<br>}<br>然后，就可以直接把fCallback当作一个变量传递给GetCallBack,<br>GetCallBack（fCallback）;</p>
<p>如果赋了不同的值给该参数，那么调用者将调用不同地址的函数。赋值可以发生在运行时，这样使你能实现动态绑定。</p>
<p>回页首</p>
<p>2.2 参数传递规则</p>
<p>到目前为止，我们只讨论了函数指针及回调而没有去注意ANSI C/C++的编译器规范。许多编译器有几种调用规范。如在Visual C++中，可以在函数类型前加_cdecl，_stdcall或者_pascal来表示其调用规范（默认为_cdecl）。C++ Builder也支持_fastcall调用规范。调用规范影响编译器产生的给定函数名，参数传递的顺序（从右到左或从左到右），堆栈清理责任（调用者或者被调用者）以及参数传递机制（堆栈，CPU寄存器等）。</p>
<p>将调用规范看成是函数类型的一部分是很重要的；不能用不兼容的调用规范将地址赋值给函数指针。例如：</p>
<p>// 被调用函数是以int为参数，以int为返回值<br>__stdcall int callee(int); </p>
<p>// 调用函数以函数指针为参数<br>void caller( __cdecl int(*ptr)(int)); </p>
<p>// 在p中企图存储被调用函数地址的非法操作<br>__cdecl int(*p)(int) = callee; // 出错</p>
<p>指针p和callee()的类型不兼容，因为它们有不同的调用规范。因此不能将被调用者的地址赋值给指针p，尽管两者有相同的返回值和参数列</p>
<p>2.3 应用举例</p>
<p>C语言的标准库函数中很多地方就采用了回调函数来让用户定制处理过程。如常用的快速排序函数、二分搜索函数等。</p>
<p>快速排序函数原型：</p>
<p>void qsort(void <em>base, size_t nelem, size_t width, int (_USERENTRY </em>fcmp)(const void <em>, const void </em>));<br>二分搜索函数原型：<br>void <em>bsearch(const void </em>key, const void <em>base, size_t nelem,<br>                 size_t width, int (_USERENTRY </em>fcmp)(const void <em>, const void </em>));</p>
<p>其中fcmp就是一个回调函数的变量。</p>
<p>下面给出一个具体的例子：</p>
<p>#include <stdio.h></stdio.h></p>
<p>#include <stdlib.h></stdlib.h></p>
<p>int sort_function( const void <em>a, const void </em>b);<br>int list[5] = { 54, 21, 11, 67, 22 };</p>
<p>int main(void)<br>{<br>   int  x;</p>
<p>   qsort((void *)list, 5, sizeof(list[0]), sort_function);<br>   for (x = 0; x &lt; 5; x++)<br>      printf(“%i\n”, list[x]);<br>   return 0;<br>}</p>
<p>int sort_function( const void <em>a, const void </em>b)<br>{<br>   return <em>(int</em>)a-<em>(int</em>)b;<br>}</p>
<p>2.4 面向对象语言中的回调（Delphi）</p>
<p>Dephi与C++一样，为了保持与过程语言Pascal的兼容性，它在引入面向对象机制的同时，保留了以前的结构化特性。因此，对回调的实现，也有两种截然不同的模式，一种是结构化的函数回调模式，一种是面向对象的接口模式。</p>
<p>2.4.1 回调函数</p>
<p>回调函数类型定义：</p>
<p>type<br>   TCalcFunc=function (a:integer;b:integer):integer;</p>
<p>按照回调函数的格式自定义函数的实现，如</p>
<p>function Add(a:integer;b:integer):integer<br>begin<br>  result:=a+b;<br>end;<br>function Sub(a:integer;b:integer):integer<br>begin<br>  result:=a-b;<br>end;</p>
<p>回调的使用</p>
<p>function Calc(calc:TcalcFunc;a:integer;b:integer):integer</p>
<p>下面，我们就可以在我们的程序里按照需要调用这两个函数了</p>
<p>c:=calc(add,a,b);//c=a+b<br>c:=calc(sub,a,b);//c=a-b</p>
<p>2.4.2 回调对象</p>
<p>什么叫回调对象呢，它具体用在哪些场合？首先，让我们把它与回调函数对比一下，回调函数是一个定义了函数的原型，函数体则交由第三方来实现的一种动态应用模式。要实现一个回调函数，我们必须明确知道几点：该函数需要那些参数，返回什么类型的值。同样，一个回调对象也是一个定义了对象接口，但是没有具体实现的抽象类（即接口）。要实现一个回调对象，我们必须知道：它需要实现哪些方法，每个方法中有哪些参数，该方法需要放回什么值。</p>
<p>因此，在回调对象这种应用模式中，我们会用到接口。接口可以理解成一个定义好了但是没有实现的类，它只能通过继承的方式被别的类实现。Delphi中的接口和COM接口类似，所有的接口都继承与IInterface（等同于IUnknow），并且要实现三个基本的方法QueryInterface, _AddRef, 和_Release。</p>
<p>定义一个接口 </p>
<p>type IShape=interface(IInterface)<br>    procedure Draw;<br>end</p>
<p>实现回调类 </p>
<p>type TRect=class(TObject,IShape)<br>    protected<br>      function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;<br>      function _AddRef: Integer; stdcall;<br>function _Release: Integer; stdcall;<br>    public<br>      procedure Draw;<br>end;</p>
<p>type TRound=class(TObject,IShape)<br>    protected<br>      function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;<br>      function _AddRef: Integer; stdcall;<br>function _Release: Integer; stdcall;<br>    public<br>      procedure Draw;<br>end;</p>
<p>使用回调对象 </p>
<p>procedure MyDraw(shape:IShape);<br>var<br>shape:IShape;<br>begin<br>shape.Draw;<br>end;</p>
<p>如果传入的对象为TRect，那么画矩形；如果为TRound，那么就为圆形。用户也可以按照自己的意图来实现IShape接口，画出自己的图形：</p>
<p>MyDraw(Trect.Create);<br>MyDraw(Tround.Create);</p>
<p>2.4.3 回调方法</p>
<p>回调方法(Callback Method)可以看作是回调对象的一部分，Delphi对windows消息的封装就采用了回调方法这个概念。在有些场合，我们不需要按照给定的要求实现整个对象，而只要实现其中的一个方法就可以了，这是我们就会用到回调方法。</p>
<p>回调方法的定义如下：</p>
<p>TNotifyEvent = procedure(Sender: TObject) of object;<br>TMyEvent=procedure(Sender:Tobject;EventId:Integer) of object;</p>
<p>TNotifyEvent 是Delphi中最常用的回调方法，窗体、控件的很多事件，如单击事件、关闭事件等都是采用了TnotifyEvent。回调方法的变量一般通过事件属性的方式来定义，如TCustomForm的创建事件的定义：</p>
<p>property OnCreate: TNotifyEvent read FOnCreate write FOnCreate stored IsForm;</p>
<p>我们通过给事件属性变量赋值就可以定制事件处理器。</p>
<p>用户定义对象（包含回调方法的对象）：</p>
<p>type TCallback=Class<br>    procedure ClickFunc(sender:TObject);<br>end;<br>procedure Tcallback.ClickFunc(sender:TObject);<br>begin<br>  showmessage(‘the caller is clicked!’);<br>end;</p>
<p>窗体对象：</p>
<p>type TCustomFrm=class(TForm)<br>  public<br>    procedure RegisterClickFunc(cb:procedure(sender:Tobject) of object);<br>end;</p>
<p>procedure TcustomFrm..RegisterClickFunc(cb:TNotifyEvent);<br>begin<br>  self.OnClick=cb;<br>end;</p>
<p>使用方法：</p>
<p>var<br>  frm:TcustomFrm;<br>begin<br>  frm:=TcustomFrm.Create(Application);<br>  frm.RegisterClickFunc(Tcallback.Create().ClickFunc);<br>end;</p>
<p>3 回调在分布式计算中的应用（CORBA）</p>
<p>3.1 回调接口模型</p>
<p>CORBA的消息传递机制有很多种，比如回调接口、事件服务和通知服务等。回调接口的原理很简单，CORBA客户和服务器都具有双重角色，即充当服务器也是客户客户。</p>
<p>回调接口的反向调用与正向调用往往是同时进行的，如果服务端多次调用该回调接口，那么这个回调接口就变成异步接口了。因此，回调接口在CORBA中常常充当事件注册的用途，客户端调用该注册函数时，客户函数就是回调函数，在此后的调用中，由于不需要客户端的主动参与，该函数就是实现了一种异步机制。</p>
<p>从CORBA规范我们知道，一个CORBA接口在服务端和客户端有不同的表现形式，在客户端一般使用桩（Stub）文件，服务端则用到框架（Skeleton）文件，接口的规格采用IDL来定义。而回调函数的引入，使得服务端和客户端都需要实现一定的桩和框架。下面是回调接口的实现模型：</p>
<p>3.1.1 范例</p>
<p>下面给出了一个使用回调的接口文件，服务端需要实现Server接口的框架，客户端需要实现CallBack的框架：</p>
<p>module cb<br>{<br>    interface CallBack;<br>    interface Server;</p>
<p>interface CallBack<br>{<br>        void OnEvent(in long Source,in long msg);<br>};<br>      interface Server<br>{<br>        long RegisterCB(in CallBack cb);<br>        void UnRegisterCB(in long hCb);<br>};<br>};</p>
<p>客户端首先通过同步方式调用服务端的接口RegistCB，用来注册回调接口CallBack。服务端收到该请求以后，就会保留该接口引用，如果发生某种事件需要向客户端通知的时候就通过该引用调用客户方的OnEvent函数，以便对方及时处理。</p>
<p>分类: 程序设计</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/函数/">函数</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-js中typeof介绍" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/js中typeof介绍/" class="article-date">
      <time datetime="2016-05-16T02:49:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/js中typeof介绍/">js中typeof介绍</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://blog.163.com/xiao_mege/blog/static/7294275320109131035427/" target="_blank" rel="external">转载</a></p>
<ul>
<li>经常会在js里用到数组,比如 多个名字相同的input, 若是动态生成的, 提交时就需要判断其是否是数组.</li>
</ul>
<p>if(document.mylist.length != “undefined” ) {} 这个用法有误.</p>
<p>正确的是 if( typeof(document.mylist.length) != “undefined” ) {}</p>
<p>或 if( !isNaN(document.mylist.length) ) {}</p>
<p>typeof的运算数未定义,返回的就是 “undefined”.</p>
<p>运算数为数字 typeof(x) = “number”</p>
<p>字符串 typeof(x) = “string”</p>
<p>布尔值 typeof(x) = “boolean”</p>
<p>对象,数组和null typeof(x) = “object”</p>
<p>函数 typeof(x) = “function”</p>
<p>typeof 运算符返回一个用来表示表达式的数据类型的字符串。<br>可能的字符串有：”number”、”string”、”boolean”、”object”、”function” 和 “undefined”。<br>如：<br>alert(typeof (123));//typeof(123)返回”number”<br>alert(typeof (“123”));//typeof(“123”)返回”string”</p>
<ul>
<li>typeof 运算符<br>返回一个用来表示表达式的数据类型的字符串。</li>
</ul>
<p>typeof[()expression[]] ;</p>
<p>expression 参数是需要查找类型信息的任意表达式。</p>
<p>说明<br>typeof 运算符把类型信息当作字符串返回。typeof 返回值有六种可能： “number,” “string,” “boolean,” “object,” “function,” 和 “undefined.”</p>
<p>typeof 语法中的圆括号是可选项。 </p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typeof/">typeof</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-js产生undefined的情况" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/js产生undefined的情况/" class="article-date">
      <time datetime="2016-05-16T01:49:32.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/js产生undefined的情况/">js产生undefined的情况</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>js 产生undefined的情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">var outObj = &#123; </span><br><span class="line"> type :&quot;java&quot;</span><br><span class="line">&#125;</span><br><span class="line">function innerM()&#123;</span><br><span class="line"> var p;</span><br><span class="line"> alert(p);//undefined</span><br><span class="line"> alert(&quot;k:&quot;+k);//error--innerObj未定义</span><br><span class="line"> alert(outObj.jack);//undefined</span><br><span class="line"> alert(innerObj.jack);//error--innerObj未定义</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">innerM();</span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    alert(typeof(false) === &apos;boolean&apos;); //true</span><br><span class="line">    alert(typeof(0) === &apos;number&apos;); //true</span><br><span class="line">    alert(typeof(&quot;&quot;) === &apos;string&apos;); //true</span><br><span class="line">    alert(typeof(null) === &apos;object&apos;); //true</span><br><span class="line">    alert(typeof undefined === &apos;undefined&apos;); //true</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    alert(false == undefined); //false</span><br><span class="line">    alert(false == null); //false </span><br><span class="line">    alert(false == 0); //true</span><br><span class="line">    alert(false == &quot;&quot;); //true</span><br><span class="line">    alert(null == undefined); //true</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    alert(false.toString());    // &quot;false&quot;</span><br><span class="line">    alert(&quot;&quot;.charAt(0));        // &quot;&quot;</span><br><span class="line">    alert((0).toExponential(10));  // 0.0000000e+0</span><br><span class="line">    alert(undefined.toString());    // throw exception &quot;undefined has no properties&quot;</span><br><span class="line">    alert(null.toString());             // &quot;null has no properties&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    alert(String(false));    // &quot;false&quot;</span><br><span class="line">    alert(String(&quot;&quot;));        // &quot;&quot;</span><br><span class="line">    alert(String(0));  // 0.0000000e+0</span><br><span class="line">    alert(String(undefined));    // &quot;undefined&quot;</span><br><span class="line">    alert(String(null));             // &quot;null&quot;</span><br><span class="line"> </span><br><span class="line">    alert(decodeURI(undefined));// &quot;undefined&quot;</span><br><span class="line">    alert(decodeURI(null));// &quot;null&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">//假值和空值作为if条件分支</span><br><span class="line">//假值和空值有一个共性，那就是在 作为if的条件分支时，均被视为false ；应用&quot;!&quot;操作之后得到的均为true。</span><br><span class="line">//这是因为，这几个对象均被视为各自类型中的无效值或空值。因此if分支中这些对象均被视为false对待。如下示例代码：</span><br><span class="line">    var ar = [undefined,false,0,&quot;&quot;,null];</span><br><span class="line">    for(var i = 0,len = ar.length; i &lt; len; i++)&#123;</span><br><span class="line">        if(ar[i])&#123;</span><br><span class="line">            alert(&quot;你不应该看到此对话框!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">//undefined和null对象无非是两个特殊对象，undefined表示无效对象，null表示空对象。</span><br><span class="line">//如果变量显式或者隐式（由Javascript引擎进行赋值）地被赋予了undefined，</span><br><span class="line">//那么代表了此变量未被定义，如果被赋予null值，则代表此变量被初始化为空值。</span><br><span class="line">//在Javascript中，变量是通过var声明，=赋值符进行定义（初始化变量所指向的对象）。</span><br><span class="line">//当然，如果声明一个全局变量（作为window属性）可以不使用var关键字。变量可以在声明的同时进行定义。</span><br><span class="line">//变量如果声明了但是没有初始化，那么Javascript引擎会将此变量自动指向undefined对象。</span><br><span class="line">//这里需要注意，我们在上面引用window.abcd时，弹出的是undefined；而直接引用abcd变量时，却抛出了一个异常。</span><br><span class="line">//这是由于Javascript引擎对于没有显式指定对象链的变量，会尝试从最近的作用域开始查找变量，</span><br><span class="line">//查找失败，则退到父级作用链进行查找。如果均查找失败，则抛出&quot;变量未定义&quot;的异常。</span><br><span class="line"> </span><br><span class="line">    var undefinedVariable,nullVariable = null;</span><br><span class="line">    alert(undefinedVariable); // &quot;undefined&quot;</span><br><span class="line">    alert(window.undefinedVariable);        // &quot;undefined&quot;</span><br><span class="line">    alert(window.abcd);        // &quot;undefined&quot;</span><br><span class="line">    alert(nullVariable);          // &quot;null&quot;</span><br><span class="line">    alert(abcd);                    // throw exception &quot;abcd is not defined&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">//这两个值在进行数字运算的时候也有不同。</span><br><span class="line">    alert(1+undefined);    // &quot;NaN&quot;</span><br><span class="line">    alert(1+null);             // &quot;1&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">alert(&quot;!undefined......&quot; + (!undefined));</span><br><span class="line">alert(&quot;undefined==false......&quot; + (undefined==false));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/undefined/">undefined</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-alert与console.log区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/15/alert与console.log区别/" class="article-date">
      <time datetime="2016-05-15T11:49:32.000Z" itemprop="datePublished">2016-05-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/15/alert与console.log区别/">alert与console.log区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>简单的说alert 是弹出提示而console.log是在调试工具里打日志，下面具体给大家列出alert()与console.log()的不同点，<br>[1]alert()</p>
<blockquote>
<p>[1.1]有阻塞作用，不点击确定，后续代码无法继续执行<br>    [1.2]alert()只能输出string,如果alert输出的是对象会自动调用toString()方法<br>        e.g. alert([1,2,3]);//‘1,2,3’<br>    [1.3]alert不支持多个参数的写法,只能输出第一个值<br>        e.g. alert(1,2,3);//1</p>
</blockquote>
<p>[2]console.log()</p>
<blockquote>
<p>[2.1]在打印台输出<br>    [2.2]可以打印任何类型的数据<br>        e.g. console.log([1,2,3]);//[1,2,3]<br>    [2.3]支持多个参数的写法<br>        e.g. console.log(1,2,3)// 1 2 3 </p>
</blockquote>
<p>原型链中toString()方法输出alert()和console.log()得到不同的结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">var a = [1,2,3];</span><br><span class="line">alert(a); //1,2,3</span><br><span class="line">Array.prototype.toString = function()&#123;</span><br><span class="line">  return &apos;str&apos;;</span><br><span class="line">&#125;</span><br><span class="line">alert(a); //str</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>和<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">var a = [1,2,3];</span><br><span class="line">console.log(a); //[1,2,3]</span><br><span class="line">Array.prototype.toString = function()&#123;</span><br><span class="line">  return &apos;str&apos;;</span><br><span class="line">&#125;</span><br><span class="line">console.log(a); //[1,2,3]</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码输出的结果不一样的原因如下：<br>console.log() 可以打印任何类型的数据。而 alert() 只能输出string，如果alert输出是对象会自动调用 toString() 方法。如果想 console.log() 输出的与alert相同，需要调用 toString() :</p>
<blockquote>
<p>console.log(obj. toString() );</p>
</blockquote>
<p>和自己写不写toString()完全没有关系,你自己写的那个toStrong() 只是重写了对象默认的toString()方法。<br>如果你没有重写toString()方法时，alert() 也会调用默认的。<br>还是那句话： console.log() 可以打印任何类型的数据，并会因为你自己重写了toString()，而调用。如果log() 也只能打印string的话，那么console 的这个log 方法就没有存在的必要了。<br>主要是俩个函数所期望的数据类型不一样。alert()期望的数据类型是string型的。这就是相当于要把对象用在string语境中，自然就会做出相应的转换。console.log()显然是可以接受任何类型的数据。那他就不用转换。也就是说不用放在string语境中。那OBJ自然是他一开始的数据类型。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a><a class="article-category-link" href="/categories/技术/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/console-log/">console.log()</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-css3和传统方法实现元素的绝对居中" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/15/css3和传统方法实现元素的绝对居中/" class="article-date">
      <time datetime="2016-05-15T07:49:32.000Z" itemprop="datePublished">2016-05-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/15/css3和传统方法实现元素的绝对居中/">css3、定位实现元素的绝对居中</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><a href="http://www.cnblogs.com/lxin/p/3518716.html" target="_blank" rel="external">css中实现元素的绝对居中</a></p>
<p>方法比较简单，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.node&#123;</span><br><span class="line">    width : 300px;</span><br><span class="line">    height : 400px;</span><br><span class="line">    position : absolute;</span><br><span class="line">    left : 50%;</span><br><span class="line">    top : 50%;</span><br><span class="line">    margin-left : -150px; /*一半的高度*/</span><br><span class="line">    margin-top : -200px;  /*一半的宽度*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样的用法网上很多，我那时候也是只知其然不知其所以然，margin负值是一方面，这里要说的是left和top的百分比。</p>
<p>先看下w3c里面对这个概念的介绍：</p>
<p><img src="/img/others/141122307834.png" alt=""></p>
<p>其实这里也没有清楚，这里left和top的百分比，我觉得应该标尺应该是父元素，也就是分别是 left的50% 其实是父元素宽度的50%,top值为50%,也是父元素高度的50%,</p>
<p>并且这个值是可以实时计算的，改变浏览器窗口的大小时，会发现元素始终居中，就是实时计算的结果。</p>
<p>了解了这一点就简单了。</p>
<p>画个图说明一下：</p>
<p><img src="/img/others/141137147360.png" alt=""></p>
<p>通过postion的定位，现在子元素被定到了黄色区域，这个时候，通过margin的负值，就可以移到绝对居中的位置了</p>
<p>除了这种常用的居中方法外，<strong>还有一种css3的方法</strong>，也比较好理解，是当前方法的一个改进，不需要知道元素的宽和高。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.node &#123;</span><br><span class="line">    width: 600px; height: 400px;</span><br><span class="line">    position: absolute; left: 50%; top: 50%;</span><br><span class="line">    transform: translate(-50%, -50%); </span><br><span class="line">   /* 50%为自身尺寸的一半 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个用法主要是用到css3中的transform,这里就不多介绍了，但是在网上，看到了还有一种方式，用的是margin:auto;我觉得比较好玩。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.node &#123;</span><br><span class="line">    width: 600px;</span><br><span class="line">    height: 400px;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0; </span><br><span class="line">    top: 0; </span><br><span class="line">    right: 0; </span><br><span class="line">    bottom: 0;</span><br><span class="line">    margin: auto;    /* 有了这个就自动居中了 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有点神奇</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/方法-实例/">方法/实例</a><a class="article-category-link" href="/categories/方法-实例/javascript/">javascript</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css3/">css3</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/11/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/13/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 findmoon
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >外地到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>