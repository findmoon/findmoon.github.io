<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    分类: 技术
  
</title>

<meta name="description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta property="og:type" content="website">
<meta property="og:title" content="findmoon-白色蜗牛">
<meta property="og:url" content="//findmoon.github.io/index.html/categories/技术/page/5/index.html">
<meta property="og:site_name" content="findmoon-白色蜗牛">
<meta property="og:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="findmoon-白色蜗牛">
<meta name="twitter:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">




  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">findmoon-白色蜗牛</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">findmoon-白色蜗牛</a></h1>
    
      <p class="subtitle">
        一个试图专注于自身的成长者
      </p>
    
    <div class="info">
      <div class="content">
        
          <div class="description">人生是一场不断的转换，我们总是不断地试着所向披靡</div>
        
        
          <div class="author">findmoon</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="http://i1.piimg.com/567571/ef24dee191051cd4.jpg"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">分类</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">134</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/方法-实例/">方法/实例</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">10</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">标签</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFC/">BFC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backbone/">Backbone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS3动画/">CSS3动画</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS解析域名/">DNS解析域名</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOCTYPE/">DOCTYPE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MV模式/">MV模式</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mocha/">Mocha</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-UDP/">TCP/UDP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP三次握手/">TCP三次握手</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/">TDD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UNICODE-ASCII/">UNICODE/ASCII</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animate/">animate()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animate动画队列/">animate动画队列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/background-image/">background-image</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/border/">border</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/border图形/">border图形</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/box-shadow/">box-shadow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/console-log/">console.log()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css属性/">css属性</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css样式/">css样式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deferred/">deferred</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/delete/">delete</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/first-child/">first-child</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/first-of-type/">first-of-type</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/float/">float</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/font-face/">font-face</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/form表单/">form表单</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get/">get</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitbash/">gitbash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git错误/">git错误</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hack/">hack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haslayout/">haslayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http状态码/">http状态码</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inline-block/">inline-block</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/input/">input</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/instanceof/">instanceof</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/instanceof-typeof/">instanceof/typeof</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js严格模式/">js严格模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js加载/">js加载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js模板引擎/">js模板引擎</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/list-style/">list-style</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mock/">mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/offset/">offset()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/overflow/">overflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position/">position</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position文档流/">position文档流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scopechain/">scopechain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stopImmediatePropagation/">stopImmediatePropagation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stringify/">stringify</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typeof/">typeof</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/undefined/">undefined</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/url加载/">url加载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zoom/">zoom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码书写/">代码书写</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/函数/">函数</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/列表/">列表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动画animation/">动画animation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/变量/">变量</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同源跨域/">同源跨域</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字面量/">字面量</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/库与架构/">库与架构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学函数/">数学函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据包组装/">数据包组装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/方法/">方法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/标记语言/">标记语言</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模块化编程/">模块化编程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/立即执行函数/">立即执行函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简历/">简历</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站访问/">网站访问</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/获取路径/">获取路径</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/行内元素/">行内元素</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语法/">语法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域请求/">跨域请求</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域请求处理方法/">跨域请求处理方法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择器/">选择器</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">归档</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">162</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
            
              <li>
                <a href="/work" title="work">work</a>
              </li>
            
          
            
              <li>
                <a href="/about" title="about">about</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="http://findmoon.github.io/" title="findmoon" target="_blank" rel="external">findmoon</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/findmoon/findmoon.github.io" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <h1>技术</h1>


  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/从输入URL到页面加载完成的过程-DNS解析域名过程/" >
  从输入URL到页面加载完成的过程-DNS解析域名过程
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/从输入URL到页面加载完成的过程-DNS解析域名过程/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网站/">网站</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DNS解析域名/">DNS解析域名</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h3 id="从输入URL到页面加载完成的过程-DNS解析域名过程"><a href="#从输入URL到页面加载完成的过程-DNS解析域名过程" class="headerlink" title="从输入URL到页面加载完成的过程-DNS解析域名过程"></a>从输入URL到页面加载完成的过程-DNS解析域名过程</h3><p><a href="http://my.oschina.net/xiaotian120/blog/268711?p=%7B%7BcurrentPage-1%7D%7D" target="_blank" rel="external">原文链接</a></p>
<p>当我们输入一个url，比如为：<a href="http://my.oschina.net/u/128568/blog，浏览器会解析这个url分成三部分，域名：my.oschina.net，端口：80，请求资源：/u/128568/blog。下面给出浏览器查找域名对应IP的过程，域名为my.oschina.net：" target="_blank" rel="external">http://my.oschina.net/u/128568/blog，浏览器会解析这个url分成三部分，域名：my.oschina.net，端口：80，请求资源：/u/128568/blog。下面给出浏览器查找域名对应IP的过程，域名为my.oschina.net：</a></p>
<blockquote>
<p>1、浏览器会缓存DNS记录一段时间。 有趣的是，操作系统没有告诉浏览器储存DNS记录的时间，这样不同浏览器会储存个自固定的一个时间（2分钟到30分钟不等）</p>
<p>2、操作系统检查自己本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。</p>
<p>3、如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析</p>
<p>4、如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器（ISP的DNS），在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性</p>
<p>5、如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性</p>
<p>6、如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至 “根DNS服务器”，“根DNS服务器”收到请求后会判断这个域名(.net)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.net域的这台服务器。这台负责.net域的服务器收到请求后，如果自己无法解析，它就会找一个管理.net域的下一级DNS服务器地址(oschina.net)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找oschina.net域服务器，重复上面的动作，进行查询，直至找到my.oschina.net主机</p>
<p>7、如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机</p>
</blockquote>
<p>看下解析过程：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">➜ /Users/zyj &gt;dig +trace my.oschina.net</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; +trace my.oschina.net</span><br><span class="line">;; global options: +cmd</span><br><span class="line">.			191557	IN	NS	e.root-servers.net.</span><br><span class="line">.			191557	IN	NS	i.root-servers.net.</span><br><span class="line">.			191557	IN	NS	a.root-servers.net.</span><br><span class="line">.			191557	IN	NS	k.root-servers.net.</span><br><span class="line">.			191557	IN	NS	g.root-servers.net.</span><br><span class="line">.			191557	IN	NS	j.root-servers.net.</span><br><span class="line">.			191557	IN	NS	h.root-servers.net.</span><br><span class="line">.			191557	IN	NS	c.root-servers.net.</span><br><span class="line">.			191557	IN	NS	l.root-servers.net.</span><br><span class="line">.			191557	IN	NS	f.root-servers.net.</span><br><span class="line">.			191557	IN	NS	d.root-servers.net.</span><br><span class="line">.			191557	IN	NS	b.root-servers.net.</span><br><span class="line">.			191557	IN	NS	m.root-servers.net.</span><br><span class="line">;; Received 228 bytes from 114.114.114.114#53(114.114.114.114) in 39 ms</span><br><span class="line"></span><br><span class="line">net.			172800	IN	NS	m.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	l.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	k.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	j.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	i.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	h.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	g.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	f.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	e.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	d.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	c.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	b.gtld-servers.net.</span><br><span class="line">net.			172800	IN	NS	a.gtld-servers.net.</span><br><span class="line">;; Received 489 bytes from 198.41.0.4#53(198.41.0.4) in 136 ms</span><br><span class="line"></span><br><span class="line">oschina.net.		172800	IN	NS	ns1.dnsv2.com.</span><br><span class="line">oschina.net.		172800	IN	NS	ns2.dnsv2.com.</span><br><span class="line">;; Received 205 bytes from 192.52.178.30#53(192.52.178.30) in 558 ms</span><br><span class="line"></span><br><span class="line">my.oschina.net.		86400	IN	CNAME	www.oschina.net.</span><br><span class="line">oschina.net.		7200	IN	NS	ns1.dnsv2.com.</span><br><span class="line">oschina.net.		7200	IN	NS	ns2.dnsv2.com.</span><br><span class="line">;; Received 115 bytes from 183.60.59.230#53(183.60.59.230) in 15 ms</span><br></pre></td></tr></table></figure></p>
<p>DNS有一点令人担忧，这就是像www.taobao.com这样的整个域名看上去只是对应一个单独的IP地址，那么三个IP肯定对于大访问量和不同地域的访问来说就会有较大的延迟。还好，有几种方法可以消除这个瓶颈：</p>
<ul>
<li><p><a href="http://baike.baidu.com/view/1527368.htm" target="_blank" rel="external">循环DNS</a> 是DNS查找时返回多个IP时的解决方案。举例来说，taobao.com实际上就对应了多个IP地址。</p>
</li>
<li><p><a href="http://baike.baidu.com/view/486970.htm" target="_blank" rel="external">负载平衡器</a> 是以一个特定IP地址进行侦听并将网络请求转发到集群服务器上的硬件设备。 一些大型的站点一般都会使用这种昂贵的高性能负载平衡器。</p>
</li>
<li><p>地理 DNS 根据用户所处的地理位置，通过把域名映射到多个不同的IP地址提高可扩展性。这样不同的服务器不能够更新同步状态，但映射静态内容的话非常好。</p>
</li>
<li><p><a href="http://baike.baidu.com/view/1398775.htm" target="_blank" rel="external">Anycast</a> 是一个IP地址映射多个物理主机的路由技术。 美中不足，Anycast与TCP协议适应的不是很好，所以很少应用在那些方案中。</p>
</li>
</ul>
<p>大多数DNS服务器使用Anycast来获得高效低延迟的DNS查找。</p>
<p>最后给出一个查询DNS过程的图：<br><img src="/img/php/131326_65YM_128568.png" alt=""></p>
<p> 最终获取的域名对应IP为112.124.5.74，此时浏览器发起向112.124.5.74的请求，端口为80，请求资源为/u/128568/blog，发送一条HTTP GET的报文，下面看下浏览器请求的信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Remote Address:112.124.5.74:80</span><br><span class="line">Request URL:http://my.oschina.net/u/128568/blog</span><br><span class="line">Request Method:GET</span><br><span class="line">Status Code:200 OK</span><br><span class="line"></span><br><span class="line">#请求头信息</span><br><span class="line">Request Headers</span><br><span class="line">Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span><br><span class="line">Accept-Encoding:gzip,deflate,sdch</span><br><span class="line">Accept-Language:zh-CN,zh;q=0.8,en;q=0.6</span><br><span class="line">Connection:keep-alive</span><br><span class="line">Cookie:</span><br><span class="line">oscid=Zka95GnBtcz%2FTWwBZdIK1f%2BrZzKNNUN0vu5av2CocDrEpbLcUPBTht%2FIFGWopqXUjIysP943EaQtn4%2FJdlcX%2FOW65EUP%2Fgo7fzPdxBwqLALbq7SVBQoTFw%3D%3D</span><br><span class="line">Host:my.oschina.net</span><br><span class="line">User-Agent:</span><br><span class="line">Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.114 Safari/537.36</span><br><span class="line"></span><br><span class="line">#响应头信息</span><br><span class="line">Response Headers</span><br><span class="line">Cache-Control:must-revalidate, no-cache, private</span><br><span class="line">Connection:keep-alive</span><br><span class="line">Content-Encoding:gzip</span><br><span class="line">Content-Type:text/html;charset=UTF-8</span><br><span class="line">Date:Sun, 25 May 2014 05:23:43 GMT</span><br><span class="line">Expires:Sun, 1 Jan 2000 01:00:00 GMT</span><br><span class="line">Pragma:no-cache</span><br><span class="line">Server:Tengine/1.4.6</span><br><span class="line">Transfer-Encoding:chunked</span><br><span class="line">Vary:Accept-Encoding</span><br></pre></td></tr></table></figure>
<p>从请求和响应可以看到很多信息，比如使用GET，响应为200，传输使用了压缩gzip等等，需要说明的是最后这个Connection:keep-alive，是为了兼容HTTP1.0设置的，用来告诉服务器使用持久连接。</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/以Apache服务器、php语言为例详解动态网站的访问过程/" >
  以Apache服务器、php语言为例详解动态网站的访问过程
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/以Apache服务器、php语言为例详解动态网站的访问过程/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网站/">网站</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网站访问/">网站访问</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="以Apache服务器、php语言为例详解动态网站的访问过程"><a href="#以Apache服务器、php语言为例详解动态网站的访问过程" class="headerlink" title="以Apache服务器、php语言为例详解动态网站的访问过程"></a>以Apache服务器、php语言为例详解动态网站的访问过程</h2><p><a href="http://www.chinaz.com/web/2013/0216/292366.shtml" target="_blank" rel="external">原文链接</a></p>
<ul>
<li>网站页面主要分为静态页面和动态页面，纯静态页面组成的网站现在相对比较少见，大型网站一般使用的是动态网站建站技术，还有一部分网站是静态网页与动态网页共存，本文以Apache服务器、php语言为例，详解动态网站的访问过程，下面直接切入本文主题。</li>
</ul>
<p><img src="/img/php/1360998916547.jpg" alt=""></p>
<h3 id="（1）用户端访问服务器端的html文件"><a href="#（1）用户端访问服务器端的html文件" class="headerlink" title="（1）用户端访问服务器端的html文件"></a>（1）用户端访问服务器端的html文件</h3><h4 id="S1：通过本机配置好的DNS域名服务器地址寻找DNS服务器，将网站URL中的Web主机域名解析为Web服务器所在的Linux操作系统（Apache通常与Linux操作系统组合使用）中对应的IP地址。"><a href="#S1：通过本机配置好的DNS域名服务器地址寻找DNS服务器，将网站URL中的Web主机域名解析为Web服务器所在的Linux操作系统（Apache通常与Linux操作系统组合使用）中对应的IP地址。" class="headerlink" title="S1：通过本机配置好的DNS域名服务器地址寻找DNS服务器，将网站URL中的Web主机域名解析为Web服务器所在的Linux操作系统（Apache通常与Linux操作系统组合使用）中对应的IP地址。"></a>S1：通过本机配置好的DNS域名服务器地址寻找DNS服务器，将网站URL中的Web主机域名解析为Web服务器所在的Linux操作系统（Apache通常与Linux操作系统组合使用）中对应的IP地址。</h4><h4 id="S2：通过HTTP协议（超文本传输协议）去连接上述IP地址的服务器系统，通过默认80端口（默认的端口是80，也有其他端口，输入URL时一般不用输入端口）请求Apache服务器上相应目录下的html文件（如index-htm）。"><a href="#S2：通过HTTP协议（超文本传输协议）去连接上述IP地址的服务器系统，通过默认80端口（默认的端口是80，也有其他端口，输入URL时一般不用输入端口）请求Apache服务器上相应目录下的html文件（如index-htm）。" class="headerlink" title="S2：通过HTTP协议（超文本传输协议）去连接上述IP地址的服务器系统，通过默认80端口（默认的端口是80，也有其他端口，输入URL时一般不用输入端口）请求Apache服务器上相应目录下的html文件（如index.htm）。"></a>S2：通过HTTP协议（超文本传输协议）去连接上述IP地址的服务器系统，通过默认80端口（默认的端口是80，也有其他端口，输入URL时一般不用输入端口）请求Apache服务器上相应目录下的html文件（如index.htm）。</h4><h4 id="S3：Apache服务器收到用户的访问请求后，在它管理的文档目录中找到并打开相应的html文件（如index-htm），将文件内容响应给客户端浏览器（即用户）。"><a href="#S3：Apache服务器收到用户的访问请求后，在它管理的文档目录中找到并打开相应的html文件（如index-htm），将文件内容响应给客户端浏览器（即用户）。" class="headerlink" title="S3：Apache服务器收到用户的访问请求后，在它管理的文档目录中找到并打开相应的html文件（如index.htm），将文件内容响应给客户端浏览器（即用户）。"></a>S3：Apache服务器收到用户的访问请求后，在它管理的文档目录中找到并打开相应的html文件（如index.htm），将文件内容响应给客户端浏览器（即用户）。</h4><h4 id="S4：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来（由于不同的浏览器对于代码的解读规则会不一样，所以不同浏览器对于相同的网页呈现的最终页面效果会有所差异）。"><a href="#S4：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来（由于不同的浏览器对于代码的解读规则会不一样，所以不同浏览器对于相同的网页呈现的最终页面效果会有所差异）。" class="headerlink" title="S4：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来（由于不同的浏览器对于代码的解读规则会不一样，所以不同浏览器对于相同的网页呈现的最终页面效果会有所差异）。"></a>S4：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来（由于不同的浏览器对于代码的解读规则会不一样，所以不同浏览器对于相同的网页呈现的最终页面效果会有所差异）。</h4><h3 id="（2）用户端访问服务器端的php文件"><a href="#（2）用户端访问服务器端的php文件" class="headerlink" title="（2）用户端访问服务器端的php文件"></a>（2）用户端访问服务器端的php文件</h3><h4 id="S1：该步与上面访问html静态网页是一样的，通过DNS服务器解析出相应的Web服务器的IP地址。"><a href="#S1：该步与上面访问html静态网页是一样的，通过DNS服务器解析出相应的Web服务器的IP地址。" class="headerlink" title="S1：该步与上面访问html静态网页是一样的，通过DNS服务器解析出相应的Web服务器的IP地址。"></a>S1：该步与上面访问html静态网页是一样的，通过DNS服务器解析出相应的Web服务器的IP地址。</h4><h4 id="S2：与上面访问html静态页面相似，不过最后请求的是Apache服务器上相应目录下的php文件，如index-php。"><a href="#S2：与上面访问html静态页面相似，不过最后请求的是Apache服务器上相应目录下的php文件，如index-php。" class="headerlink" title="S2：与上面访问html静态页面相似，不过最后请求的是Apache服务器上相应目录下的php文件，如index.php。"></a>S2：与上面访问html静态页面相似，不过最后请求的是Apache服务器上相应目录下的php文件，如index.php。</h4><h4 id="S3：Apache服务器本身不能处理php动态语言脚本文件，就寻找并委托PHP应用服务器来处理（服务器端事先得安装PHP应用服务器），Apache服务器将用户请求访问的php文件（如index-php）文件交给PHP应用服务器。"><a href="#S3：Apache服务器本身不能处理php动态语言脚本文件，就寻找并委托PHP应用服务器来处理（服务器端事先得安装PHP应用服务器），Apache服务器将用户请求访问的php文件（如index-php）文件交给PHP应用服务器。" class="headerlink" title="S3：Apache服务器本身不能处理php动态语言脚本文件，就寻找并委托PHP应用服务器来处理（服务器端事先得安装PHP应用服务器），Apache服务器将用户请求访问的php文件（如index.php）文件交给PHP应用服务器。"></a>S3：Apache服务器本身不能处理php动态语言脚本文件，就寻找并委托PHP应用服务器来处理（服务器端事先得安装PHP应用服务器），Apache服务器将用户请求访问的php文件（如index.php）文件交给PHP应用服务器。</h4><h4 id="S4：PHP应用服务器接收php文件（如index-php），打开并解释php文件，最终翻译成html静态代码，再将html静态代码交还给Apache服务器，Apache服务器将接收到的html静态代码输出到客户端浏览器（即用户）。"><a href="#S4：PHP应用服务器接收php文件（如index-php），打开并解释php文件，最终翻译成html静态代码，再将html静态代码交还给Apache服务器，Apache服务器将接收到的html静态代码输出到客户端浏览器（即用户）。" class="headerlink" title="S4：PHP应用服务器接收php文件（如index.php），打开并解释php文件，最终翻译成html静态代码，再将html静态代码交还给Apache服务器，Apache服务器将接收到的html静态代码输出到客户端浏览器（即用户）。"></a>S4：PHP应用服务器接收php文件（如index.php），打开并解释php文件，最终翻译成html静态代码，再将html静态代码交还给Apache服务器，Apache服务器将接收到的html静态代码输出到客户端浏览器（即用户）。</h4><h4 id="S5：与上面访问html静态页面相同，浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。"><a href="#S5：与上面访问html静态页面相同，浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。" class="headerlink" title="S5：与上面访问html静态页面相同，浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。"></a>S5：与上面访问html静态页面相同，浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。</h4><h3 id="3）用户端访问服务器端的MySQL数据库"><a href="#3）用户端访问服务器端的MySQL数据库" class="headerlink" title="(3）用户端访问服务器端的MySQL数据库"></a>(3）用户端访问服务器端的MySQL数据库</h3><h5 id="如果用户需要对MySQL数据库中的数据进行操作，那么就需要在服务器端安装数据库管理软件MySQL服务器，用来存储和管理网站数据。由于Apache服务器是无法连接和操作MySQL服务器，所以还需要安装php应用服务器，这样Apache服务器就委托php应用服务器去连接和操作数据库，在对数据库中的数据进行管理的时候，一般都需要用到结构化查询语句，即SQL语句。"><a href="#如果用户需要对MySQL数据库中的数据进行操作，那么就需要在服务器端安装数据库管理软件MySQL服务器，用来存储和管理网站数据。由于Apache服务器是无法连接和操作MySQL服务器，所以还需要安装php应用服务器，这样Apache服务器就委托php应用服务器去连接和操作数据库，在对数据库中的数据进行管理的时候，一般都需要用到结构化查询语句，即SQL语句。" class="headerlink" title="如果用户需要对MySQL数据库中的数据进行操作，那么就需要在服务器端安装数据库管理软件MySQL服务器，用来存储和管理网站数据。由于Apache服务器是无法连接和操作MySQL服务器，所以还需要安装php应用服务器，这样Apache服务器就委托php应用服务器去连接和操作数据库，在对数据库中的数据进行管理的时候，一般都需要用到结构化查询语句，即SQL语句。"></a>如果用户需要对MySQL数据库中的数据进行操作，那么就需要在服务器端安装数据库管理软件MySQL服务器，用来存储和管理网站数据。由于Apache服务器是无法连接和操作MySQL服务器，所以还需要安装php应用服务器，这样Apache服务器就委托php应用服务器去连接和操作数据库，在对数据库中的数据进行管理的时候，一般都需要用到结构化查询语句，即SQL语句。</h5><h4 id="S1：该步与上面访问php文件一样，通过DNS服务器解析出相应的Web服务器的IP地址。"><a href="#S1：该步与上面访问php文件一样，通过DNS服务器解析出相应的Web服务器的IP地址。" class="headerlink" title="S1：该步与上面访问php文件一样，通过DNS服务器解析出相应的Web服务器的IP地址。"></a>S1：该步与上面访问php文件一样，通过DNS服务器解析出相应的Web服务器的IP地址。</h4><h4 id="S2：与上面访问php文件一样，请求访问Apache服务器上相应目录下的php文件。"><a href="#S2：与上面访问php文件一样，请求访问Apache服务器上相应目录下的php文件。" class="headerlink" title="S2：与上面访问php文件一样，请求访问Apache服务器上相应目录下的php文件。"></a>S2：与上面访问php文件一样，请求访问Apache服务器上相应目录下的php文件。</h4><h4 id="S3：与上面访问php文件一样，PHP应用服务器接收Apache服务器的委托，收到相应的php文件。"><a href="#S3：与上面访问php文件一样，PHP应用服务器接收Apache服务器的委托，收到相应的php文件。" class="headerlink" title="S3：与上面访问php文件一样，PHP应用服务器接收Apache服务器的委托，收到相应的php文件。"></a>S3：与上面访问php文件一样，PHP应用服务器接收Apache服务器的委托，收到相应的php文件。</h4><h4 id="S4：PHP应用服务器打开php文件，在php文件中通过对数据库连接的代码来连接本机或者网络上其他机器上的MySQL数据库，并在php程序中通过执行标准的SQL查询语句来获取数据库中的数据，再通过PHP应用服务器将数据生成html静态代码。"><a href="#S4：PHP应用服务器打开php文件，在php文件中通过对数据库连接的代码来连接本机或者网络上其他机器上的MySQL数据库，并在php程序中通过执行标准的SQL查询语句来获取数据库中的数据，再通过PHP应用服务器将数据生成html静态代码。" class="headerlink" title="S4：PHP应用服务器打开php文件，在php文件中通过对数据库连接的代码来连接本机或者网络上其他机器上的MySQL数据库，并在php程序中通过执行标准的SQL查询语句来获取数据库中的数据，再通过PHP应用服务器将数据生成html静态代码。"></a>S4：PHP应用服务器打开php文件，在php文件中通过对数据库连接的代码来连接本机或者网络上其他机器上的MySQL数据库，并在php程序中通过执行标准的SQL查询语句来获取数据库中的数据，再通过PHP应用服务器将数据生成html静态代码。</h4><h4 id="S5：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。"><a href="#S5：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。" class="headerlink" title="S5：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。"></a>S5：浏览器收到Web服务器的响应后，接收并下载服务器端的html静态代码，然后浏览器解读代码，最终将网页呈现出来。</h4><p>需要注意的是，文中（2）与（3）的区别是，一个访问了数据库，另一个没有访问数据库，所以在过程中有点差别。</p>
<p>本文首发于叶德华的博客：<a href="http://www.cheaplululemon.com，转载请注明网站地址。" target="_blank" rel="external">http://www.cheaplululemon.com，转载请注明网站地址。</a></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP完整表单实例/" >
  PHP完整表单实例
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP完整表单实例/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="PHP-完整表单实例"><a href="#PHP-完整表单实例" class="headerlink" title="PHP 完整表单实例"></a>PHP 完整表单实例</h2><p>本章节将介绍如何让用户在点击”提交（submit）”按钮提交数据前保证所有字段正确输入。</p>
<ul>
<li>PHP - 在表单中确保输入值</li>
</ul>
<p>在用户点击提交按钮后，为确保字段值是否输入正确，我们在HTML的input元素中插添加PHP脚本， 各字段名为: name, email, 和 website。 在评论的 textarea 字段中，我们将脚本放于 &lt; textarea&gt; 和 &lt; /textarea&gt; 标签之间。 PHP脚本输出值为： $name, $email, $website, 和 $comment 变量。</p>
<p>然后，我们同样需要检查被选中的单选按钮， 对于这一点，我们 必须设置好checked属性(不是radio按钮的 value 属性) :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;&lt;?php echo $name;?&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">E-mail: &lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;&lt;?php echo $email;?&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">Website: &lt;input type=&quot;text&quot; name=&quot;website&quot; value=&quot;&lt;?php echo $website;?&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">Comment: &lt;textarea name=&quot;comment&quot; rows=&quot;5&quot; cols=&quot;40&quot;&gt;&lt;?php echo $comment;?&gt;&lt;/textarea&gt;</span><br><span class="line"></span><br><span class="line">Gender:</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot;</span><br><span class="line">&lt;?php if (isset($gender) &amp;&amp; $gender==&quot;female&quot;) echo &quot;checked&quot;;?&gt;</span><br><span class="line">value=&quot;female&quot;&gt;Female</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot;</span><br><span class="line">&lt;?php if (isset($gender) &amp;&amp; $gender==&quot;male&quot;) echo &quot;checked&quot;;?&gt;</span><br><span class="line">value=&quot;male&quot;&gt;Male</span><br></pre></td></tr></table></figure></p>
<h2 id="PHP-完整表单实例-1"><a href="#PHP-完整表单实例-1" class="headerlink" title="PHP - 完整表单实例"></a>PHP - 完整表单实例</h2><p>以下是完整的PHP表单验证实例代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt; </span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.error &#123;color: #FF0000;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt; </span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">// define variables and set to empty values</span><br><span class="line">$nameErr = $emailErr = $genderErr = $websiteErr = &quot;&quot;;</span><br><span class="line">$name = $email = $gender = $comment = $website = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">if ($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;)</span><br><span class="line">&#123;</span><br><span class="line">   if (empty($_POST[&quot;name&quot;]))</span><br><span class="line">     &#123;$nameErr = &quot;Name is required&quot;;&#125;</span><br><span class="line">   else</span><br><span class="line">     &#123;</span><br><span class="line">     $name = test_input($_POST[&quot;name&quot;]);</span><br><span class="line">     // check if name only contains letters and whitespace</span><br><span class="line">     if (!preg_match(&quot;/^[a-zA-Z ]*$/&quot;,$name))</span><br><span class="line">       &#123;</span><br><span class="line">       $nameErr = &quot;Only letters and white space allowed&quot;; </span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   </span><br><span class="line">   if (empty($_POST[&quot;email&quot;]))</span><br><span class="line">     &#123;$emailErr = &quot;Email is required&quot;;&#125;</span><br><span class="line">   else</span><br><span class="line">     &#123;</span><br><span class="line">     $email = test_input($_POST[&quot;email&quot;]);</span><br><span class="line">     // check if e-mail address syntax is valid</span><br><span class="line">     if (!preg_match(&quot;/([\w\-]+\@[\w\-]+\.[\w\-]+)/&quot;,$email))</span><br><span class="line">       &#123;</span><br><span class="line">       $emailErr = &quot;Invalid email format&quot;; </span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">   if (empty($_POST[&quot;website&quot;]))</span><br><span class="line">     &#123;$website = &quot;&quot;;&#125;</span><br><span class="line">   else</span><br><span class="line">     &#123;</span><br><span class="line">     $website = test_input($_POST[&quot;website&quot;]);</span><br><span class="line">     // check if URL address syntax is valid (this regular expression also allows dashes in the URL)</span><br><span class="line">     if (!preg_match(&quot;/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i&quot;,$website))</span><br><span class="line">       &#123;</span><br><span class="line">       $websiteErr = &quot;Invalid URL&quot;; </span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">   if (empty($_POST[&quot;comment&quot;]))</span><br><span class="line">     &#123;$comment = &quot;&quot;;&#125;</span><br><span class="line">   else</span><br><span class="line">     &#123;$comment = test_input($_POST[&quot;comment&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">   if (empty($_POST[&quot;gender&quot;]))</span><br><span class="line">     &#123;$genderErr = &quot;Gender is required&quot;;&#125;</span><br><span class="line">   else</span><br><span class="line">     &#123;$gender = test_input($_POST[&quot;gender&quot;]);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test_input($data)</span><br><span class="line">&#123;</span><br><span class="line">     $data = trim($data);</span><br><span class="line">     $data = stripslashes($data);</span><br><span class="line">     $data = htmlspecialchars($data);</span><br><span class="line">     return $data;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;PHP Form Validation Example&lt;/h2&gt;</span><br><span class="line">&lt;p&gt;&lt;span class=&quot;error&quot;&gt;* required field.&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt; </span><br><span class="line">   Name: &lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;&lt;?php echo $name;?&gt;&quot;&gt;</span><br><span class="line">   &lt;span class=&quot;error&quot;&gt;* &lt;?php echo $nameErr;?&gt;&lt;/span&gt;</span><br><span class="line">   &lt;br&gt;&lt;br&gt;</span><br><span class="line">   E-mail: &lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;&lt;?php echo $email;?&gt;&quot;&gt;</span><br><span class="line">   &lt;span class=&quot;error&quot;&gt;* &lt;?php echo $emailErr;?&gt;&lt;/span&gt;</span><br><span class="line">   &lt;br&gt;&lt;br&gt;</span><br><span class="line">   Website: &lt;input type=&quot;text&quot; name=&quot;website&quot; value=&quot;&lt;?php echo $website;?&gt;&quot;&gt;</span><br><span class="line">   &lt;span class=&quot;error&quot;&gt;&lt;?php echo $websiteErr;?&gt;&lt;/span&gt;</span><br><span class="line">   &lt;br&gt;&lt;br&gt;</span><br><span class="line">   Comment: &lt;textarea name=&quot;comment&quot; rows=&quot;5&quot; cols=&quot;40&quot;&gt;&lt;?php echo $comment;?&gt;&lt;/textarea&gt;</span><br><span class="line">   &lt;br&gt;&lt;br&gt;</span><br><span class="line">   Gender:</span><br><span class="line">   &lt;input type=&quot;radio&quot; name=&quot;gender&quot; &lt;?php if (isset($gender) &amp;&amp; $gender==&quot;female&quot;) echo &quot;checked&quot;;?&gt;  value=&quot;female&quot;&gt;Female</span><br><span class="line">   &lt;input type=&quot;radio&quot; name=&quot;gender&quot; &lt;?php if (isset($gender) &amp;&amp; $gender==&quot;male&quot;) echo &quot;checked&quot;;?&gt;  value=&quot;male&quot;&gt;Male</span><br><span class="line">   &lt;span class=&quot;error&quot;&gt;* &lt;?php echo $genderErr;?&gt;&lt;/span&gt;</span><br><span class="line">   &lt;br&gt;&lt;br&gt;</span><br><span class="line">   &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot;&gt; </span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">echo &quot;&lt;h2&gt;Your Input:&lt;/h2&gt;&quot;;</span><br><span class="line">echo $name;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo $email;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo $website;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo $comment;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">echo $gender;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/php中json_decode()和json_encode()的使用方法/" >
  php中json_decode()和json_encode()的使用方法*转
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/php中json_decode()和json_encode()的使用方法/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>1.json_decode() </p>
<p>json_decode<br>(PHP 5 &gt;= 5.2.0, PECL json &gt;= 1.2.0) </p>
<p>json_decode — 对 JSON 格式的字符串进行编码 </p>
<p>说明<br>mixed json_decode ( string $json [, bool $assoc ] )<br>接受一个 JSON 格式的字符串并且把它转换为 PHP 变量 </p>
<p>参数 </p>
<p>json<br>待解码的 json string 格式的字符串。 </p>
<p>assoc<br>当该参数为 TRUE 时，将返回 array 而非 object 。 </p>
<p>返回值<br>Returns an object or if the optional assoc parameter is TRUE, an associative array is instead returned. </p>
<p>范例 </p>
<p>Example #1 json_decode() 的例子 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">代码如下:</span><br><span class="line"></span><br><span class="line">&lt;?php </span><br><span class="line">$json = &apos;&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5&#125;&apos;; </span><br><span class="line">var_dump(json_decode($json)); </span><br><span class="line">var_dump(json_decode($json, true)); </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>上例将输出： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">object(stdClass)#1 (5) &#123; </span><br><span class="line">[&quot;a&quot;] =&gt; int(1) </span><br><span class="line">[&quot;b&quot;] =&gt; int(2) </span><br><span class="line">[&quot;c&quot;] =&gt; int(3) </span><br><span class="line">[&quot;d&quot;] =&gt; int(4) </span><br><span class="line">[&quot;e&quot;] =&gt; int(5) </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">array(5) &#123; </span><br><span class="line">[&quot;a&quot;] =&gt; int(1) </span><br><span class="line">[&quot;b&quot;] =&gt; int(2) </span><br><span class="line">[&quot;c&quot;] =&gt; int(3) </span><br><span class="line">[&quot;d&quot;] =&gt; int(4) </span><br><span class="line">[&quot;e&quot;] =&gt; int(5) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">$data=&apos;[&#123;&quot;Name&quot;:&quot;a1&quot;,&quot;Number&quot;:&quot;123&quot;,&quot;Contno&quot;:&quot;000&quot;,&quot;QQNo&quot;:&quot;&quot;&#125;,&#123;&quot;Name&quot;:&quot;a1&quot;,&quot;Number&quot;:&quot;123&quot;,&quot;Contno&quot;:&quot;000&quot;,&quot;QQNo&quot;:&quot;&quot;&#125;,&#123;&quot;Name&quot;:&quot;a1&quot;,&quot;Number&quot;:&quot;123&quot;,&quot;Contno&quot;:&quot;000&quot;,&quot;QQNo&quot;:&quot;&quot;&#125;]&apos;; </span><br><span class="line">echo json_decode($data);</span><br></pre></td></tr></table></figure>
<p>结果为： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">Array ( [0] =&gt; stdClass Object ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) [1] =&gt; stdClass Object ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) [2] =&gt; stdClass Object ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) )</span><br></pre></td></tr></table></figure>
<p>可以看出经过json_decode()编译出来的是对象,现在输出json_decode($data,true)试下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">echo json_decode($data,true);</span><br></pre></td></tr></table></figure></p>
<p>结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">Array ( [0] =&gt; Array ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) [1] =&gt; Array ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) [2] =&gt; Array ( [Name] =&gt; a1 [Number] =&gt; 123 [Contno] =&gt; 000 [QQNo] =&gt; ) )</span><br></pre></td></tr></table></figure></p>
<p>可以看出 json_decode($data,true)输出的一个关联数组,由此可知json_decode($data）输出的是对象,而json_decode(“$arr”,true)是把它强制生成PHP关联数组. </p>
<p>2.json_encode() </p>
<p>json_encode<br>(PHP 5 &gt;= 5.2.0, PECL json &gt;= 1.2.0) </p>
<p>json_encode — 对变量进行 JSON 编码 </p>
<p>Report a bug 说明<br>string json_encode ( mixed $value [, int $options = 0 ] )<br>返回 value 值的 JSON 形式 </p>
<p>Report a bug 参数 </p>
<p>value<br>待编码的 value ，除了resource 类型之外，可以为任何数据类型 </p>
<p>该函数只能接受 UTF-8 编码的数据 </p>
<p>options<br>由以下常量组成的二进制掩码： JSON_HEX_QUOT, JSON_HEX_TAG, JSON_HEX_AMP, JSON_HEX_APOS, JSON_NUMERIC_CHECK, JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, JSON_FORCE_OBJECT, JSON_UNESCAPED_UNICODE. </p>
<p>Report a bug 返回值<br>编码成功则返回一个以 JSON 形式表示的 string 或者在失败时返回 FALSE 。 </p>
<p>Report a bug 更新日志<br>版本 说明<br>5.4.0 options 参数增加常量： JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, 和 JSON_UNESCAPED_UNICODE。<br>5.3.3 options 参数增加常量：JSON_NUMERIC_CHECK。<br>5.3.0 增加 options 参数. </p>
<p>Report a bug 范例 </p>
<p>Example #1 A json_encode() 的例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">&lt;?php </span><br><span class="line">$arr = array (&apos;a&apos;=&gt;1,&apos;b&apos;=&gt;2,&apos;c&apos;=&gt;3,&apos;d&apos;=&gt;4,&apos;e&apos;=&gt;5); </span><br><span class="line"></span><br><span class="line">echo json_encode($arr); </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上例程会输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5&#125;</span><br></pre></td></tr></table></figure></p>
<p>Example #2 json_encode() 函数中 options 参数的用法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">&lt;?php </span><br><span class="line">$a = array(&apos;&lt;foo&gt;&apos;,&quot;&apos;bar&apos;&quot;,&apos;&quot;baz&quot;&apos;,&apos;&amp;blong&amp;&apos;, &quot;\xc3\xa9&quot;); </span><br><span class="line"></span><br><span class="line">echo &quot;Normal: &quot;, json_encode($a), &quot;\n&quot;; </span><br><span class="line">echo &quot;Tags: &quot;, json_encode($a, JSON_HEX_TAG), &quot;\n&quot;; </span><br><span class="line">echo &quot;Apos: &quot;, json_encode($a, JSON_HEX_APOS), &quot;\n&quot;; </span><br><span class="line">echo &quot;Quot: &quot;, json_encode($a, JSON_HEX_QUOT), &quot;\n&quot;; </span><br><span class="line">echo &quot;Amp: &quot;, json_encode($a, JSON_HEX_AMP), &quot;\n&quot;; </span><br><span class="line">echo &quot;Unicode: &quot;, json_encode($a, JSON_UNESCAPED_UNICODE), &quot;\n&quot;; </span><br><span class="line">echo &quot;All: &quot;, json_encode($a, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE), &quot;\n\n&quot;; </span><br><span class="line"></span><br><span class="line">$b = array(); </span><br><span class="line"></span><br><span class="line">echo &quot;Empty array output as array: &quot;, json_encode($b), &quot;\n&quot;; </span><br><span class="line">echo &quot;Empty array output as object: &quot;, json_encode($b, JSON_FORCE_OBJECT), &quot;\n\n&quot;; </span><br><span class="line"></span><br><span class="line">$c = array(array(1,2,3)); </span><br><span class="line"></span><br><span class="line">echo &quot;Non-associative array output as array: &quot;, json_encode($c), &quot;\n&quot;; </span><br><span class="line">echo &quot;Non-associative array output as object: &quot;, json_encode($c, JSON_FORCE_OBJECT), &quot;\n\n&quot;; </span><br><span class="line"></span><br><span class="line">$d = array(&apos;foo&apos; =&gt; &apos;bar&apos;, &apos;baz&apos; =&gt; &apos;long&apos;); </span><br><span class="line"></span><br><span class="line">echo &quot;Associative array always output as object: &quot;, json_encode($d), &quot;\n&quot;; </span><br><span class="line">echo &quot;Associative array always output as object: &quot;, json_encode($d, JSON_FORCE_OBJECT), &quot;\n\n&quot;; </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上例程会输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">Normal: [&quot;&lt;foo&gt;&quot;,&quot;&apos;bar&apos;&quot;,&quot;\&quot;baz\&quot;&quot;,&quot;&amp;blong&amp;&quot;,&quot;\u00e9&quot;] </span><br><span class="line">Tags: [&quot;\u003Cfoo\u003E&quot;,&quot;&apos;bar&apos;&quot;,&quot;\&quot;baz\&quot;&quot;,&quot;&amp;blong&amp;&quot;,&quot;\u00e9&quot;] </span><br><span class="line">Apos: [&quot;&lt;foo&gt;&quot;,&quot;\u0027bar\u0027&quot;,&quot;\&quot;baz\&quot;&quot;,&quot;&amp;blong&amp;&quot;,&quot;\u00e9&quot;] </span><br><span class="line">Quot: [&quot;&lt;foo&gt;&quot;,&quot;&apos;bar&apos;&quot;,&quot;\u0022baz\u0022&quot;,&quot;&amp;blong&amp;&quot;,&quot;\u00e9&quot;] </span><br><span class="line">Amp: [&quot;&lt;foo&gt;&quot;,&quot;&apos;bar&apos;&quot;,&quot;\&quot;baz\&quot;&quot;,&quot;\u0026blong\u0026&quot;,&quot;\u00e9&quot;] </span><br><span class="line">Unicode: [&quot;&lt;foo&gt;&quot;,&quot;&apos;bar&apos;&quot;,&quot;\&quot;baz\&quot;&quot;,&quot;&amp;blong&amp;&quot;,&quot;é&quot;] </span><br><span class="line">All: [&quot;\u003Cfoo\u003E&quot;,&quot;\u0027bar\u0027&quot;,&quot;\u0022baz\u0022&quot;,&quot;\u0026blong\u0026&quot;,&quot;é&quot;] </span><br><span class="line"></span><br><span class="line">Empty array output as array: [] </span><br><span class="line">Empty array output as object: &#123;&#125; </span><br><span class="line"></span><br><span class="line">Non-associative array output as array: [[1,2,3]] </span><br><span class="line">Non-associative array output as object: &#123;&quot;0&quot;:&#123;&quot;0&quot;:1,&quot;1&quot;:2,&quot;2&quot;:3&#125;&#125; </span><br><span class="line"></span><br><span class="line">Associative array always output as object: &#123;&quot;foo&quot;:&quot;bar&quot;,&quot;baz&quot;:&quot;long&quot;&#125; </span><br><span class="line">Associative array always output as object: &#123;&quot;foo&quot;:&quot;bar&quot;,&quot;baz&quot;:&quot;long&quot;&#125;</span><br></pre></td></tr></table></figure></p>
<p>Example #3 连续与非连续数组示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">&lt;?php </span><br><span class="line">echo &quot;连续数组&quot;.PHP_EOL; </span><br><span class="line">$sequential = array(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;, &quot;blong&quot;); </span><br><span class="line">var_dump( </span><br><span class="line">$sequential, </span><br><span class="line">json_encode($sequential) </span><br><span class="line">); </span><br><span class="line"></span><br><span class="line">echo PHP_EOL.&quot;非连续数组&quot;.PHP_EOL; </span><br><span class="line">$nonsequential = array(1=&gt;&quot;foo&quot;, 2=&gt;&quot;bar&quot;, 3=&gt;&quot;baz&quot;, 4=&gt;&quot;blong&quot;); </span><br><span class="line">var_dump( </span><br><span class="line">$nonsequential, </span><br><span class="line">json_encode($nonsequential) </span><br><span class="line">); </span><br><span class="line"></span><br><span class="line">echo PHP_EOL.&quot;删除一个连续数组值的方式产生的非连续数组&quot;.PHP_EOL; </span><br><span class="line">unset($sequential[1]); </span><br><span class="line">var_dump( </span><br><span class="line">$sequential, </span><br><span class="line">json_encode($sequential) </span><br><span class="line">); </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>以上例程会输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">连续数组 </span><br><span class="line">array(4) &#123; </span><br><span class="line">[0]=&gt; </span><br><span class="line">string(3) &quot;foo&quot; </span><br><span class="line">[1]=&gt; </span><br><span class="line">string(3) &quot;bar&quot; </span><br><span class="line">[2]=&gt; </span><br><span class="line">string(3) &quot;baz&quot; </span><br><span class="line">[3]=&gt; </span><br><span class="line">string(5) &quot;blong&quot; </span><br><span class="line">&#125; </span><br><span class="line">string(27) &quot;[&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;,&quot;blong&quot;]&quot; </span><br><span class="line"></span><br><span class="line">非连续数组 </span><br><span class="line">array(4) &#123; </span><br><span class="line">[1]=&gt; </span><br><span class="line">string(3) &quot;foo&quot; </span><br><span class="line">[2]=&gt; </span><br><span class="line">string(3) &quot;bar&quot; </span><br><span class="line">[3]=&gt; </span><br><span class="line">string(3) &quot;baz&quot; </span><br><span class="line">[4]=&gt; </span><br><span class="line">string(5) &quot;blong&quot; </span><br><span class="line">&#125; </span><br><span class="line">string(43) &quot;&#123;&quot;1&quot;:&quot;foo&quot;,&quot;2&quot;:&quot;bar&quot;,&quot;3&quot;:&quot;baz&quot;,&quot;4&quot;:&quot;blong&quot;&#125;&quot;</span><br></pre></td></tr></table></figure></p>
<p>删除一个连续数组值的方式产生的非连续数组<br>array(3) {<br>[0]=&gt;<br>string(3) “foo”<br>[2]=&gt;<br>string(3) “baz”<br>[3]=&gt;<br>string(5) “blong”<br>}<br>string(33) “{“0”:”foo”,”2”:”baz”,”3”:”blong”}” </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">$obj-&gt;Name= &apos;a1&apos;;$obj-&gt;Number =&apos;123&apos;; </span><br><span class="line">$obj-&gt;Contno= &apos;000&apos;; </span><br><span class="line">echo json_encode($obj);</span><br></pre></td></tr></table></figure>
<p>结果为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 代码如下:</span><br><span class="line"></span><br><span class="line">&#123;&quot;Name&quot;:&quot;a1&quot;, </span><br><span class="line">&quot;Number&quot;:&quot;123&quot;, </span><br><span class="line">&quot;Contno&quot;:&quot;000&quot; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看出json_encode()和json_decode()是编译和反编译过程，注意json只接受utf-8编码的字符，所以json_encode()的参数必须是utf-8编码，否则会得到空字符或者null。</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP$_POST 变量/" >
  PHP$_POST 变量
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP$_POST 变量/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="PHP-POST-变量"><a href="#PHP-POST-变量" class="headerlink" title="PHP$_POST 变量"></a>PHP$_POST 变量</h2><ul>
<li>预定义的 $_POST 变量用于收集来自 method=”post” 的表单中的值。</li>
</ul>
<p>从带有 POST 方法的表单发送的信息，对任何人都是不可见的（不会显示在浏览器的地址栏），并且对发送信息的量也没有限制。</p>
<p><em>然而，默认情况下，POST 方法的发送信息的量最大值为 8 MB（可通过设置 php.ini 文件中的 post_max_size 进行更改）。</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;welcome.php&quot; method=&quot;post&quot;&gt;</span><br><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;</span><br><span class="line">Age: &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>当用户点击 “Submit” 按钮时，URL 如下所示：</p>
<blockquote>
<p><a href="http://www.w3cschool.cc/welcome.php" target="_blank" rel="external">http://www.w3cschool.cc/welcome.php</a></p>
</blockquote>
<p>“welcome.php” 文件现在可以通过 $_POST 变量来收集表单数据了（请注意，表单域的名称会自动成为 $_POST 数组中的键）：</p>
<blockquote>
<p>Welcome &lt;?php echo $_POST[“fname”]; ?&gt;!<br><br>You are &lt;?php echo $_POST[“age”]; ?&gt; years old.</p>
</blockquote>
<h3 id="何时使用-method-”post”？"><a href="#何时使用-method-”post”？" class="headerlink" title="何时使用 method=”post”？"></a>何时使用 method=”post”？</h3><p>从带有 POST 方法的表单发送的信息，对任何人都是不可见的，并且对发送信息的量也没有限制。</p>
<p>然而，由于变量不显示在 URL 中，所以无法把页面加入书签。</p>
<h2 id="PHP-REQUEST-变量"><a href="#PHP-REQUEST-变量" class="headerlink" title="PHP $_REQUEST 变量"></a>PHP $_REQUEST 变量</h2><p>预定义的 $_REQUEST 变量包含了 $_GET、$_POST 和 $_COOKIE 的内容。<br>$_REQUEST 变量可用来收集通过 GET 和 POST 方法发送的表单数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Welcome &lt;?php echo $_REQUEST[&quot;fname&quot;]; ?&gt;!&lt;br&gt;</span><br><span class="line">You are &lt;?php echo $_REQUEST[&quot;age&quot;]; ?&gt; years old.</span><br></pre></td></tr></table></figure></p>
<p><strong>之前至此的几篇关于php基础的知识均来自<a href="http://www.runoob.com/php/php-tutorial.html之中，文章为转载" target="_blank" rel="external">http://www.runoob.com/php/php-tutorial.html之中，文章为转载</a></strong></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP$_GET 变量/" >
  PHP$_GET 变量
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP$_GET 变量/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="PHP-GET-变量"><a href="#PHP-GET-变量" class="headerlink" title="PHP $_GET 变量"></a>PHP $_GET 变量</h2><ul>
<li><p>在 PHP 中，预定义的 $_GET 变量用于收集来自 method=”get” 的表单中的值。</p>
</li>
<li><p>从带有 GET 方法的表单发送的信息，对任何人都是可见的（会显示在浏览器的地址栏），并且对发送信息的量也有限制。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;welcome.php&quot; method=&quot;get&quot;&gt;</span><br><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt;</span><br><span class="line">Age: &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>当用户点击 “Submit” 按钮时，发送到服务器的 URL 如下所示：</p>
<blockquote>
<p><a href="http://www.w3cschool.cc/welcome.php?fname=Peter&amp;age=37" target="_blank" rel="external">http://www.w3cschool.cc/welcome.php?fname=Peter&amp;age=37</a></p>
</blockquote>
<p>“welcome.php” 文件现在可以通过 $_GET 变量来收集表单数据了（请注意，表单域的名称会自动成为 $_GET 数组中的键）：</p>
<blockquote>
<p>Welcome &lt;?php echo $_GET[“fname”]; ?&gt;.<br><br>You are &lt;?php echo $_GET[“age”]; ?&gt; years old!</p>
</blockquote>
<h3 id="何时使用-method-”get”？"><a href="#何时使用-method-”get”？" class="headerlink" title="何时使用 method=”get”？"></a>何时使用 method=”get”？</h3><p>在 HTML 表单中使用 method=”get” 时，所有的变量名和值都会显示在 URL 中。</p>
<p><strong>所以在发送密码或其他敏感信息时，不应该使用这个方法！</strong></p>
<p>然而，正因为变量显示在 URL 中，<strong>因此可以在收藏夹中收藏该页面</strong>。在某些情况下，这是很有用的。</p>
<p><em>HTTP GET 方法不适合大型的变量值。它的值是不能超过 2000 个字符的。</em></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP表单验证邮件和URL/" >
  PHP表单验证邮件和URL
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP表单验证邮件和URL/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="PHP-表单验证邮件和URL"><a href="#PHP-表单验证邮件和URL" class="headerlink" title="PHP 表单验证邮件和URL"></a>PHP 表单验证邮件和URL</h2><h3 id="PHP-验证名称"><a href="#PHP-验证名称" class="headerlink" title="PHP - 验证名称"></a>PHP - 验证名称</h3><p>以下代码将通过简单的方式来检测 name 字段是否包含字母和空格，如果 name 字段值不合法，将输出错误信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$name = test_input($_POST[&quot;name&quot;]);</span><br><span class="line">if (!preg_match(&quot;/^[a-zA-Z ]*$/&quot;,$name))</span><br><span class="line">  &#123;</span><br><span class="line">  $nameErr = &quot;只允许字母及空格&quot;; </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>preg_match — 进行正则表达式匹配。</p>
<p>语法：<br>int preg_match ( string $pattern , string $subject [, array $matches [, int $flags ]] )</p>
<p>在 subject 字符串中搜索与 pattern 给出的正则表达式相匹配的内容。如果提供了 matches ，则其会被搜索的结果所填充。$matches[0] 将包含与整个模式匹配的文本，$matches[1] 将包含与第一个捕获的括号中的子模式所匹配的文本，以此类推。</p>
</blockquote>
<h3 id="PHP-验证邮件"><a href="#PHP-验证邮件" class="headerlink" title="PHP - 验证邮件"></a>PHP - 验证邮件</h3><p>以下代码将通过简单的方式来检测 e-mail 地址是否合法。如果 e-mail 地址不合法，将输出错误信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$email = test_input($_POST[&quot;email&quot;]);</span><br><span class="line">if (!preg_match(&quot;/([\w\-]+\@[\w\-]+\.[\w\-]+)/&quot;,$email))</span><br><span class="line">  &#123;</span><br><span class="line">  $emailErr = &quot;非法邮件地址&quot;; </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="PHP-验证-URL"><a href="#PHP-验证-URL" class="headerlink" title="PHP - 验证 URL"></a>PHP - 验证 URL</h3><p>以下代码将检测URL地址是否合法 (以下正则表达式运行URL中含有破折号:”-“)， 如果 URL 地址不合法，将输出错误信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$website = test_input($_POST[&quot;website&quot;]);</span><br><span class="line">if (!preg_match(&quot;/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i&quot;,$website))</span><br><span class="line">  &#123;</span><br><span class="line">  $websiteErr = &quot;不合法的 URL&quot;; </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="PHP-验证-Name-E-mail-和-URL"><a href="#PHP-验证-Name-E-mail-和-URL" class="headerlink" title="PHP - 验证 Name, E-mail, 和 URL"></a>PHP - 验证 Name, E-mail, 和 URL</h3><p>代码如下所示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 定义变量并设为空值</span><br><span class="line">$nameErr = $emailErr = $genderErr = $websiteErr = &quot;&quot;;</span><br><span class="line">$name = $email = $gender = $comment = $website = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">if ($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;)</span><br><span class="line">&#123;</span><br><span class="line">  if (empty($_POST[&quot;name&quot;]))</span><br><span class="line">    &#123;$nameErr = &quot;Name is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;</span><br><span class="line">    $name = test_input($_POST[&quot;name&quot;]);</span><br><span class="line">    // check if name only contains letters and whitespace</span><br><span class="line">    if (!preg_match(&quot;/^[a-zA-Z ]*$/&quot;,$name))</span><br><span class="line">      &#123;</span><br><span class="line">      $nameErr = &quot;Only letters and white space allowed&quot;; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;email&quot;]))</span><br><span class="line">    &#123;$emailErr = &quot;Email is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;</span><br><span class="line">    $email = test_input($_POST[&quot;email&quot;]);</span><br><span class="line">    // check if e-mail address syntax is valid</span><br><span class="line">    if (!preg_match(&quot;/([\w\-]+\@[\w\-]+\.[\w\-]+)/&quot;,$email))</span><br><span class="line">      &#123;</span><br><span class="line">      $emailErr = &quot;Invalid email format&quot;; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;website&quot;]))</span><br><span class="line">    &#123;$website = &quot;&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;</span><br><span class="line">    $website = test_input($_POST[&quot;website&quot;]);</span><br><span class="line">    // check if URL address syntax is valid (this regular expression also allows dashes in the URL)</span><br><span class="line">    if (!preg_match(&quot;/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&amp;@#\/%?=~_|!:,.;]*[-a-z0-9+&amp;@#\/%=~_|]/i&quot;,$website))</span><br><span class="line">      &#123;</span><br><span class="line">      $websiteErr = &quot;Invalid URL&quot;; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;comment&quot;]))</span><br><span class="line">    &#123;$comment = &quot;&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$comment = test_input($_POST[&quot;comment&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;gender&quot;]))</span><br><span class="line">    &#123;$genderErr = &quot;Gender is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$gender = test_input($_POST[&quot;gender&quot;]);&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP表单验证/" >
  PHP表单验证
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP表单验证/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h2 id="PHP-表单验证"><a href="#PHP-表单验证" class="headerlink" title="PHP 表单验证"></a>PHP 表单验证</h2><ul>
<li>在处理PHP表单时我们需要考虑安全性，为了防止黑客及垃圾信息我们需要对表单进行数据安全验证。</li>
<li>下面的HTML表单中包含以下输入字段： 必须与可选文本字段，单选按钮，及提交按钮：</li>
</ul>
<p><img src="/img/php/435667fbvkj.png" alt=""></p>
<p>上述表单验证规则如下：</p>
<p><img src="/img/php/60527151127.png" alt=""></p>
<h3 id="文本字段"><a href="#文本字段" class="headerlink" title="文本字段"></a>文本字段</h3><p>name, email, 及 website 字段为文本输入元素， comment 字段是 textarea。HTML代码如下所示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span><br><span class="line">E-mail: &lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;</span><br><span class="line">Website: &lt;input type=&quot;text&quot; name=&quot;website&quot;&gt;</span><br><span class="line">Comment: &lt;textarea name=&quot;comment&quot; rows=&quot;5&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="单选按钮"><a href="#单选按钮" class="headerlink" title="单选按钮"></a>单选按钮</h3><p>gender 字段是单选按钮，HTML代码如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Gender:</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;female&quot;&gt;Female</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;male&quot;&gt;Male</span><br></pre></td></tr></table></figure></p>
<h3 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h3><p>HTML 表单代码如下所示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt;</span><br><span class="line">该表单使用 method=&quot;post&quot; 方法来提交数据。</span><br><span class="line">Note	什么是 $_SERVER[&quot;PHP_SELF&quot;] 变量?</span><br></pre></td></tr></table></figure></p>
<ul>
<li>$_SERVER[“PHP_SELF”]是超级全局变量，返回当前正在执行脚本的文件名，与 document root相关。<br>所以， $_SERVER[“PHP_SELF”] 会发送表单数据到当前页面，而不是跳转到不同的页面。</li>
</ul>
<blockquote>
<p>什么是 htmlspecialchars()方法?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">htmlspecialchars() 函数把一些预定义的字符转换为 HTML 实体。</span><br><span class="line">预定义的字符是：</span><br><span class="line">&amp; （和号） 成为 &amp;amp;</span><br><span class="line">&quot; （双引号） 成为 &amp;quot;</span><br><span class="line">&apos; （单引号） 成为 &amp;#039;</span><br><span class="line">&lt; （小于） 成为 &amp;lt;</span><br><span class="line">&gt; （大于） 成为 &amp;gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="PHP表单中需引起注重的地方？"><a href="#PHP表单中需引起注重的地方？" class="headerlink" title="PHP表单中需引起注重的地方？"></a>PHP表单中需引起注重的地方？</h3><p>$_SERVER[“PHP_SELF”] 变量有可能会被黑客使用！</p>
<p>当黑客使用跨网站脚本的HTTP链接来攻击时，$_SERVER[“PHP_SELF”]服务器变量也会被植入脚本。原因就是跨网站脚本是附在执行文件的路径后面的，因此$_SERVER[“PHP_SELF”]的字符串就会包含HTTP链接后面的JavaScript程序代码。</p>
<blockquote>
<p>XSS又叫 CSS (Cross-Site Script) ,跨站脚本攻击。恶意攻击者往Web页面里插入恶意html代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意用户的特殊目的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">指定以下表单文件名为 &quot;test_form.php&quot;:</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER[&quot;PHP_SELF&quot;];?&gt;&quot;&gt;</span><br><span class="line">现在，我们使用URL来指定提交地址 &quot;test_form.php&quot;,以上代码修改为如下所示:</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;test_form.php&quot;&gt;</span><br><span class="line">这样做就很好了。</span><br><span class="line">但是，考虑到用户会在浏览器地址栏中输入以下地址:</span><br><span class="line">http://www.runoob.com/test_form.php/%22%3E%3Cscript%3Ealert(&apos;hacked&apos;)%3C/script%3E</span><br><span class="line">以上的 URL 中，将被解析为如下代码并执行：</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;test_form.php/&quot;&gt;&lt;script&gt;alert(&apos;hacked&apos;)&lt;/script&gt;</span><br><span class="line">代码中添加了 script 标签，并添加了alert命令。 当页面载入时会执行该Javascript代码（用户会看到弹出框）。 这仅仅只是一个简单的实例来说明PHP_SELF变量会被黑客利用。</span><br></pre></td></tr></table></figure>
<p>请注意，<strong>任何JavaScript代码可以添加在&lt; script&gt;标签中！</strong> 黑客可以利用这点重定向页面到另外一台服务器的页面上，页面 代码文件中可以保护恶意代码，代码可以修改全局变量或者获取用户的表单数据，</p>
<ul>
<li>如何避免 $_SERVER[“PHP_SELF”] 被利用?<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$_SERVER[&quot;PHP_SELF&quot;] 可以通过 htmlspecialchars() 函数来避免被利用。</span><br><span class="line">form 代码如下所示：</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt;</span><br><span class="line">htmlspecialchars() 把一些预定义的字符转换为 HTML 实体。现在如果用户想利用 PHP_SELF 变量, 结果将输出如下所示：</span><br><span class="line">&lt;form method=&quot;post&quot; action=&quot;test_form.php/&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert(&apos;hacked&apos;)&amp;lt;/script&amp;gt;&quot;&gt;</span><br><span class="line">尝试该漏洞失败！</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="使用-PHP-验证表单数据"><a href="#使用-PHP-验证表单数据" class="headerlink" title="使用 PHP 验证表单数据"></a>使用 PHP 验证表单数据</h3><ul>
<li>首先我们对用户所有提交的数据都通过 PHP 的 htmlspecialchars() 函数处理。</li>
</ul>
<p>当我们使用 htmlspecialchars() 函数时，在用户尝试提交以下文本域:<br>&lt; script&gt;location.href(‘<a href="http://www.runoob.com" target="_blank" rel="external">http://www.runoob.com</a>‘)&lt; /script&gt;<br>该代码将不会被执行，因为它会被保存为HTML转义代码，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;lt;script&amp;gt;location.href(&apos;http://www.runoob.com&apos;)&amp;lt;/script&amp;gt;</span><br></pre></td></tr></table></figure></p>
<p>以上代码是安全的，可以正常在页面显示或者插入邮件中。</p>
<ul>
<li>当用户提交表单时，我们将做以下两件事情，：</li>
</ul>
<p>1.使用 PHP trim() 函数去除用户输入数据中不必要的字符 (如：空格，tab，换行)。</p>
<p>2.使用PHP stripslashes()函数去除用户输入数据中的反斜杠 ()</p>
<p>接下来让我们将这些过滤的函数写在一个我们自己定义的函数中，这样可以大大提高代码的复用性。<br>将函数命名为 test_input()。<br>现在，我们可以通过test_input()函数来检测 $_POST 中的所有变量, 脚本代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 定义变量并默认设置为空值</span><br><span class="line">$name = $email = $gender = $comment = $website = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">if ($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;)</span><br><span class="line">&#123;</span><br><span class="line">  $name = test_input($_POST[&quot;name&quot;]);</span><br><span class="line">  $email = test_input($_POST[&quot;email&quot;]);</span><br><span class="line">  $website = test_input($_POST[&quot;website&quot;]);</span><br><span class="line">  $comment = test_input($_POST[&quot;comment&quot;]);</span><br><span class="line">  $gender = test_input($_POST[&quot;gender&quot;]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test_input($data)</span><br><span class="line">&#123;</span><br><span class="line">  $data = trim($data);</span><br><span class="line">  $data = stripslashes($data);</span><br><span class="line">  $data = htmlspecialchars($data);</span><br><span class="line">  return $data;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>注意我们在执行以上脚本时，会通过$_SERVER[“REQUEST_METHOD”]来检测表单是否被提交 。如果 REQUEST_METHOD 是 POST, 表单将被提交 数据将被验证。如果表单未提交将跳过验证并显示空白。</li>
</ul>
<p>在以上实例中使用输入项都是可选的，即使用户不输入任何数据也可以正常显示。</p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP表单之必需字段/" >
  PHP表单之必需字段
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP表单之必需字段/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h3 id="PHP-表单-必需字段"><a href="#PHP-表单-必需字段" class="headerlink" title="PHP 表单 - 必需字段"></a>PHP 表单 - 必需字段</h3><p>我们将介绍如何设置表单必需字段及错误信息。</p>
<p>PHP - 必需字段<br>在上一章节我们已经介绍了表的验证规则，我们可以看到”Name”, “E-mail”, 和 “Gender” 字段是必须的，各字段不能为空<br><img src="/img/php/60527151127.png" alt=""></p>
<p>在以下代码中我们加入了一些新的变量: $nameErr, $emailErr, $genderErr, 和 $websiteErr.。这些错误变量将显示在必须字段上。 我们还为每个$_POST变量增加了一个if else语句。 这些语句将检查 $_POST 变量是 否为空（使用php的 empty() 函数）。如果为空，将显示对应的错误信息。 如果不为空，数据将传递给test_input() 函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 定义变量并默认设为空值</span><br><span class="line">$nameErr = $emailErr = $genderErr = $websiteErr = &quot;&quot;;</span><br><span class="line">$name = $email = $gender = $comment = $website = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">if ($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;name&quot;]))</span><br><span class="line">    &#123;$nameErr = &quot;Name is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$name = test_input($_POST[&quot;name&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;email&quot;]))</span><br><span class="line">    &#123;$emailErr = &quot;Email is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$email = test_input($_POST[&quot;email&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;website&quot;]))</span><br><span class="line">    &#123;$website = &quot;&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$website = test_input($_POST[&quot;website&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;comment&quot;]))</span><br><span class="line">    &#123;$comment = &quot;&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$comment = test_input($_POST[&quot;comment&quot;]);&#125;</span><br><span class="line"></span><br><span class="line">  if (empty($_POST[&quot;gender&quot;]))</span><br><span class="line">    &#123;$genderErr = &quot;Gender is required&quot;;&#125;</span><br><span class="line">  else</span><br><span class="line">    &#123;$gender = test_input($_POST[&quot;gender&quot;]);&#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="PHP-显示错误信息"><a href="#PHP-显示错误信息" class="headerlink" title="PHP - 显示错误信息"></a>PHP - 显示错误信息</h3><p>在以下的HTML实例表单中，我们为每个字段中添加了一些脚本， 各个脚本会在信息输入错误时显示错误信息。(如果用户未填写信息就提交表单则会输出错误信息):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo htmlspecialchars($_SERVER[&quot;PHP_SELF&quot;]);?&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span><br><span class="line">&lt;span class=&quot;error&quot;&gt;* &lt;?php echo $nameErr;?&gt;&lt;/span&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">E-mail:</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;</span><br><span class="line">&lt;span class=&quot;error&quot;&gt;* &lt;?php echo $emailErr;?&gt;&lt;/span&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">Website:</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;website&quot;&gt;</span><br><span class="line">&lt;span class=&quot;error&quot;&gt;&lt;?php echo $websiteErr;?&gt;&lt;/span&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">&lt;label&gt;Comment: &lt;textarea name=&quot;comment&quot; rows=&quot;5&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">Gender:</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;female&quot;&gt;Female</span><br><span class="line">&lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;male&quot;&gt;Male</span><br><span class="line">&lt;span class=&quot;error&quot;&gt;* &lt;?php echo $genderErr;?&gt;&lt;/span&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit&quot;&gt; </span><br><span class="line"></span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>

        
      </div>
    </div>

  
    </div>
  

  
  
    <div class="post-list">
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/23/PHP常量/" >
  PHP常量
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/23/PHP常量/"><span class="article-date">
  2016-05-23
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/php/">php</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h3 id="PHP常量"><a href="#PHP常量" class="headerlink" title="PHP常量"></a>PHP常量</h3><p><strong>常量值被定义后，在脚本的其他任何地方都不能被改变。</strong></p>
<p>PHP 常量</p>
<ul>
<li><p>常量是一个简单值的标识符。该值在脚本中不能改变。</p>
</li>
<li><p>一个常量由英文字母、下划线、和数字组成,但数字不能作为首字母出现。 (常量名不需要加 $ 修饰符)。</p>
</li>
</ul>
<p><strong>注意： 常量在整个脚本中都可以使用。</strong></p>
<h3 id="设置-PHP-常量"><a href="#设置-PHP-常量" class="headerlink" title="设置 PHP 常量"></a>设置 PHP 常量</h3><ul>
<li><blockquote>
<p>设置常量，使用 define() 函数，函数语法如下：<br>define(string constant_name, mixed value, case_insensitive = true)</p>
</blockquote>
</li>
<li><p>该函数有三个参数:</p>
<blockquote>
<p>constant_name：必选参数，常量名称，即标志符。<br>value：必选参数，常量的值。<br>case_insensitive ：可选参数，指定是否大小写敏感，设定为 true 表示不，不区分大小写敏感。默认值为false。</p>
</blockquote>
</li>
<li><p>以下实例我们创建一个 区分大小写的常量, 常量值为 “欢迎访问Runoob.com”：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 区分大小写的常量名</span><br><span class="line">define(&quot;GREETING&quot;, &quot;欢迎访问 Runoob.com&quot;);</span><br><span class="line">echo GREETING;    // 输出 &quot;欢迎访问 Runoob.com&quot;</span><br><span class="line">echo &apos;&lt;br&gt;&apos;;</span><br><span class="line">echo greeting;   // 输出 &quot;greeting&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>以下实例我们创建一个 不区分大小写的常量, 常量值为 “欢迎访问 Runoob.com”：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">// 不区分大小写的常量名</span><br><span class="line">define(&quot;GREETING&quot;, &quot;欢迎访问 Runoob.com&quot;, true);</span><br><span class="line">echo greeting;  // 输出 &quot;欢迎访问 Runoob.com&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="常量是全局的"><a href="#常量是全局的" class="headerlink" title="常量是全局的"></a>常量是全局的</h3><ul>
<li>常量在定义后，默认是全局变量，可以在整个运行的脚本的任何地方使用。</li>
</ul>
<p>以下实例演示了在函数内使用常量，即便常量定义在函数外也可以正常使用常量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">define(&quot;GREETING&quot;, &quot;欢迎访问 Runoob.com&quot;);</span><br><span class="line"></span><br><span class="line">function myTest() &#123;</span><br><span class="line">    echo GREETING;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">myTest();    // 输出 &quot;欢迎访问 Runoob.com&quot;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>

        
      </div>
    </div>

  
    </div>
  



  <div class="pagination">
    <a class="extend prev" rel="prev" href="/categories/技术/page/4/">上一页</a><a class="page-number" href="/categories/技术/">1</a><span class="space">&hellip;</span><a class="page-number" href="/categories/技术/page/3/">3</a><a class="page-number" href="/categories/技术/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/categories/技术/page/6/">6</a><a class="page-number" href="/categories/技术/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/categories/技术/page/14/">14</a><a class="extend next" rel="next" href="/categories/技术/page/6/">下一页</a>
  </div>




          <div class="main-footer">
  
    © 2016 findmoon-白色蜗牛 - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
