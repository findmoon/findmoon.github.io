<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    归档: 2016/5
  
</title>

<meta name="description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta property="og:type" content="website">
<meta property="og:title" content="findmoon-白色蜗牛">
<meta property="og:url" content="//findmoon.github.io/index.html/archives/2016/05/page/2/index.html">
<meta property="og:site_name" content="findmoon-白色蜗牛">
<meta property="og:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="findmoon-白色蜗牛">
<meta name="twitter:description" content="人生是一场不断的转换，我们总是不断地试着所向披靡">




  <link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">findmoon-白色蜗牛</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">findmoon-白色蜗牛</a></h1>
    
      <p class="subtitle">
        一个试图专注于自身的成长者
      </p>
    
    <div class="info">
      <div class="content">
        
          <div class="description">人生是一场不断的转换，我们总是不断地试着所向披靡</div>
        
        
          <div class="author">findmoon</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="http://i2.piimg.com/81760750547ee122.jpg"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">分类</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">134</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/方法-实例/">方法/实例</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a><span class="category-list-count">10</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">标签</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFC/">BFC</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backbone/">Backbone</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS3动画/">CSS3动画</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DNS解析域名/">DNS解析域名</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOCTYPE/">DOCTYPE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MV模式/">MV模式</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mocha/">Mocha</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-UDP/">TCP/UDP</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP三次握手/">TCP三次握手</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/">TDD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UNICODE-ASCII/">UNICODE/ASCII</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animate/">animate()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animate动画队列/">animate动画队列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/background-image/">background-image</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/border/">border</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/border图形/">border图形</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/box-shadow/">box-shadow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/console-log/">console.log()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css属性/">css属性</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css样式/">css样式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deferred/">deferred</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/delete/">delete</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/first-child/">first-child</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/first-of-type/">first-of-type</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/float/">float</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/font-face/">font-face</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/form表单/">form表单</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/get/">get</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitbash/">gitbash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git错误/">git错误</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hack/">hack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haslayout/">haslayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http状态码/">http状态码</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inline-block/">inline-block</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/input/">input</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/instanceof/">instanceof</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/instanceof-typeof/">instanceof/typeof</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/">json</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js严格模式/">js严格模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js加载/">js加载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js模板引擎/">js模板引擎</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/list-style/">list-style</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meta/">meta</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mock/">mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/offset/">offset()</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/overflow/">overflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/placeholder/">placeholder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position/">position</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position文档流/">position文档流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scopechain/">scopechain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stopImmediatePropagation/">stopImmediatePropagation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stringify/">stringify</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime/">sublime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typeof/">typeof</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/undefined/">undefined</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/url加载/">url加载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zoom/">zoom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码书写/">代码书写</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/函数/">函数</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/列表/">列表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动画animation/">动画animation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/变量/">变量</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同源跨域/">同源跨域</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字面量/">字面量</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/库与架构/">库与架构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学函数/">数学函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据包组装/">数据包组装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/方法/">方法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/标记语言/">标记语言</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模块化编程/">模块化编程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/立即执行函数/">立即执行函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简历/">简历</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站访问/">网站访问</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/获取路径/">获取路径</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/行内元素/">行内元素</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语法/">语法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域请求/">跨域请求</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域请求处理方法/">跨域请求处理方法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择器/">选择器</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">归档</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">161</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
            
              <li>
                <a href="/work" title="work">work</a>
              </li>
            
          
            
              <li>
                <a href="/about" title="about">about</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="http://findmoon.github.io/" title="findmoon" target="_blank" rel="external">findmoon</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/findmoon/findmoon.github.io" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          

  
  
    
      
      
      <section class="archives-wrap">
        <div class="archive-year-wrap">
          <h1><a href="/archives/2016" class="archive-year">2016</a></h1>
        </div>
        <div class="post-list">
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/26/web开发的MVVM模式/" >
  web开发的MVVM模式
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/26/web开发的MVVM模式/"><span class="article-date">
  2016-05-26
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/web/">web</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MV模式/">MV模式</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><a href="http://www.cnblogs.com/dxy1982/p/3793895.html" target="_blank" rel="external">web开发的MVVM模式*转</a></p>
<h2 id="MVC-VS-MVP-VS-MVVM"><a href="#MVC-VS-MVP-VS-MVVM" class="headerlink" title="MVC VS. MVP VS. MVVM"></a>MVC VS. MVP VS. MVVM</h2><p>　　了解MVVM模式之前，我们先来简单了解一下从MVC到MVVM的变迁。这个变迁是耦合从紧到松的变迁，是对依赖处理的进化，是应对变化技术的成熟。 </p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>　　MVC全名是Model View Controller， 是模型(model)－视图(view)－控制器(controller)的缩写，它用一种将业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。将系统进行MVC分层的核心思路就是分离组件，降低组件耦合性，组件独立演化。 </p>
<ul>
<li>MVC模式可以使用下面这幅图来描述各个部分的作用以及与其他组件的交互过程： </li>
</ul>
<p><img src="/img/mvvm/311314546808310.png" alt=""></p>
<p>MVC模式的优点很明显，那就是耦合性低，重用性高，应对每个组件的变化性好，便于开发，测试与维护。但是MVC模式也还是有缺点的，给系统带来的额外复杂性自然不必说了，此外，MVC三个组件的定义存在一定的模糊性，这样就衍生了很多的比如主动MVC，被动MVC等实施方案，每种方案中MVC三大组件的功能都不太一样，比如有的把业务逻辑放到Model部分，Controller只不过是把用户输入转换一下，直接传给Model来处理，Model是整个系统的核心部分，上面这幅图就是这样的(这种情况其实就是真正的MVC模式的定义)，还有的方案把业务逻辑直接放到了Controller中，Model只负责处理数据。而且在不同的方案中，要么View与Controller耦合过于紧密，要么View访问Model的时候比较低效，要么Model由于要与View直接打交道，导致了Model与View直接耦合在了一起，而Model发生变化的时候会牵连View一起变化，这却恰恰违背了MVC组件分层的本意。 </p>
<h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><p>　　MVP的全称为Model-View-Presenter，Model提供数据，View负责显示，Presenter负责逻辑的处理。MVP与MVC有着一个重大的区别：在MVP中View并不直接使用Model，它们之间的通信是通过Presenter来进行的，所有的交互都发生在Presenter内部，而在MVC中View会直接从Model中读取数据而不是通过Controller。 </p>
<ul>
<li>MVP模式可以使用下面这幅图来描述各个部分的作用以及与其他组件的交互过程： </li>
</ul>
<p><img src="/img/mvvm/311315046801589.png" alt=""></p>
<p>在MVC里，我们谈到它的缺点主要有两个： </p>
<ul>
<li><p>一个是MVC三大组件的定义比较模糊。这个在MVP中就相对明确一些了：Model只负责处理最终数据；View就是很薄的一层，只显示数据，通常认为，View只应该有简单的Set/Get的方法，View只负责用户输入和设置界面显示的内容，除此就不应该有更多的内容，绝不容许直接访问Model；所有业务逻辑都由Presenter处理，而且，Presenter与具体的View和Model是没有直接关联的，而是通过定义好的接口进行交互，从而使得在变更View或者Model具体实现的时候可以保持Presenter的不变，这样就实现了业务逻辑的重用。 </p>
</li>
<li><p>另一个是View与Model的紧密耦合。在MVC中，View是可以直接访问Model的！从而，View里会包含Model信息，不可避免的还要包括一些业务逻辑。 在MVC模型里，更关注的Model的不变，而同时有多个对Model的不同显示，及View。所以，在MVC模型里，Model不依赖于View，但是View是依赖于Model的。不仅如此，因为有一些业务逻辑在View里实现了，导致要更改View也是比较困难的，至少那些业务逻辑是无法重用的。 </p>
</li>
</ul>
<p>在现实中，MVP的实现会根据View的充、贫血而有一些不同，一部分倾向于在View中放置简单的逻辑，在Presenter放置复杂的逻辑；另一部分倾向于在presenter中放置全部的逻辑。这两种分别被称为：Passive View和Superivising Controller。 </p>
<p>在Passive View中，为了减少UI组件的行为，使用Controller不仅控制用户事件的响应，而且将结果更新到View上。可以集中测试Controller，减小View出问题的风险。 </p>
<p>在Superivising Controller中的Controller既处理用户输入的响应，又操作View处理View的复杂逻辑。 </p>
<p>　　MVP解决了MVC的一些问题，其实现在说到MVC，通常指的也就是MVP。但是MVP也是不完美的，由于Presenter可以反作用于View，这样View的渲染有可能就放在了Presenter中，所以View和Presenter的交互会过于频繁。如果Presenter过多地渲染了View，往往会使得它与特定的View的联系过于紧密。一旦View需要变更，那么Presenter也需要变更了。 </p>
<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>　　MVVM全称Model-View-ViewModel，Model提供数据，View负责显示，这个还和MVP一样，这个模式的重点就是ViewModel的部分，它通过双向绑定(松耦合)解决了MVP中Presenter与View联系比较紧密的问题。 </p>
<ul>
<li>MVVM模式可以使用下面这幅图来描述各个部分的作用以及与其他组件的交互过程： </li>
</ul>
<p><img src="/img/mvvm/311315165713023.png" alt=""></p>
<p>从图中我们可以看到MVVM与MVP最大的不同就在于View与ViewModel交互的时候使用了松耦合的双向绑定，而不是像View与Presenter那样直接交互。ViewModel作为View的数据映射，通常View上有什么属性，ViewModel上也会存在相应的一个属性，这两个属性通过事件实现了双向的绑定，常见的MVVM框架都替我们完成了这样的绑定过程。<br>　　MVVM最初是微软在WPF中实现的模式，随之在Web开发中也开始了MVVM风潮，这里介绍的3个MVVM框架就是我认为比较典型的几个。 </p>
<h3 id="微软的前端框架knockoutjs"><a href="#微软的前端框架knockoutjs" class="headerlink" title="微软的前端框架knockoutjs"></a>微软的前端框架knockoutjs</h3><p>　　这是一个独立的前端MVVM框架，也是最早的前端MVVM框架，它完成了页面的数据与界面之间的双向绑定，至于真正这些数据是通过何种手段(比如Ajax)获取到的，它并不关心。这是一个只关注前端逻辑与界面解耦的纯前端类库，理论上可以搭配任何的后台技术，来完成整个网站的建设。这是我第一个学习的MVVM框架，使用它给我的感觉是相当良好：绑定好了自动双向更新是多么酷的特性啊。 </p>
<ul>
<li>下面是比较火热的几个学习教程： <blockquote>
<p><a href="http://knockoutjs.com/" target="_blank" rel="external">http://knockoutjs.com/</a><br><a href="http://www.cnblogs.com/TomXu/archive/2011/11/21/2257154.html" target="_blank" rel="external">http://www.cnblogs.com/TomXu/archive/2011/11/21/2257154.html</a><br><a href="http://www.cnblogs.com/lori/p/3552571.html" target="_blank" rel="external">http://www.cnblogs.com/lori/p/3552571.html</a> </p>
</blockquote>
</li>
</ul>
<h3 id="谷歌的全套服务angularjs"><a href="#谷歌的全套服务angularjs" class="headerlink" title="谷歌的全套服务angularjs"></a>谷歌的全套服务angularjs</h3><p>　　这是一个比较庞大，但是也无比强大的前端MVVM类库，天生对RESTful API的良好支持，双向绑定的优良特性，专业的HTML模板扩展支持，全面的测试框架，与Bootstrap，Nodejs的完美融合，再加上Google的金字招牌，你可以拒绝么？ </p>
<ul>
<li>下面是比较火热的教程： <blockquote>
<p><a href="https://angularjs.org/" target="_blank" rel="external">https://angularjs.org/</a><br><a href="http://www.ituring.com.cn/minibook/303" target="_blank" rel="external">http://www.ituring.com.cn/minibook/303</a><br><a href="http://www.iteye.com/news/28651-AngularJS-Google-resource" target="_blank" rel="external">http://www.iteye.com/news/28651-AngularJS-Google-resource</a><br><a href="http://woxx.sinaapp.com/" target="_blank" rel="external">http://woxx.sinaapp.com/</a><br><a href="http://www.angularjs.cn/tag/AngularJS" target="_blank" rel="external">http://www.angularjs.cn/tag/AngularJS</a> </p>
</blockquote>
</li>
</ul>
<h3 id="最迷你的MVVM框架avalon"><a href="#最迷你的MVVM框架avalon" class="headerlink" title="最迷你的MVVM框架avalon"></a>最迷你的MVVM框架avalon</h3><p>　　这确实是最mini的MVVM框架，与Angularjs不一样，它侧重数据结构的设计，提倡简单的算法，它是在吸收上面两个类库的基础上发展起来的，而且符合国情，支持IE6，难道不值得期待？ </p>
<ul>
<li>下面是比较好的教程： <blockquote>
<p><a href="http://rubylouvre.github.io/mvvm/" target="_blank" rel="external">http://rubylouvre.github.io/mvvm/</a><br><a href="http://limodou.github.io/avalon-learning/zh_CN/index.html" target="_blank" rel="external">http://limodou.github.io/avalon-learning/zh_CN/index.html</a><br><a href="http://www.cnblogs.com/rubylouvre/p/3181291.html" target="_blank" rel="external">http://www.cnblogs.com/rubylouvre/p/3181291.html</a><br><a href="http://www.oschina.net/p/avalon" target="_blank" rel="external">http://www.oschina.net/p/avalon</a><br><a href="http://www.iteye.com/topic/1130359" target="_blank" rel="external">http://www.iteye.com/topic/1130359</a><br><a href="http://www.tuicool.com/articles/NrMrIn" target="_blank" rel="external">http://www.tuicool.com/articles/NrMrIn</a> </p>
</blockquote>
</li>
</ul>
<p>最后附送一个有意思的网站：<a href="http://todomvc.com/，自己研究一下吧。" target="_blank" rel="external">http://todomvc.com/，自己研究一下吧。</a></p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/25/font-face/" >
  CSS3 @font-face
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/25/font-face/"><span class="article-date">
  2016-05-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/CSS3/">CSS3</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/font-face/">font-face</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>(转)CSS3 @font-face<br><a href="http://www.cnblogs.com/rubylouvre/archive/2011/06/19/2084875.html" target="_blank" rel="external">原文地址</a></p>
<p><a href="http://www.fontsquirrel.com/fontface" target="_blank" rel="external">http://www.fontsquirrel.com/fontface</a></p>
<p>@font-face是CSS3中的一个模块，他主要是把自己定义的Web字体嵌入到你的网页中，随着@font-face模块的出现，我们在Web的开发中使用字体不怕只能使用Web安全字体，你们当中或许有许多人会不自然的问，这样的东西IE能支持吗？当我告诉大家@font-face这个功能早在IE4就支持了你肯定会感到惊讶。我的Blog就使用了许多这样的自定义Web字体，比如说首页的Logo，Tags以及页面中的手写英文体，很多朋友问我如何使用，能让自己的页面也支持这样的自定义字体，一句话这些都是@font-face实现的，为了能让更多的朋友知道如何使用他，今天我主要把自己的一点学习过程贴上来和大家分享。</p>
<p>首先我们一起来看看@font-face的语法规则：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">   font-family: &lt;YourWebFontName&gt;;</span><br><span class="line">   src: &lt;source&gt; [&lt;format&gt;][,&lt;source&gt; [&lt;format&gt;]]*;</span><br><span class="line">   [font-weight: &lt;weight&gt;];</span><br><span class="line">   [font-style: &lt;style&gt;];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>取值说明</p>
<p>YourWebFontName:此值指的就是你自定义的字体名称，最好是使用你下载的默认字体，他将被引用到你的Web元素中的font-family。如“font-family:”YourWebFontName”;”<br>source:此值指的是你自定义的字体的存放路径，可以是相对路径也可以是绝路径；<br>format：此值指的是你自定义的字体的格式，主要用来帮助浏览器识别，其值主要有以下几种类型：truetype,opentype,truetype-aat,embedded-opentype,avg等；<br>weight和style:这两个值大家一定很熟悉，weight定义字体是否为粗体，style主要定义字体样式，如斜体。<br>兼容浏览器</p>
<p>说到浏览器对@font-face的兼容问题，这里涉及到一个字体format的问题，因为不同的浏览器对字体格式支持是不一致的，这样大家有必要了解一下，各种版本的浏览器支持什么样的字体，前面也简单带到了有关字体的几种格式，下面我就分别说一下这个问题，让大家心里有一个概念：</p>
<p>一、TureTpe(.ttf)格式：</p>
<p>.ttf字体是Windows和Mac的最常见的字体，是一种RAW格式，因此他不为网站优化,支持这种字体的浏览器有【IE9+,Firefox3.5+,Chrome4+,Safari3+,Opera10+,iOS Mobile Safari4.2+】；</p>
<p>二、OpenType(.otf)格式：</p>
<p>.otf字体被认为是一种原始的字体格式，其内置在TureType的基础上，所以也提供了更多的功能,支持这种字体的浏览器有【Firefox3.5+,Chrome4.0+,Safari3.1+,Opera10.0+,iOS Mobile Safari4.2+】；</p>
<p>三、Web Open Font Format(.woff)格式：</p>
<p>.woff字体是Web字体中最佳格式，他是一个开放的TrueType/OpenType的压缩版本，同时也支持元数据包的分离,支持这种字体的浏览器有【IE9+,Firefox3.5+,Chrome6+,Safari3.6+,Opera11.1+】；</p>
<p>四、Embedded Open Type(.eot)格式：</p>
<p>.eot字体是IE专用字体，可以从TrueType创建此格式字体,支持这种字体的浏览器有【IE4+】；</p>
<p>五、SVG(.svg)格式：</p>
<p>.svg字体是基于SVG字体渲染的一种格式,支持这种字体的浏览器有【Chrome4+,Safari3.1+,Opera10.0+,iOS Mobile Safari3.2+】。</p>
<p>这就意味着在@font-face中我们至少需要.woff,.eot两种格式字体，甚至还需要.svg等字体达到更多种浏览版本的支持。</p>
<p>为了使@font-face达到更多的浏览器支持，Paul Irish写了一个独特的@font-face语法叫Bulletproof @font-face:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  @font-face &#123;</span><br><span class="line">font-family: &apos;YourWebFontName&apos;;</span><br><span class="line">src: url(&apos;YourWebFontName.eot?&apos;) format(&apos;eot&apos;);/*IE*/</span><br><span class="line">src:url(&apos;YourWebFontName.woff&apos;) format(&apos;woff&apos;), url(&apos;YourWebFontName.ttf&apos;) format(&apos;truetype&apos;);/*non-IE*/</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>但为了让各多的浏览器支持，你也可以写成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  @font-face &#123;</span><br><span class="line">font-family: &apos;YourWebFontName&apos;;</span><br><span class="line">src: url(&apos;YourWebFontName.eot&apos;); /* IE9 Compat Modes */</span><br><span class="line">src: url(&apos;YourWebFontName.eot?#iefix&apos;) format(&apos;embedded-opentype&apos;), /* IE6-IE8 */</span><br><span class="line">            url(&apos;YourWebFontName.woff&apos;) format(&apos;woff&apos;), /* Modern Browsers */</span><br><span class="line">            url(&apos;YourWebFontName.ttf&apos;)  format(&apos;truetype&apos;), /* Safari, Android, iOS */</span><br><span class="line">            url(&apos;YourWebFontName.svg#YourWebFontName&apos;) format(&apos;svg&apos;); /* Legacy iOS */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>说了这么多空洞的理论知识，大家一定有点心痒痒了，那么我们先来看看W3CPLUS首页中导航部分的兰色字体是如何实现的，假如我们有一个这样的DOM标签，需要应用自定义字体：</p>
<p>HTML Code:</p>
<p>&lt; h2 class=”neuesDemo”&gt;Neues Bauen Demo&lt; /h2&gt;<br>通过@font-face来定义自己的Web Font:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">  font-family: &apos;NeuesBauenDemo&apos;;</span><br><span class="line">  src: url(&apos;../fonts/neues_bauen_demo-webfont.eot&apos;);</span><br><span class="line">  src: url(&apos;../fonts/neues_bauen_demo-webfont.eot?#iefix&apos;) format(&apos;embedded-opentype&apos;),</span><br><span class="line">   url(&apos;../fonts/neues_bauen_demo-webfont.woff&apos;) format(&apos;woff&apos;),</span><br><span class="line">   url(&apos;../fonts/neues_bauen_demo-webfont.ttf&apos;) format(&apos;truetype&apos;),</span><br><span class="line">   url(&apos;../fonts/neues_bauen_demo-webfont.svg#NeuesBauenDemo&apos;) format(&apos;svg&apos;);</span><br><span class="line">  font-weight: normal;</span><br><span class="line">  font-style: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我在这里采用的是相对路径，当然大家也可以使用绝路径。到这里我们就需要把定义好的字体应用到我们实际页面中去：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">h2.neuesDemo &#123;</span><br><span class="line">   font-family: &apos;NeuesBauenDemo&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果：<br><img src="/img/fontface/o_neues-bauen-demo.jpg" alt=""></p>
<p>看到上面的效果，我想大家会感到@font-face很神奇，同时也想争着做做看，可是一动手才发现，特殊字体我要怎样才能得到，那些.eot,.woff,.ttf,.svg这些字体格式又怎么获取呢？有些朋友可能就不知道如何运手了，那么我们就带着这些问题来一个全程完成的实例吧：</p>
<p>一、获取特殊字体：</p>
<p>我们拿下面这种single Malta字体来说吧：</p>
<p><img src="/img/fontface/o_font-face-single-malta-demo.jpg" alt=""></p>
<p>要得到single Malta字体，不外乎两种途径，其一找到付费网站购买字体，其二就是到免费网站DownLoad字体。当然要给钱的这种傻事我想大家都不会做的，那我们就得到免费的地方下载，在哪有呢？我平时都是到<a href="http://www.google.com/webfonts" target="_blank" rel="external">Google Web Fonts</a>和<a href="http://www.dafont.com/" target="_blank" rel="external">Dafont.com</a>寻找自己需要的字体，当然网上也还有别的下载字体的地方，这个Demo使用的是Dafont.com的Single Malta字体，这样就可以到这里下载<a href="http://www.dafont.com/single-malta.font" target="_blank" rel="external">Single Malta</a>：</p>
<p><img src="/img/fontface/o_single-malta-font.jpg" alt=""></p>
<p>二、获取@font-face所需字体格式：</p>
<p>特殊字体已经在你的电脑中了，现在我们需要想办法获得@font-face所需的.eot,.woff,.ttf,.svg字体格式。要获取这些字体格式，我们同样是需要第三方工具或者软件来实现，下面我给大家推荐一款我常用的一个工具fontsquirrel,别的先不多说，首跟我点这里进入到下面这个界面吧。</p>
<p><img src="/img/fontface/o_font-face-kit-generator.png" alt=""></p>
<p>如果你进入页面没有看到上图，你可以直接点击导航:</p>
<p>如果你看到了上面的界面，那就好办了，我们来看如何应用这个工具生成@font-face需要的各种字体，先把我们刚才下载的字体上传上去：</p>
<p><img src="/img/fontface/o_add-fonts.jpg" alt=""></p>
<p>大家可以看到，解压缩出来的文件格式，里面除了@font-face所需要的字体格式外，还带有一个DEMO文件，如果你不清楚的也可以参考下载下来的DEMO文件，我在这里不对DEMO说明问题，我主要是给大家介绍如何把下载下来的文件有价值的运用到我们的项目中。</p>
<p>例如在自己的本地创建了一个fontface项目：</p>
<p>为了让项目结构更清晰，我们在项目中单独创建一个fonts目录，用来放置解压缩出来@font-face所需的字体格式：<br><img src="/img/fontface/o_font-face-project-demo.jpg" alt=""></p>
<p>现在@font-face所需字体已经加载到本地项目，现在本地项目中的style.css中附上我们需要的@font-face样式</p>
<p>@font-face {<br>   font-family: ‘SingleMaltaRegular’;<br>   src: url(‘../fonts/singlemalta-webfont.eot’);<br>   src: url(‘../fonts/singlemalta-webfont.eot?#iefix’) format(‘embedded-opentype’),<br>        url(‘../fonts/singlemalta-webfont.woff’) format(‘woff’),<br>    url(‘../fonts/singlemalta-webfont.ttf’) format(‘truetype’),<br>    url(‘../fonts/singlemalta-webfont.svg#SingleMaltaRegular’) format(‘svg’);<br>   font-weight: normal;<br>   font-style: normal;<br>}<br>到这里为止，我们已经通过@font-face自定义好所需的SingleMalta字体，离最后效果只差一步了，就是把自己定义的字体应用到你的Web中的DOM元素上：</p>
<p>h2.singleMalta {<br>  font-family: ‘SingleMaltaRegular’<br>}</p>
<p>看到上面的效果，那大家就知道我们实现成功了。那么关于@font-face帮你打造特殊效果的字体，到这里基本上就完成了，我在这里需要提醒使用者：</p>
<p>1、如果你的项目中是英文网站，而且项目中的Logo，Tags等应用到较多的这种特殊字体效果，我建议你不要使用图片效果，而使用@font-face，但是你是中文网站，我觉得还是使用图片比较合适，因为加载英文字体和图片没有多大区别，但是你加载中文字体，那就不一样了，因为中文字体太大了，这样会影响到项目的某些性能的优化；</p>
<p>2、致命的错误，你在@font-face中定义时，文件路径没有载对；</p>
<p>3、你只定义了@font-face，但并没有应用到你的项目中的DOM元素上；</p>
<p>以上几点都是在平时制作中常出现的问题，希望大家能小意一些，另外我们没有办法在购买所有字体，就算你实力雄厚，那也没有办法在一台服务器主机上放置你所有项目需要的字体。因此我给大家提供几个免费字体下载的网址：Webfonts,Typekit,Kernest,Google Web Fonts,Kernest,Dafont,Niec Web Type,不然你点这里将有更多的免费字体。前面几个链接是帮助你获取一些优美的怪异的特殊字体，但下面这个工具作用更是无穷的大，他能帮你生成@font-face所需要的各种字体，这工具就是Font Squirrel。</p>
<p>最后在提醒一下，使用@font-face别的可以忘了，但Font Squirrel千万不能忘，因为他能帮你生成@font-face所需的各种字体格式。</p>
<p>到此关于@font-face就介绍完了，不知道大家喜欢不喜欢，如果喜欢的话赶快动手实践一下，有Blog的可以马上运用上去，也可以炫一下。</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/25/库与架构/" >
  库和框架区别
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/25/库与架构/"><span class="article-date">
  2016-05-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/jQ/">jQ</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/库与架构/">库与架构</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <h1 id="库和框架区别"><a href="#库和框架区别" class="headerlink" title="库和框架区别"></a>库和框架区别</h1><p>库和框架都是一种有别于软件、面向程序开发者的产品形式。正因为如此，也有很多人误以为库就是框架，或者认为指定语言的库就是框架。</p>
<p>库的英语为 Library ( 简写 Lib )，框架的英语为 Framework。</p>
<p>库是将代码集合成的一个产品，供程序员调用。面向对象的代码组织形式而成的库也叫类库。面向过程的代码组织形式而成的库也叫函数库。<br>在函数库中的可直接使用的函数叫库函数。开发者在使用库的时候，只需要使用库的一部分类或函数，然后继续实现自己的功能。</p>
<p>框架则是为解决一个(一类)问题而开发的产品，框架用户一般只需要使用框架提供的类或函数，即可实现全部功能。可以说，框架是库的升级版。<br>开发者在使用框架的时候，必须使用这个框架的全部代码。</p>
<p>库是一些方法的集合，避免定义重复功能的函数并具有一定的模式兼容性。类似于一个工具箱，里面有很多的工具，比如jQuery，可以很方便的调用里面的方法和函数，实现一些功能。<br>框架更应该是一种对开发者的规范，开发者按照框架的设计去实现以下功能或效果，并非简单的工具集的概念，框架可以提供相应的库或者基于库来实现，但是库一般不具备框架的规范性。比如bootstrap，提供了一种完整的规范和功能，我们在它的基础上进行调整。</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/25/php连接数据库（转载二）t/" >
  php连接数据库（转载二）
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/25/php连接数据库（转载二）t/"><span class="article-date">
  2016-05-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/数据库/">数据库</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><a href="http://www.cnblogs.com/csensix/archive/2012/05/23/2515494.html" target="_blank" rel="external">PHP连接MySQL数据库*转</a></p>
<p>既然现在你看到了这篇文章，说明你肯定知道PHP和MySQL是怎么一回事，我就不啰嗦了。但为什么你还要继续阅读此文呢？可能是以前你习惯复制粘贴一些代码，并没有真正弄懂代码的含义；也可能你以前弄懂了，但像我一样，有一段时间没有接触，生疏了；再或者，有人问你类似的简单问题，而你已经不屑于回答，直接上网搜索，恰好找到了这篇，于是就推荐给那谁谁谁了…不管怎样，在这里我总结了三种常用的PHP连接MySQL数据库方法，希望能够帮到你，当然也是作为我自己的一个回顾总结。</p>
<p>方法一：普通方法（面向过程）</p>
<p>首先，我先做出如下假设（也适用与方法二和方法三）</p>
<blockquote>
<p>$username=your_name;<br>$userpass=your_pass;<br>$dbhost=localhost;<br>$dbdatabase=your_database;<br>下面是关键步骤：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> 1 //生成一个连接</span><br><span class="line"> 2 $db_connect=mysql_connect($dbhost,$username,$userpass) or die(&quot;Unable to connect to the MySQL!&quot;);</span><br><span class="line"> 3 </span><br><span class="line"> 4 //选择一个需要操作的数据库</span><br><span class="line"> 5 mysql_select_db($dbdatabase,$db_connect);</span><br><span class="line"> 6 </span><br><span class="line"> 7 //执行MySQL语句</span><br><span class="line"> 8 $result=mysql_query(&quot;SELECT id,name FROM user&quot;);</span><br><span class="line"> 9 </span><br><span class="line">10 //提取数据</span><br><span class="line">11 $row=mysql_fetch_row($result);</span><br></pre></td></tr></table></figure>
<p>代码注释已经说明了一切。不过这里还需要做一些补充。</p>
<p>①在mysql_connect()、mysql_select_db()等函数之前使用@（错误控制运算符），可以忽略掉系统产生的错误信息，然后我们用die()来自定义错误信息；</p>
<p>②提取数据的时候，除了上面的mysql_fetch_row，常见的还有mysql_fetch_assoc和mysql_fetch_array，具体差别请查阅PHP Manual；</p>
<p>③对于mysql_query()函数的返回值，如果执行的语句有返回值（如SELECT、SHOW、DESCRIBE等），则返回相应数据（成功时）或FALSE（失败时）；如果执行的语句没有返回值（如DELETE、DROP、INSERT、UPDATE等），则返回TRUE（成功时）或FALSE（失败时）。</p>
<p>方法二：面向对象方法</p>
<p>其实这种方法和普通方法非常类似，只是把相应的函数换成了面向对象方法，直接看代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1 $db=new mysqli($dbhost,$username,$userpass,$dbdatabase);</span><br><span class="line">2 if(mysqli_connect_error())&#123;</span><br><span class="line">3     echo &apos;Could not connect to database.&apos;;</span><br><span class="line">4     exit;</span><br><span class="line">5 &#125;</span><br><span class="line">6 </span><br><span class="line">7 $result=$db-&gt;query(&quot;SELECT id,name FROM user&quot;);</span><br><span class="line">8 $row=$result-&gt;fetch_row();</span><br></pre></td></tr></table></figure>
<p>这里用到的是mysqli，意思就是mysql的扩展，既可以通过面向过程的方式也可以通过面向对象的方式与数据库进行交互，唯一不同的是调用函数（对象方法）的方式不一样。</p>
<p>方法三：PDO方法</p>
<p>PDO其实是PHP Database Objects的缩写，中文即PHP数据库对象。它提供了一种统一的PHP与数据库交互的方法。</p>
<p>这是目前比较流行的一种连接数据库的方法。它的优势在于：只要正确提供数据源，余下对于数据库的基本操作都是一样的。也就是说，同一段代码既可以同MySQL交互，也可以和SQLite3交互，当然也可以和PostgreSQL进行交互，前提是你提供了正确的数据源。下面看一下连接MySQL的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$dsn=&apos;mysql:host=&apos;.$dbhost.&apos;;dbname=&apos;.$dbdatabase.&apos;;&apos;</span><br><span class="line">$dbh=new PDO($dsn,$username,$userpass);</span><br><span class="line">如果是SQLite3，直接使用下面的代码：</span><br><span class="line"></span><br><span class="line">$dsn=&apos;sqlite3:&quot;C:\sqlite\user.db&quot;&apos;;</span><br><span class="line">$dbh=new PDO($dsn);</span><br><span class="line">如果是PostgreSQL，下面的代码能够对付：</span><br><span class="line"></span><br><span class="line">$dsn=&apos;pgsql:host=&apos;.$dbhost.&apos; port=5432 dbname=&apos;.$dbdatabase.&apos; user=&apos;.$username.&apos; password=&apos;.$userpass;</span><br><span class="line">$dbh=new PDO($dsn);</span><br></pre></td></tr></table></figure></p>
<p>跟数据库成功建立连接之后，下面就只需要从数据库获取数据或插入更新数据，实例代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$stmt=$dbh-&gt;query(&apos;SELECT id,name FROM user&apos;);</span><br><span class="line">$row=$stmt-&gt;fetch();</span><br></pre></td></tr></table></figure>
<p>至此，文章告一段落。当然，上面只是简单的介绍了一下PHP与数据库有关的最简单的操作，后面还有很多比如插入、排序、防止SQL注入等等一些方面的知识需要深入学习。希望有机会能够和大家一起探讨，共同进步。</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/25/php连接数据库（转载一）/" >
  php连接数据库（转载一）
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/25/php连接数据库（转载一）/"><span class="article-date">
  2016-05-25
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/数据库/">数据库</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>忠告：写程序切记马虎，不细仔，真是写程序的大忌中的大忌。所以以后写代码务必：细心仔细不骄不燥，才能写出来好代码来，避免迷惘。。</p>
<p> 繁写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">    echo &quot;This is a test&lt;/br&gt;&quot;; </span><br><span class="line">    echo &quot;asdfasdfadsf&quot;;</span><br><span class="line">    $mysql_server_name=&quot;localhost&quot;; //数据库服务器名称</span><br><span class="line">    $mysql_username=&quot;root&quot;; // 连接数据库用户名</span><br><span class="line">    $mysql_password=&quot;??????&quot;; // 连接数据库密码</span><br><span class="line">    $mysql_database=&quot;??????&quot;; // 数据库的名字</span><br><span class="line">    </span><br><span class="line">    // 连接到数据库</span><br><span class="line">    $conn=mysql_connect($mysql_server_name, $mysql_username,</span><br><span class="line">                        $mysql_password);</span><br><span class="line">                        </span><br><span class="line">     // 从表中提取信息的sql语句</span><br><span class="line">    $strsql=&quot;SELECT * FROM `gbook`&quot;;</span><br><span class="line">    // 执行sql查询</span><br><span class="line">    $result=mysql_db_query($mysql_database, $strsql, $conn);</span><br><span class="line">    // 获取查询结果</span><br><span class="line">    $row=mysql_fetch_row($result);</span><br><span class="line">    </span><br><span class="line">     </span><br><span class="line">    echo &apos;&lt;font face=&quot;verdana&quot;&gt;&apos;;</span><br><span class="line">    echo &apos;&lt;table border=&quot;1&quot; cellpadding=&quot;1&quot; cellspacing=&quot;2&quot;&gt;&apos;;</span><br><span class="line"></span><br><span class="line">    // 显示字段名称</span><br><span class="line">    echo &quot;&lt;/b&gt;&lt;tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    for ($i=0; $i&lt;mysql_num_fields($result); $i++)</span><br><span class="line">    &#123;</span><br><span class="line">      echo &apos;&lt;td bgcolor=&quot;#000F00&quot;&gt;&lt;b&gt;&apos;.</span><br><span class="line">      mysql_field_name($result, $i);</span><br><span class="line">      echo &quot;&lt;/b&gt;&lt;/td&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    echo &quot;&lt;/tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    // 定位到第一条记录</span><br><span class="line">    mysql_data_seek($result, 0);</span><br><span class="line">    // 循环取出记录</span><br><span class="line">    while ($row=mysql_fetch_row($result))</span><br><span class="line">    &#123;</span><br><span class="line">      echo &quot;&lt;tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">      for ($i=0; $i&lt;mysql_num_fields($result); $i++ )</span><br><span class="line">      &#123;</span><br><span class="line">        echo &apos;&lt;td bgcolor=&quot;#00FF00&quot;&gt;&apos;;</span><br><span class="line">        echo $row[$i];</span><br><span class="line">        echo &apos;&lt;/td&gt;&apos;;</span><br><span class="line">      &#125;</span><br><span class="line">      echo &quot;&lt;/tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    echo &quot;&lt;/table&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">    // 释放资源</span><br><span class="line">    mysql_free_result($result);</span><br><span class="line">    // 关闭连接</span><br><span class="line">    mysql_close($conn);  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>简写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"> $conn=mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;password&quot;);             </span><br><span class="line"> $result=mysql_db_query(&quot;Database&quot;, &quot;SELECT * FROM `info`&quot;, $conn);</span><br><span class="line">    // 获取查询结果</span><br><span class="line">     $row=mysql_fetch_row($result);</span><br><span class="line">    </span><br><span class="line">     </span><br><span class="line">    echo &apos;&lt;font face=&quot;verdana&quot;&gt;&apos;;</span><br><span class="line">    echo &apos;&lt;table border=&quot;1&quot; cellpadding=&quot;1&quot; cellspacing=&quot;2&quot;&gt;&apos;;</span><br><span class="line"></span><br><span class="line">    // 显示字段名称</span><br><span class="line">    echo &quot;&lt;/b&gt;&lt;tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    for ($i=0; $i&lt;mysql_num_fields($result); $i++)</span><br><span class="line">    &#123;</span><br><span class="line">      echo &apos;&lt;td bgcolor=&quot;#000F00&quot;&gt;&lt;b&gt;&apos;.</span><br><span class="line">      mysql_field_name($result, $i);</span><br><span class="line">      echo &quot;&lt;/b&gt;&lt;/td&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    echo &quot;&lt;/tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    // 定位到第一条记录</span><br><span class="line">    mysql_data_seek($result, 0);</span><br><span class="line">    // 循环取出记录</span><br><span class="line">    while ($row=mysql_fetch_row($result))</span><br><span class="line">    &#123;</span><br><span class="line">      echo &quot;&lt;tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">      for ($i=0; $i&lt;mysql_num_fields($result); $i++ )</span><br><span class="line">      &#123;</span><br><span class="line">        echo &apos;&lt;td bgcolor=&quot;#00FF00&quot;&gt;&apos;;</span><br><span class="line">        echo $row[$i];</span><br><span class="line">        echo &apos;&lt;/td&gt;&apos;;</span><br><span class="line">      &#125;</span><br><span class="line">      echo &quot;&lt;/tr&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    echo &quot;&lt;/table&gt;&lt;/b&gt;&quot;;</span><br><span class="line">    echo &quot;&lt;/font&gt;&quot;;</span><br><span class="line">    // 释放资源</span><br><span class="line">    mysql_free_result($result);</span><br><span class="line">    // 关闭连接</span><br><span class="line">    mysql_close($conn);  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p> echo出来的主要是表格</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/js跨域请求/" >
  js跨域请求
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/js跨域请求/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网络/">网络</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨域请求/">跨域请求</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><a href="http://blog.csdn.net/chosen0ne/article/details/7333626" target="_blank" rel="external">js跨域请求,原文地址</a></p>
<ol>
<li><p>同源策略</p>
<pre><code>所有的浏览器都遵守同源策略，这个策略能够保证一个源的动态脚本不能读取或操作其他源的http响应和cookie，这就使浏览器隔离了来自不同源的内容，防止它们互相操作。所谓同源是指协议、域名和端口都一致的情况。举例来说，首先在Nginx上配置两个虚拟主机，一个监听80端口，另一个监听81端口：
</code></pre><p>[plain] view plain copy print?<br>server {  </p>
<pre><code>listen 80;  
server_name localhost;  

location / {  
    root   D:/dev/workspace;  
            index  index.html index.htm;  
}  

location ~ \.php$ {  
    # 委托给后端的php  
    }  
</code></pre><p> }  </p>
<pre><code>81端口的server配置是类似的，只是端口不同而已，所以通过80和81端口会访问到相同的东西。写两个php，一个是用于页面展示的show_person.php，另一个是用于生成json数据的person.php。
</code></pre><p>[php] view plain copy print?<br>// show_person.php  </p>
</li>
</ol>
<html><br>    <head><br>        <script type="text/javascript" src="js/jquery.min.js"></script><br>        <script type="text/javascript"><br>            function sayHello(person){<br>                alert(person.name + ‘, your age is ‘ + person.age);<br>            }<br>           // 通过jQuery的ajax请求person.php的数据<br>            $.getJSON(‘<a href="http://localhost:80/MongoTest/person.php">http://localhost:80/MongoTest/person.php</a>‘, function(data){<br>                sayHello(data);<br>            });<br>        </script><br>    </head><br>    <body><br>    </body><br></html>  

<p>[php] view plain copy print?<br>// person.php  </p>
<p>&lt;?php<br>$person = array(‘name’ =&gt; ‘kobe’, ‘age’ =&gt; 34);<br>echo json_encode($person);<br>?&gt;<br>        注意show_person.php中通过jQuery的getJSON请求<a href="http://localhost:80/MongoTest/person.php，这里是80端口。" target="_blank" rel="external">http://localhost:80/MongoTest/person.php，这里是80端口。</a><br>然后先访问80端口试试，键入url：<a href="http://localhost/cross_domain/show_person.php。会弹出对话框，显示：kobe" target="_blank" rel="external">http://localhost/cross_domain/show_person.php。会弹出对话框，显示：kobe</a>, your age is 34。<br>        然后再访问81端口，<a href="http://localhost:81/cross_domain/show_person.php，结果出错：" target="_blank" rel="external">http://localhost:81/cross_domain/show_person.php，结果出错：</a><br>XMLHttpRequest cannot load<a href="http://localhost/MongoTest/person.php" target="_blank" rel="external">http://localhost/MongoTest/person.php</a>. Origin <a href="http://localhost:81" target="_blank" rel="external">http://localhost:81</a> is not allowed by Access-Control-Allow-Origin.</p>
<pre><code>这就是同源策略作用的效果。因为浏览器中访问的是81端口的内容，而show_person.php中请求的是80端口，所以请求的是不同源的内容，浏览器直接阻止这次请求。
</code></pre><ol>
<li>打破同源策略的限制<pre><code>浏览器会阻止ajax请求非同源的内容，但没有限制&lt;script&gt;标签来访问非同源的内容，也没有限制使用动态添加&lt;script&gt;标签，所以可以采用这种方式打破这种限制。先测试下&lt;script&gt;访问非同源的内容，修改show_person.php，如下：
</code></pre>[php] view plain copy print?<br>// show_person.php  </li>
</ol>
<p><html><br>    <head><br>        <script type="text/javascript" src="js/jquery.min.js"></script><br>        <script type="text/javascript"><br>            function sayHello(person){<br>                alert(person.name + ‘, your age is ‘ + person.age);<br>            }<br>        </script>  </head></html></p>
<pre><code>    &lt;script type=&quot;text/javascript&quot; src=&quot;http://localhost:80/MongoTest/person.php&quot; &gt;&lt;/script&gt;  
&lt;/head&gt;  
&lt;body&gt;  
&lt;/body&gt;  
</code></pre><p><br>        还需要对person.php略微修改，以实现函数调用：<br>[php] view plain copy print?<br>// person.php  </p>
<p>&lt;?php<br>$person = array(‘name’ =&gt; ‘kobe’, ‘age’ =&gt; 34);<br>echo ‘sayHello(‘.json_encode($person).’)’;<br>?&gt;<br>        实际上，通过<script>标签就是将远程请求来的数据插入到<script></script>之间。访问80和81端口，都会得到希望得到的结果：kobe, your age is 34。<br>        下面就看一下，动态添加<script>标签实现跨域请求数据。修改show_person.php：<br>[php] view plain copy print?<br>// show_person.php  </p>
<p><html><br>    <head><br>        <script type="text/javascript" src="js/jquery.min.js"></script><br>        <script type="text/javascript"><br>            function sayHello(person){<br>                alert(person.name + ‘, your age is ‘ + person.age);<br>            }<br>                // 通过callback参数指定回调函数<br>            var url = ‘<a href="http://localhost:80/MongoTest/person.php?callback=sayHello">http://localhost:80/MongoTest/person.php?callback=sayHello</a>‘;<br>            var script = document.createElement(‘script’);<br>            script.setAttribute(‘src’, url);<br>            document.getElementsByTagName(‘head’)[0].appendChild(script);<br>        </script><br>    <br>    <body><br>    </body><br><br>        person.php再做修改：<br>[php] view plain copy print?<br>// person.php  </p>
<p>&lt;?php<br>$person = array(‘name’ =&gt; ‘kobe’, ‘age’ =&gt; 34);<br>echo $_REQUEST[‘callback’].’(‘.json_encode($person).’)’;<br>?&gt;<br>        通过81端口访问，发现也会打印出结果。这就实现了跨域请求，可以通过firefox的firebug或者chrome的js控制台查看html元素发现，在head元素上多了一个<script>元素<br>[html] view plain copy print?</p>
<p><script src="http://localhost:80/MongoTest/person.php?callback=sayHello"></script>  </p>
<ol>
<li>JSONP<pre><code>实际上，上面的例子就是一个JSONP的简单实现。JSONP（JSON with Padding）就是服务器端和客户端互相协作以完成跨域请求的一种协议，客户端向服务器端发送请求并附带callback函数，服务器端返回相应的js代码，这个代码就是执行回调函数，参数就是服务器端返回的JSON数据。上面例子中的person.php就是服务端的简单实现，返回的响应内容是sayHello({&quot;name&quot;:&quot;kobe&quot;,&quot;age&quot;:34})，这段内容会被客户端插入到动态生成的script标签内部。
客户端在发起跨域请求时，需要制定具体的回调函数，比如这个请求http://localhost:80/MongoTest/person.php?callback=sayHello，callback就是回调函数，服务器端也要通过callback要提取回调函数名，所以具体的这个参数需要客户端和服务器端达成一致，否则不能实现跨域。
在jQuery中拥有对JSONP的支持，只要在使用jQuery.getJSON方法时传入的url的格式是url?callback=?即可，jQuery会自动的将?替换成具体的回调函数名。上面例子的功能，可以采用jQuery改写成：
</code></pre>[javascript] view plain copy print?<br>$.getJSON(‘<a href="http://localhost:80/MongoTest/person.php?callback=?" target="_blank" rel="external">http://localhost:80/MongoTest/person.php?callback=?</a>‘, function(data){<br> sayHello(data);<br>});  <pre><code>访问81端口，可以得到正确的响应。观察一下，发现person.php的响应内容是：
        jQuery17103600438670255244_1331202380099({&quot;name&quot;:&quot;kobe&quot;,&quot;age&quot;:34})
前面的jQuery17103600438670255244_1331202380099就是jQuery动态生成的回调函数名，然后在这个回调函数内容调用后面定义的匿名函数，并将得到的JSON数据传进去。jQuery可以优化JSONP请求，如果向同一个源发出请求，jQuery 就将其转化为普通 Ajax 请求。
</code></pre></li>
</ol>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/js跨域总结与解决办法/" >
  js跨域总结与解决办法
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/js跨域总结与解决办法/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网络/">网络</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨域请求/">跨域请求</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><a href="http://www.cnblogs.com/rainman/archive/2011/02/20/1959325.html" target="_blank" rel="external">原文链接</a><br>什么是跨域<br>JavaScript出于安全方面的考虑，不允许跨域调用其他页面的对象。但在安全限制的同时也给注入iframe或是ajax应用上带来了不少麻烦。这里把涉及到跨域的一些问题简单地整理一下：</p>
<p>首先什么是跨域，简单地理解就是因为JavaScript同源策略的限制，a.com 域名下的js无法操作b.com或是c.a.com域名下的对象。更详细的说明可以看下表：<br><img src="/img/php/QQ截图20160529204200.png" alt=""></p>
<p>特别注意两点：<br>第一，如果是协议和端口造成的跨域问题“前台”是无能为力的，<br>第二：在跨域问题上，域仅仅是通过“URL的首部”来识别而不会去尝试判断相同的ip地址对应着两个域或两个域是否在同一个ip上。<br>“URL的首部”指window.location.protocol +window.location.host，也可以理解为“Domains, protocols and ports must match”。<br>接下来简单地总结一下在“前台”一般处理跨域的办法，后台proxy这种方案牵涉到后台配置，这里就不阐述了，有兴趣的可以看看yahoo的这篇文章：<a href="http://developer.yahoo.com/javascript/howto-proxy.html" target="_blank" rel="external">《JavaScript: Use a Web Proxy for Cross-Domain XMLHttpRequest Calls》</a></p>
<p>1、document.domain+iframe的设置<br>对于主域相同而子域不同的例子，可以通过设置document.domain的办法来解决。具体的做法是可以在<a href="http://www.a.com/a.html和http://script.a.com/b.html两个文件中分别加上document.domain" target="_blank" rel="external">http://www.a.com/a.html和http://script.a.com/b.html两个文件中分别加上document.domain</a> = ‘a.com’；然后通过a.html文件中创建一个iframe，去控制iframe的contentDocument，这样两个js文件之间就可以“交互”了。当然这种办法只能解决主域相同而二级域名不同的情况，如果你异想天开的把script.a.com的domian设为alibaba.com那显然是会报错地！代码如下：</p>
<p>www.a.com上的a.html</p>
<p>document.domain = ‘a.com’;<br>var ifr = document.createElement(‘iframe’);<br>ifr.src = ‘<a href="http://script.a.com/b.html" target="_blank" rel="external">http://script.a.com/b.html</a>‘;<br>ifr.style.display = ‘none’;<br>document.body.appendChild(ifr);<br>ifr.onload = function(){<br>    var doc = ifr.contentDocument || ifr.contentWindow.document;<br>    // 在这里操纵b.html<br>    alert(doc.getElementsByTagName(“h1”)[0].childNodes[0].nodeValue);<br>};<br>script.a.com上的b.html</p>
<p>document.domain = ‘a.com’;<br>这种方式适用于{www.kuqin.com, kuqin.com, script.kuqin.com, css.kuqin.com}中的任何页面相互通信。</p>
<p>备注：某一页面的domain默认等于window.location.hostname。主域名是不带www的域名，例如a.com，主域名前面带前缀的通常都为二级域名或多级域名，例如www.a.com其实是二级域名。 domain只能设置为主域名，不可以在b.a.com中将domain设置为c.a.com。</p>
<p>问题：<br>1、安全性，当一个站点（b.a.com）被攻击后，另一个站点（c.a.com）会引起安全漏洞。<br>2、如果一个页面中引入多个iframe，要想能够操作所有iframe，必须都得设置相同domain。<br>2、动态创建script<br>虽然浏览器默认禁止了跨域访问，但并不禁止在页面中引用其他域的JS文件，并可以自由执行引入的JS文件中的function（包括操作cookie、Dom等等）。根据这一点，可以方便地通过创建script节点的方法来实现完全跨域的通信。具体的做法可以参考YUI的Get Utility</p>
<p>这里判断script节点加载完毕还是蛮有意思的：ie只能通过script的readystatechange属性，其它浏览器是script的load事件。以下是部分判断script加载完毕的方法。</p>
<p>js.onload = js.onreadystatechange = function() {<br>    if (!this.readyState || this.readyState === ‘loaded’ || this.readyState === ‘complete’) {<br>        // callback在此处执行<br>        js.onload = js.onreadystatechange = null;<br>    }<br>};<br>3、利用iframe和location.hash<br>这个办法比较绕，但是可以解决完全跨域情况下的脚步置换问题。原理是利用location.hash来进行传值。在url： <a href="http://a.com#helloword中的‘#helloworld’就是location.hash，改变hash并不会导致页面刷新，所以可以利用hash值来进行数据传递，当然数据容量是有限的。假设域名a.com下的文件cs1.html要和cnblogs.com域名下的cs2.html传递信息，cs1.html首先创建自动创建一个隐藏的iframe，iframe的src指向cnblogs.com域名下的cs2.html页面，这时的hash值可以做参数传递用。cs2.html响应请求后再将通过修改cs1.html的hash值来传递数据（由于两个页面不在同一个域下IE、Chrome不允许修改parent.location.hash的值，所以要借助于a.com域名下的一个代理iframe；Firefox可以修改）。同时在cs1.html上加一个定时器，隔一段时间来判断location.hash的值有没有变化，一点有变化则获取获取hash值。代码如下：" target="_blank" rel="external">http://a.com#helloword中的‘#helloworld’就是location.hash，改变hash并不会导致页面刷新，所以可以利用hash值来进行数据传递，当然数据容量是有限的。假设域名a.com下的文件cs1.html要和cnblogs.com域名下的cs2.html传递信息，cs1.html首先创建自动创建一个隐藏的iframe，iframe的src指向cnblogs.com域名下的cs2.html页面，这时的hash值可以做参数传递用。cs2.html响应请求后再将通过修改cs1.html的hash值来传递数据（由于两个页面不在同一个域下IE、Chrome不允许修改parent.location.hash的值，所以要借助于a.com域名下的一个代理iframe；Firefox可以修改）。同时在cs1.html上加一个定时器，隔一段时间来判断location.hash的值有没有变化，一点有变化则获取获取hash值。代码如下：</a></p>
<p>先是a.com下的文件cs1.html文件：</p>
<p>function startRequest(){<br>    var ifr = document.createElement(‘iframe’);<br>    ifr.style.display = ‘none’;<br>    ifr.src = ‘<a href="http://www.cnblogs.com/lab/cscript/cs2.html#paramdo" target="_blank" rel="external">http://www.cnblogs.com/lab/cscript/cs2.html#paramdo</a>‘;<br>    document.body.appendChild(ifr);<br>}</p>
<p>function checkHash() {<br>    try {<br>        var data = location.hash ? location.hash.substring(1) : ‘’;<br>        if (console.log) {<br>            console.log(‘Now the data is ‘+data);<br>        }<br>    } catch(e) {};<br>}<br>setInterval(checkHash, 2000);<br>cnblogs.com域名下的cs2.html:</p>
<p>//模拟一个简单的参数处理操作<br>switch(location.hash){<br>    case ‘#paramdo’:<br>        callBack();<br>        break;<br>    case ‘#paramset’:<br>        //do something……<br>        break;<br>}</p>
<p>function callBack(){<br>    try {<br>        parent.location.hash = ‘somedata’;<br>    } catch (e) {<br>        // ie、chrome的安全机制无法修改parent.location.hash，<br>        // 所以要利用一个中间的cnblogs域下的代理iframe<br>        var ifrproxy = document.createElement(‘iframe’);<br>        ifrproxy.style.display = ‘none’;<br>        ifrproxy.src = ‘<a href="http://a.com/test/cscript/cs3.html#somedata" target="_blank" rel="external">http://a.com/test/cscript/cs3.html#somedata</a>‘;    // 注意该文件在”a.com”域下<br>        document.body.appendChild(ifrproxy);<br>    }<br>}<br>a.com下的域名cs3.html</p>
<p>//因为parent.parent和自身属于同一个域，所以可以改变其location.hash的值<br>parent.parent.location.hash = self.location.hash.substring(1);<br>当然这样做也存在很多缺点，诸如数据直接暴露在了url中，数据容量和类型都有限等……</p>
<p>4、window.name实现的跨域数据传输<br>文章较长列在此处不便于阅读，详细请看 window.name实现的跨域数据传输。</p>
<p>5、使用HTML5 postMessage<br>HTML5中最酷的新功能之一就是 跨文档消息传输Cross Document Messaging。下一代浏览器都将支持这个功能：Chrome 2.0+、Internet Explorer 8.0+, Firefox 3.0+, Opera 9.6+, 和 Safari 4.0+ 。 Facebook已经使用了这个功能，用postMessage支持基于web的实时消息传递。</p>
<p>otherWindow.postMessage(message, targetOrigin);<br>otherWindow: 对接收信息页面的window的引用。可以是页面中iframe的contentWindow属性；window.open的返回值；通过name或下标从window.frames取到的值。<br>message: 所要发送的数据，string类型。<br>targetOrigin: 用于限制otherWindow，“*”表示不作限制<br>a.com/index.html中的代码：</p>
<p><iframe id="ifr" src="b.com/index.html"></iframe></p>
<p><script type="text/javascript"><br>window.onload = function() {<br>    var ifr = document.getElementById(‘ifr’);<br>    var targetOrigin = ‘<a href="http://b.com">http://b.com</a>‘;  // 若写成’<a href="http://b.com/c/proxy.html&#39;效果一样">http://b.com/c/proxy.html&#39;效果一样</a><br>                                        // 若写成’<a href="http://c.com&#39;就不会执行postMessage了">http://c.com&#39;就不会执行postMessage了</a><br>    ifr.contentWindow.postMessage(‘I was there!’, targetOrigin);<br>};<br></script><br>b.com/index.html中的代码：</p>
<p><script type="text/javascript"><br>    window.addEventListener(‘message’, function(event){<br>        // 通过origin属性判断消息来源地址<br>        if (event.origin == ‘<a href="http://a.com">http://a.com</a>‘) {<br>            alert(event.data);    // 弹出”I was there!”<br>            alert(event.source);  // 对a.com、index.html中window对象的引用<br>                                  // 但由于同源策略，这里event.source不可以访问window对象<br>        }<br>    }, false);<br></script><br>参考文章：《精通HTML5编程》第五章——跨文档消息机制、<a href="https://developer.mozilla.org/en/dom/window.postmessage" target="_blank" rel="external">https://developer.mozilla.org/en/dom/window.postmessage</a></p>
<p>6、利用flash<br>这是从YUI3的IO组件中看到的办法，具体可见<a href="http://developer.yahoo.com/yui/3/io/。" target="_blank" rel="external">http://developer.yahoo.com/yui/3/io/。</a><br>可以看在Adobe Developer Connection看到更多的跨域代理文件规范：ross-Domain Policy File Specifications、HTTP Headers Blacklist。</p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/浏览器拦截跨域请求处理方法/" >
  浏览器拦截跨域请求处理方法
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/浏览器拦截跨域请求处理方法/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网络/">网络</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跨域请求处理方法/">跨域请求处理方法</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p><a href="http://my.oschina.net/lichaoqiang/blog/317823" target="_blank" rel="external">浏览器拦截跨域请求处理方法（同源策略不允许读取XXX上的远程资源）</a></p>
<p>解决此类问题，最直接的方法就是，就是给被请求的服务器，添加HTTP头响应头，这里提供两种添加HTTP头的方法：</p>
<ul>
<li>第一种，就是在程序中添加HTTP头：</li>
</ul>
<p>如： Response.Headers.Add(“Access-Control-Allow-Origin”, “<em>“);<br>  添加此段代码的目的很简单，也就是告诉浏览器，这个资源是运行远程所有域名访问的。当然，此处的</em>也可以替换为指定的域名，出于安全考虑，建议将*替换成指定的域名。</p>
<ul>
<li><p>第二种，就是在服务器上，添加HTTP响应头。在这里，我们就以IIS6.0为例：</p>
<p> 在被请求的网站上，设置HTTP头，添加“</p>
</li>
</ul>
<p>Access-Control-Allow-Origin<br>   值为:*或指定的域名。</p>
<p>  一般完成以上工作，就可以了。网上还有说在被请求服务器根目录下创建:”crossdomain.xml”的文件。内容格式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;cross-domain-policy&gt;</span><br><span class="line">  &lt;allow-access-from domain=&quot;*&quot; /&gt;</span><br><span class="line">&lt;/cross-domain-policy&gt;</span><br></pre></td></tr></table></figure></p>

        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/套接字/" >
  套接字
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/套接字/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网络/">网络</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP-UDP/">TCP/UDP</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>源IP地址和目的IP地址以及源端口号和目的端口号的组合称为套接字。其用于标识客户端请求的服务器和服务。<br><a href="http://blog.csdn.net/pitt_xiong/article/details/7466632" target="_blank" rel="external">套接字</a></p>
<p>　　套接字，简单的说就是通信双方的一种约定，用套接字中的相关函数来完成通信过程。应用层通过传输层进行数据通信时，TCP和UDP会遇到同时为多个应用程序进程提供并发服务的问题。多个TCP连接或多个应用程序进程可能需要通过同一个 TCP协议端口传输数据。为了区别不同的应用程序进程和连接，许多计算机操作系统为应用程序与TCP/IP协议交互提供了称为套接字(Socket)的接口。</p>
<pre><code>区分不同应用程序进程间的网络通信和连接，主要有3个参数：通信的目的IP地址、使用的传输层协议(TCP或UDP)和使用的端口号。Socket原意是 “插座”。通过将这3个参数结合起来，与一个“插座”Socket绑定，应用层就可以和传输层通过套接字接口，区分来自不同应用程序进程或网络连接的通信，实现数据传输的并发服务。

 每一个基于TCP/IP网络通讯的程序(进程)都被赋予了唯一的端口和端口号，端口是一个信息缓冲区，用于保留Socket中的输入/输出信息，端口号是一个16位无符号整数，范围是0-65535，以区别主机上的每一个程序（端口号就像房屋中的房间号），低于256的端口号保留给标准应用程序，比如pop3的端口号就是110，每一个套接字都组合进了IP地址、端口、端口号，这样形成的整体就可以区别每一个套接字。关于WinSock中的套接字接发缓冲区的大小，可以通过WSA：getsockopt/setsockopt 来读取并设置。

Socket可以看成在两个程序进行通讯连接中的一个端点，一个程序将一段信息写入Socket中，该Socket将这段信息发送给另外一个Socket中，使这段信息能传送到其他程序中。一般一个server服务器对应很多客户端client连接，则服务器必须维护一张客户连接列表，每增加一个客户端连接服务器端都要新建一个套接字负责与新增客户端进行对话通信。

套接字主要有两类：流式套接字（SOCK_STREAM）和数据报套接字（SOCK_DGRAM）。流类型的套接字是为需要可靠连接的应用程序设计的。这些程序通常使用连续的数据流。用于这种类型套接字的协议是TCP，适合FTP这类实现。流套接字是最常用的，一些众所周知的协议如HTTP、TCP、SMTP、POP3等都是用它。

 数据报套接字使用UDP做为下层协议，是无连接的，有一个最大缓冲区大小（数据包大小的最大值）。它是为那些需要发送小数据包，并且对可靠性要求不高的应用程序设计的。与流式套接字不同，数据报套接字并不保证数据会到达终端，也不保证它是以正确的顺序到来的。数据报套接字的传输效率相当高，它经常用于音频或视频应用程序。对这些程序来说，速度比可靠性更加重要。
</code></pre><p>以下为基于Socket的C/S通信模式图：</p>
<p>(1)同步和异步问题</p>
<pre><code>同步方式指发送方发出数据后，等接收方发回响应以后才发下一个数据包的通讯方式，它是一种阻塞模式；而异步指发送方发出数据后，不等接收方发回响应，接着发送下个数据包的通讯方式，它是非阻塞模式。
</code></pre><p> 关于同步和异步，参考以下实例：</p>
<p>举例1：手机的通讯</p>
<p>手机打电话时同步，发短信是异步。</p>
<p>举例2：请你吃饭</p>
<p>同步就是你叫我去吃饭，我听到了就和你去吃饭；如果没有听到，你就不停的叫，直到我告诉你听到了，才一起去吃饭。</p>
<p>异步就是你叫我，然后自己去吃饭，我得到消息后可能立即走，也可能等到下班才去吃饭。</p>
<p>举例3：Windows消息处理</p>
<p>SendMessage同步：把一条消息投放到创建hWnd窗口的线程的消息队列中，直到消息被处理完毕才返回。</p>
<p>PostMessage异步：把一条消息投放到创建hWnd窗口的线程的消息队列中，不等消息被处理就立即返回。</p>
<p>举例4：B/S交互</p>
<p>普通B/S模式同步：提交请求-&gt;等待服务器处理（这期间客户浏览器不能干任何其他事情）-&gt;处理完毕返回。</p>
<p>AJAX技术异步: 请求通过事件触发-&gt;服务器处理（这期间浏览器仍然可以作其他事情）-&gt;处理完毕。</p>
<p>(2)基于socket的C/S结构程序设计</p>
<pre><code>套接字的本质是通信过程中所要使用的一些缓冲区及一些相关的数据结构。
</code></pre><p>1）.服务器创建监听套接字，并为它关联一个本地地址（IP和端口Port），然后进入监听状态准备接受客户的连接请求。为了接受客户的连接请求，服务器必须调用accept函数。服务器端每接收到一个客户端连接就新建一个套接字负责与该客户会话。</p>
<p>2）.客户端创建套接字后即可调用connect函数去试图连接服务器监听套接字。当服务器端的accept函数返回后，connect函数也返回。此时客户方使用socket函数创建的套接字clientSocket，服务器方使用accept返回的套接字serverSocket，双方就可以通信了。</p>
<p>(3)关于服务器端监听套接字和accept返回的新的套接字的区别</p>
<pre><code>一个连接由server_ip, server_port, client_ip, server_port唯一确定。你可用getsockname和getpeername由某个socket取得。

关于监听套接字和accept返回的新的套接字的区别，借用以下情景说明。好比你去吃饭，饭馆门迎小姐（监听SOCKET）看到你来后和你打招呼，然后（ACCEPT）找来一个服务员小姐（NEW SOCKET）伺候你，然后守在门口继续欢迎（监听）下一个。当然门迎小姐会记录是哪一位服务员小姐招待了你；如再有新客人来，门迎小姐（同一监听SOCKET）又会安排另一位服务员小姐（NEW SOCKET）伺候。门迎小姐走了，伺候每一位客人的服务员小姐不受影响。从以上情景可知连接建立后，客户端用发出连接的那个SOCKET向服务器发数据，是发给服务器新创建的SOCKET，而不是服务器的监听SOCKET。服务器的监听SOCKET永远只是用来接受连接请求。
</code></pre>
        
      </div>
    </div>

  

  
  
    
  

    <div class="post-list-item article">
      <h3 class="article-header">
        <a href="/2016/05/24/TCP协议与UDP协议的区别/" >
  TCP协议与UDP协议的区别
</a>

      </h3>
      

      <div class="article-info">
        <a href="/2016/05/24/TCP协议与UDP协议的区别/"><span class="article-date">
  2016-05-24
</span>
</a>
        
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/">技术</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术/网络/">网络</a></li></ul></li></ul>
	</span>


        
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP-UDP/">TCP/UDP</a></li></ul>
	</span>


      </div>
      <div class="article-entry">
        
          <p>TCP协议与UDP协议的区别<a href="http://www.cnblogs.com/bizhu/archive/2012/05/12/2497493.html" target="_blank" rel="external">转载地址</a></p>
<p>首先咱们弄清楚，TCP协议和UCP协议与TCP/IP协议的联系，很多人犯糊涂了，一直都是说TCP/IP协议与UDP协议的区别，我觉得这是没有从本质上弄清楚网络通信！</p>
<h3 id="TCP-IP协议是一个协议簇。里面包括很多协议的。UDP只是其中的一个。之所以命名为TCP-IP协议，因为TCP-IP协议是两个很重要的协议，就用他两命名了。"><a href="#TCP-IP协议是一个协议簇。里面包括很多协议的。UDP只是其中的一个。之所以命名为TCP-IP协议，因为TCP-IP协议是两个很重要的协议，就用他两命名了。" class="headerlink" title="TCP/IP协议是一个协议簇。里面包括很多协议的。UDP只是其中的一个。之所以命名为TCP/IP协议，因为TCP,IP协议是两个很重要的协议，就用他两命名了。"></a>TCP/IP协议是一个协议簇。里面包括很多协议的。UDP只是其中的一个。之所以命名为TCP/IP协议，因为TCP,IP协议是两个很重要的协议，就用他两命名了。</h3><ul>
<li><p>TCP/IP协议集包括应用层,传输层，网络层，网络访问层。</p>
</li>
<li><p>其中应用层包括:</p>
<blockquote>
<p>超文本传输协议(HTTP):万维网的基本协议.<br>文件传输(TFTP简单文件传输协议):<br>远程登录(Telnet),提供远程访问其它主机功能,它允许用户登录<br>internet主机,并在这台主机上执行命令.<br>网络管理(SNMP简单网络管理协议),该协议提供了监控网络设备的方法,以及配置管理,统计信息收集,性能管理及安全管理等.<br>域名系统(DNS),该系统用于在internet中将域名及其公共广播的网络节点转换成IP地址. </p>
</blockquote>
</li>
<li><p>其次网络层包括:    </p>
<blockquote>
<p>Internet协议(IP)<br>Internet控制信息协议(ICMP)<br>地址解析协议(ARP)<br>反向地址解析协议(RARP)<br>最后说网络访问层:网络访问层又称作主机到网络层(host-to-network).网络访问层的功能包括IP地址与物理地址硬件的映射,以及将IP封装成帧.基于不同硬件类型的网络接口,网络访问层定义了和物理介质的连接.</p>
</blockquote>
</li>
</ul>
<p>当然我这里说得不够完善，TCP/IP协议本来就是一门学问，每一个分支都是一个很复杂的流程，但我相信每位学习软件开发的同学都有必要去仔细了解一番。</p>
<ul>
<li>下面我着重讲解一下TCP协议和UDP协议的区别。</li>
</ul>
<p>TCP（Transmission Control Protocol，传输控制协议）是面向连接的协议，也就是说，在收发数据前，必须和对方建立可靠的连接。</p>
<p>一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂，只简单的描述下这三次对话的简单过程：主机A向主机B发出连接请求数据包：“我想给你发数据，可以吗？”，这是第一次对话；主机B向主机A发送同意连接和要求同步（同步就是两台主机一个在发送，一个在接收，协调工作）的数据包：“可以，你什么时候发？”，这是第二次对话；主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”，这是第三次对话。三次“对话”的目的是使数据包的发送和接收同步，经过三次“对话”之后，主机A才向主机B正式发送数据。<br>详细点说就是：（文章部分转载<a href="http://zhangjiangxing-gmail-com.iteye.com，主要是这个人讲解得很到位，的确很容易使人理解！）" target="_blank" rel="external">http://zhangjiangxing-gmail-com.iteye.com，主要是这个人讲解得很到位，的确很容易使人理解！）</a></p>
<ul>
<li><p>TCP三次握手过程</p>
<blockquote>
<p>1 主机A通过向主机B 发送一个含有同步序列号的标志位的数据段给主机B ,向主机B 请求建立连接,通过这个数据段,<br>主机A告诉主机B 两件事:我想要和你通信;你可以用哪个序列号作为起始数据段来回应我.<br>2 主机B 收到主机A的请求后,用一个带有确认应答(ACK)和同步序列号(SYN)标志位的数据段响应主机A,也告诉主机A两件事:<br>我已经收到你的请求了,你可以传输数据了;你要用哪佧序列号作为起始数据段来回应我<br>3 主机A收到这个数据段后,再发送一个确认应答,确认已收到主机B 的数据段:”我已收到回复,我现在要开始传输实际数据了<br>这样3次握手就完成了,主机A和主机B 就可以传输数据了.</p>
</blockquote>
</li>
<li><p>3次握手的特点</p>
<blockquote>
<p>没有应用层的数据<br>SYN这个标志位只有在TCP建产连接时才会被置1<br>握手完成后SYN标志位被置0</p>
</blockquote>
</li>
<li><p>TCP建立连接要进行3次握手,而断开连接要进行4次</p>
</li>
</ul>
<blockquote>
<p>1 当主机A完成数据传输后,将控制位FIN置1,提出停止TCP连接的请求<br>2  主机B收到FIN后对其作出响应,确认这一方向上的TCP连接将关闭,将ACK置1<br>3 由B 端再提出反方向的关闭请求,将FIN置1<br>4 主机A对主机B的请求进行确认,将ACK置1,双方向的关闭结束.<br>由TCP的三次握手和四次断开可以看出,TCP使用面向连接的通信方式,大大提高了数据通信的可靠性,使发送数据端<br>和接收端在数据正式传输前就有了交互,为数据正式传输打下了可靠的基础</p>
</blockquote>
<ul>
<li><strong>名词解释</strong></li>
</ul>
<ol>
<li><p>ACK  TCP报头的控制位之一,对数据进行确认.确认由目的端发出,用它来告诉发送端这个序列号之前的数据段都收到了.比如,确认号为X,则表示前X-1个数据段都收到了,只有当ACK=1时,确认号才有效,当ACK=0时,确认号无效,这时会要求重传数据,保证数据的完整性.</p>
</li>
<li><p>SYN  同步序列号,TCP建立连接时将这个位置1</p>
</li>
<li><p>FIN  发送端完成发送任务位,当TCP完成数据传输需要断开时,提出断开连接的一方将这位置1</p>
</li>
</ol>
<ul>
<li>TCP的包头结构：<blockquote>
<p>源端口 16位<br>目标端口 16位<br>序列号 32位<br>回应序号 32位<br>TCP头长度 4位<br>reserved 6位<br>控制代码 6位<br>窗口大小 16位<br>偏移量 16位<br>校验和 16位<br>选项  32位(可选)</p>
</blockquote>
</li>
</ul>
<p>这样我们得出了TCP包头的最小长度，为20字节。</p>
<h3 id="UDP（User-Data-Protocol，用户数据报协议）"><a href="#UDP（User-Data-Protocol，用户数据报协议）" class="headerlink" title="UDP（User Data Protocol，用户数据报协议）"></a>UDP（User Data Protocol，用户数据报协议）</h3><blockquote>
<p>（1） UDP是一个非连接的协议，传输数据之前源端和终端不建立连接，当它想传送时就简单地去抓取来自应用程序的数据，并尽可能快地把它扔到网络上。在发送端，UDP传送数据的速度仅仅是受应用程序生成数据的速度、计算机的能力和传输带宽的限制；在接收端，UDP把每个消息段放在队列中，应用程序每次从队列中读一个消息段。</p>
</blockquote>
<hr>
<blockquote>
<p>（2） 由于传输数据不建立连接，因此也就不需要维护连接状态，包括收发状态等，因此一台服务机可同时向多个客户机传输相同的消息。</p>
</blockquote>
<hr>
<blockquote>
<p>（3） UDP信息包的标题很短，只有8个字节，相对于TCP的20个字节信息包的额外开销很小。</p>
</blockquote>
<hr>
<blockquote>
<p>（4） 吞吐量不受拥挤控制算法的调节，只受应用软件生成数据的速率、传输带宽、源端和终端主机性能的限制。</p>
</blockquote>
<hr>
<blockquote>
<p>（5）UDP使用尽最大努力交付，即不保证可靠交付，因此主机不需要维持复杂的链接状态表（这里面有许多参数）。</p>
</blockquote>
<hr>
<blockquote>
<p>（6）UDP是面向报文的。发送方的UDP对应用程序交下来的报文，在添加首部后就向下交付给IP层。既不拆分，也不合并，而是保留这些报文的边界，因此，应用程序需要选择合适的报文大小。</p>
</blockquote>
<p><em>我们经常使用“ping”命令来测试两台主机之间TCP/IP通信是否正常，其实“ping”命令的原理就是向对方主机发送UDP数据包，然后对方主机确认收到数据包，如果数据包是否到达的消息及时反馈回来，那么网络就是通的。</em></p>
<ul>
<li>UDP的包头结构：<blockquote>
<p>源端口 16位<br>目的端口 16位<br>长度 16位<br>校验和 16位</p>
</blockquote>
</li>
</ul>
<h3 id="小结TCP与UDP的区别："><a href="#小结TCP与UDP的区别：" class="headerlink" title="小结TCP与UDP的区别："></a>小结TCP与UDP的区别：</h3><ol>
<li><p>基于连接与无连接；</p>
</li>
<li><p>对系统资源的要求（TCP较多，UDP少）；</p>
</li>
<li><p>UDP程序结构较简单；</p>
</li>
<li><p>流模式与数据报模式 ；</p>
</li>
<li><p>TCP保证数据正确性，UDP可能丢包，TCP保证数据顺序，UDP不保证。</p>
</li>
</ol>

        
      </div>
    </div>

  



  <div class="pagination">
    <a class="extend prev" rel="prev" href="/archives/2016/05/">上一页</a><a class="page-number" href="/archives/2016/05/">1</a><span class="page-number current">2</span><a class="page-number" href="/archives/2016/05/page/3/">3</a><a class="page-number" href="/archives/2016/05/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/archives/2016/05/page/13/">13</a><a class="extend next" rel="next" href="/archives/2016/05/page/3/">下一页</a>
  </div>




          <div class="main-footer">
  
    © 2016 findmoon-白色蜗牛 - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
